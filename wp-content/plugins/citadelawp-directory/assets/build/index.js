(()=>{"use strict";var e={20:(e,t,a)=>{var l=a(540),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,r=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function n(e,t,a){var l,s={},n=null,d=null;for(l in void 0!==a&&(n=""+a),void 0!==t.key&&(n=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,l)&&!c.hasOwnProperty(l)&&(s[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps)void 0===s[l]&&(s[l]=t[l]);return{$$typeof:i,type:e,key:n,ref:d,props:s,_owner:r.current}}t.Fragment=s,t.jsx=n,t.jsxs=n},287:(e,t)=>{var a=Symbol.for("react.element"),l=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),c=Symbol.for("react.context"),n=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.iterator,g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,m={};function y(e,t,a){this.props=e,this.context=t,this.refs=m,this.updater=a||g}function x(){}function v(e,t,a){this.props=e,this.context=t,this.refs=m,this.updater=a||g}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=y.prototype;var j=v.prototype=new x;j.constructor=v,b(j,y.prototype),j.isPureReactComponent=!0;var f=Array.isArray,k=Object.prototype.hasOwnProperty,C={current:null},w={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,l){var i,s={},o=null,r=null;if(null!=t)for(i in void 0!==t.ref&&(r=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,i)&&!w.hasOwnProperty(i)&&(s[i]=t[i]);var c=arguments.length-2;if(1===c)s.children=l;else if(1<c){for(var n=Array(c),d=0;d<c;d++)n[d]=arguments[d+2];s.children=n}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===s[i]&&(s[i]=c[i]);return{$$typeof:a,type:e,key:o,ref:r,props:s,_owner:C.current}}function S(e){return"object"==typeof e&&null!==e&&e.$$typeof===a}var _=/\/+/g;function I(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var r=typeof e;"undefined"!==r&&"boolean"!==r||(e=null);var c=!1;if(null===e)c=!0;else switch(r){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case a:case l:c=!0}}if(c)return o=o(c=e),e=""===s?"."+I(c,0):s,f(o)?(i="",null!=e&&(i=e.replace(_,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(_,"$&/")+"/")+e)),t.push(o)),1;if(c=0,s=""===s?".":s+":",f(e))for(var n=0;n<e.length;n++){var d=s+I(r=e[n],n);c+=N(r,t,i,d,o)}else if(d=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"==typeof d)for(e=d.call(e),n=0;!(r=e.next()).done;)c+=N(r=r.value,t,i,d=s+I(r,n++),o);else if("object"===r)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function A(e,t,a){if(null==e)return e;var l=[],i=0;return N(e,l,"","",(function(e){return t.call(a,e,i++)})),l}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var H={current:null},B={transition:null},F={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:B,ReactCurrentOwner:C};function P(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,a){A(e,(function(){t.apply(this,arguments)}),a)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=v,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,t.act=P,t.cloneElement=function(e,t,l){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=b({},e.props),s=e.key,o=e.ref,r=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,r=C.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(n in t)k.call(t,n)&&!w.hasOwnProperty(n)&&(i[n]=void 0===t[n]&&void 0!==c?c[n]:t[n])}var n=arguments.length-2;if(1===n)i.children=l;else if(1<n){c=Array(n);for(var d=0;d<n;d++)c[d]=arguments[d+2];i.children=c}return{$$typeof:a,type:e.type,key:s,ref:o,props:i,_owner:r}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:r,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:n,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=B.transition;B.transition={};try{e()}finally{B.transition=t}},t.unstable_act=P,t.useCallback=function(e,t){return H.current.useCallback(e,t)},t.useContext=function(e){return H.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return H.current.useDeferredValue(e)},t.useEffect=function(e,t){return H.current.useEffect(e,t)},t.useId=function(){return H.current.useId()},t.useImperativeHandle=function(e,t,a){return H.current.useImperativeHandle(e,t,a)},t.useInsertionEffect=function(e,t){return H.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return H.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return H.current.useMemo(e,t)},t.useReducer=function(e,t,a){return H.current.useReducer(e,t,a)},t.useRef=function(e){return H.current.useRef(e)},t.useState=function(e){return H.current.useState(e)},t.useSyncExternalStore=function(e,t,a){return H.current.useSyncExternalStore(e,t,a)},t.useTransition=function(){return H.current.useTransition()},t.version="18.3.1"},540:(e,t,a)=>{e.exports=a(287)},848:(e,t,a)=>{e.exports=a(20)}},t={};const a=[{json:[{stylers:[{hue:""},{saturation:"20"},{lightness:"0"}]},{featureType:"landscape",stylers:[{visibility:"on"},{hue:""},{saturation:""},{lightness:""}]},{featureType:"administrative",stylers:[{visibility:"on"},{hue:""},{saturation:""},{lightness:""}]},{featureType:"road",stylers:[{visibility:"on"},{hue:""},{saturation:""},{lightness:""}]},{featureType:"water",stylers:[{visibility:"on"},{hue:"#c6e8eb"},{saturation:"-70"},{lightness:""}]},{featureType:"poi",stylers:[{visibility:"on"},{hue:""},{saturation:""},{lightness:""}]}],name:"Citadela",codeName:"citadela"},{json:[],name:"Standard",codeName:"standard"},{json:[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}],name:"Silver",codeName:"silver"},{json:[{elementType:"geometry",stylers:[{color:"#ebe3cd"}]},{elementType:"labels.text.fill",stylers:[{color:"#523735"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f1e6"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#c9b2a6"}]},{featureType:"administrative.land_parcel",elementType:"geometry.stroke",stylers:[{color:"#dcd2be"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#ae9e90"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#93817c"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#a5b076"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#447530"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#f5f1e6"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#fdfcf8"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#f8c967"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#e9bc62"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#e98d58"}]},{featureType:"road.highway.controlled_access",elementType:"geometry.stroke",stylers:[{color:"#db8555"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#806b63"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"transit.line",elementType:"labels.text.fill",stylers:[{color:"#8f7d77"}]},{featureType:"transit.line",elementType:"labels.text.stroke",stylers:[{color:"#ebe3cd"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#b9d3c2"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#92998d"}]}],name:"Retro",codeName:"retro"},{json:[{elementType:"geometry",stylers:[{color:"#212121"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{elementType:"labels.text.stroke",stylers:[{color:"#212121"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#757575"}]},{featureType:"administrative.country",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#181818"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"poi.park",elementType:"labels.text.stroke",stylers:[{color:"#1b1b1b"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#2c2c2c"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#373737"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#3c3c3c"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#4e4e4e"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#3d3d3d"}]}],name:"Dark",codeName:"dark"},{json:[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}],name:"Night",codeName:"night"},{json:[{elementType:"geometry",stylers:[{color:"#1d2c4d"}]},{elementType:"labels.text.fill",stylers:[{color:"#8ec3b9"}]},{elementType:"labels.text.stroke",stylers:[{color:"#1a3646"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#64779e"}]},{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"landscape.man_made",elementType:"geometry.stroke",stylers:[{color:"#334e87"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#023e58"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#283d6a"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#6f9ba5"}]},{featureType:"poi",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#023e58"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#3C7680"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#304a7d"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#2c6675"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#255763"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#b0d5ce"}]},{featureType:"road.highway",elementType:"labels.text.stroke",stylers:[{color:"#023e58"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"transit",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"transit.line",elementType:"geometry.fill",stylers:[{color:"#283d6a"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#3a4762"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#0e1626"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#4e6d70"}]}],name:"Aubergine",codeName:"aubergine"}];var l=function a(l){var i=t[l];if(void 0!==i)return i.exports;var s=t[l]={exports:{}};return e[l](s,s.exports,a),s.exports}(848);const{__:i}=wp.i18n,{Component:s,Fragment:o}=wp.element,{BaseControl:r,ColorPicker:c,Dropdown:n,Button:d}=wp.components;class p extends s{render(){const{label:e,help:t,color:a,disableAlpha:s=!1,returnObject:p=!1,allowReset:u=!0,onChange:h}=this.props;return(0,l.jsxs)(o,{children:[(0,l.jsx)(r,{label:e||"",className:"block-editor-panel-color-settings",children:(0,l.jsx)("div",{className:classNames("citadela-color-control",{alpha:!s}),children:(0,l.jsxs)("div",{className:"dropdown-component-holder",children:[(0,l.jsx)(n,{position:"bottom center",className:"dropdown-component",renderToggle:({isOpen:e,onToggle:t})=>(0,l.jsx)("div",{class:"citadela-color-indicator",onClick:t,children:(0,l.jsx)("div",{class:"inner-color",style:a?{backgroundColor:a}:null})}),renderContent:()=>(0,l.jsx)(c,{color:a,onChangeComplete:e=>{h(s?e.hex:p?e.rgb:`rgba(${e.rgb.r}, ${e.rgb.g}, ${e.rgb.b}, ${e.rgb.a})`)},disableAlpha:s})}),u&&(0,l.jsx)(d,{disabled:!a,isSecondary:!0,isSmall:!0,onClick:()=>h(void 0),children:i("Clear","citadela-directory")})]})})}),t&&(0,l.jsx)("p",{class:"components-base-control__help",children:t})]})}}const{__:u}=wp.i18n,{Component:h,useCallback:g}=wp.element,{BaseControl:b,RangeControl:m}=wp.components,y=({rangeValue:e="",onChange:t,min:a,max:i,step:s,initial:o,allowReset:r,allowNoValue:c})=>{const n=g((e=>{t(c?e:void 0===e?o:e)}),[t,o,c]);return(0,l.jsx)(m,{value:e,min:a,max:i,step:s,initialPosition:o,allowReset:r,onChange:n})};class x extends h{render(){const{label:e,help:t="",min:a=0,max:i=100,step:s=1,initial:o=50,onChange:r,rangeValue:c,allowReset:n=!1,allowNoValue:d=!1}=this.props,p=d?void 0:o;return(0,l.jsx)(b,{label:e,help:t,children:(0,l.jsx)(y,{rangeValue:c,onChange:r,min:a,max:i,step:s,initial:p,allowReset:n})})}}const{Component:v,createRef:j,useState:f}=wp.element,{__:k,sprintf:C}=wp.i18n,{InspectorControls:w,InnerBlocks:T}=wp.blockEditor,{PanelBody:S,ToggleControl:I,Icon:N,RadioControl:A,TextareaControl:O,SelectControl:H,TextControl:B,BaseControl:F,RangeControl:P}=wp.components,{getBlockName:D,getBlockParents:L}=wp.data.select("core/block-editor");let M=a.map((e=>({label:e.name,value:e.codeName})));M.push({label:k("Custom","citadela-directory"),value:"custom"});const R=({attributes:e,setAttributes:t})=>{const{unit:a,height:i}=e,[s,o]=f(i);let r={px:{min:300,max:800},vh:{min:30,max:100},vw:{min:30,max:100}},c=1;return"px"!=a&&(c=.1),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(F,{label:k("Height unit","citadela-directory"),children:(0,l.jsx)(H,{value:a,options:[{label:"px",value:"px"},{label:"vh",value:"vh"},{label:"vw",value:"vw"}],onChange:e=>{o(r[e].min),t({unit:e,height:r[e].min})}})}),(0,l.jsx)(F,{label:k("Recommended map height","citadela-directory")+`: ${i}${a}`,help:k("Minimum map height may differ of defined value due to needs of map's inside content.","citadela-directory"),id:"spacer-height",children:(0,l.jsx)(P,{value:s,onChange:e=>{let l=e;o(l),""==e&&(o(""),l=r[a].min),t("px"!=a?{height:l?parseFloat(l):l}:{height:l?parseInt(l):l})},min:r[a].min,max:r[a].max,step:c})})]})},$=({attributes:e,setAttributes:t})=>{const{outsideFormBreakpoint:a}=e,[i,s]=f(a);return(0,l.jsx)(F,{label:k("Form inside map breakpoint","citadela-directory"),help:k("Search form is displayed inside map on screen width larger than","citadela-directory")+` ${a}px.`,id:"mobile-width",children:(0,l.jsx)(B,{type:"number",value:i,onChange:e=>{let a=e;s(a),""==e&&(a=600),t({outsideFormBreakpoint:a?parseInt(a):a})},step:1})})},z=JSON.parse('{"apiVersion":1,"name":"citadela-directory/automatic-directory-google-map","category":"citadela-directory-blocks","icon":"vault","attributes":{"limitPosts":{"type":"boolean","default":false},"maxPosts":{"type":"number","default":50},"withSearchForm":{"type":"boolean","default":false},"theme":{"type":"string","default":"citadela"},"themeOSM":{"type":"string","default":"default"},"customTheme":{"type":"string","default":""},"provider":{"type":"string","default":"openstreetmap"},"dataType":{"type":"string","default":"markers"},"dynamicTrack":{"type":"boolean","default":false},"trackColor":{"type":"string","default":""},"trackEndpointsColor":{"type":"string","default":""},"inColumn":{"type":"boolean","default":false},"coverHeight":{"type":"boolean","default":false},"unit":{"type":"string","default":"px"},"height":{"type":"number","default":500},"outsideFormBreakpoint":{"type":"number","default":600},"noDataBehavior":{"type":"string","default":"empty-map"},"noDataText":{"type":"string","default":""},"clusterGridSize":{"type":"number","default":80}},"example":{"attributes":{"height":300}},"editorScript":"citadela-directory-blocks"}'),{__:E}=wp.i18n,{registerBlockType:V}=wp.blocks,{InnerBlocks:U}=wp.blockEditor,{Fragment:G}=wp.element,{name:W}=z;V(W,{...z,title:E("Automatic Listing Map","citadela-directory"),description:E("Displays relevant listing items automatically based on current page. For example search results or item detail location.","citadela-directory"),edit:class extends v{constructor(){super(...arguments),this.isParentColumn=this.isParentColumn.bind(this),this.updateMainBlockDivWrapper=this.updateMainBlockDivWrapper.bind(this),this.blockRef=j()}componentDidMount(){const{attributes:e,setAttributes:t}=this.props,a=this.isParentColumn();e.inColumn!==a&&t({inColumn:a}),this.updateMainBlockDivWrapper()}componentDidUpdate(){this.updateMainBlockDivWrapper()}isParentColumn(){const e=L(this.props.clientId);return e.length>0&&"core/column"===D(e[e.length-1])}updateMainBlockDivWrapper(){const{withSearchForm:e,coverHeight:t,inColumn:a}=this.props.attributes;let l=this.blockRef.current.parentNode;a&&t?l.dataset.coverHeight="true":delete l.dataset.coverHeight,e?l.dataset.withSearchForm="true":delete l.dataset.withSearchForm}render(){const{attributes:e,setAttributes:t,name:a,isSelected:i}=this.props,{limitPosts:s,maxPosts:o,withSearchForm:r,theme:c,themeOSM:n,customTheme:d,provider:u,dataType:h,dynamicTrack:g,trackColor:b,trackEndpointsColor:m,clusterGridSize:y,coverHeight:v,unit:j,height:f,inColumn:_,noDataBehavior:F,noDataText:P}=e,D=wp.blocks.getBlockType(a),L=`${CitadelaDirectorySettings.images}/blocks/map.png`,z=wp.data.select("core/editor").getCurrentPostId()===parseInt(CitadelaDirectorySettings.specialPages["single-item"]),E={...void 0===f||_&&v?{}:{height:f+j}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(w,{children:[(0,l.jsxs)(S,{title:k("Options","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:[(0,l.jsx)(H,{label:k("Maps provider","citadela-directory"),value:u,options:[{label:"Google Maps",value:"google-map"},{label:"OpenStreetMap",value:"openstreetmap"}],onChange:e=>{t({provider:e})}}),(0,l.jsx)(I,{label:k("With search form","citadela-directory"),checked:r,onChange:e=>t({withSearchForm:e})}),r&&(0,l.jsx)($,{attributes:e,setAttributes:t}),"openstreetmap"==u&&(0,l.jsx)(l.Fragment,{children:z?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p,{label:k("Track color","citadela-directory"),color:b,onChange:e=>{t({trackColor:e})},allowReset:!0}),(0,l.jsx)(p,{label:k("Track endpoints color","citadela-directory"),color:m,onChange:e=>{t({trackEndpointsColor:e})},allowReset:!0,disableAlpha:!0})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(A,{label:k("Show on map","citadela-directory"),selected:h,options:[{label:k("Markers","citadela-directory"),value:"markers"},{label:k("GPX Tracks","citadela-directory"),value:"tracks"},{label:k("Markers & GPX Tracks","citadela-directory"),value:"all"}],onChange:e=>{t({dataType:e})}}),"markers"!=h&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(I,{label:k("Dynamic track visibility","citadela-directory"),help:k("Tracks are hidden and replaced with map marker according to zoom level.","citadela-directory"),checked:g,onChange:e=>t({dynamicTrack:e})}),(0,l.jsx)(p,{label:k("Track color","citadela-directory"),color:b,onChange:e=>{t({trackColor:e})},allowReset:!0}),(0,l.jsx)(p,{label:k("Track endpoints color","citadela-directory"),color:m,onChange:e=>{t({trackEndpointsColor:e})},allowReset:!0,disableAlpha:!0})]})]})}),(0,l.jsx)(H,{label:k("Empty map behavior","citadela-directory"),value:F,options:[{label:k("Show empty map","citadela-directory"),value:"empty-map"},{label:k("Hide map","citadela-directory"),value:"hidden-map"}],onChange:e=>{t({noDataBehavior:e})}}),"empty-map"==F&&(0,l.jsx)(B,{label:k("Text displayed on empty map","citadela-directory"),value:P,onChange:e=>{t({noDataText:e})}})]}),(0,l.jsxs)(S,{title:k("Custom Height Settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[_&&(0,l.jsx)(I,{label:k("Cover column height","citadela-directory"),help:k("Works when block is the only block in a column.","citadela-directory"),checked:v,onChange:e=>{t({coverHeight:e})}}),(!_||_&&!v)&&(0,l.jsx)(R,{attributes:e,setAttributes:t})]}),(0,l.jsx)(S,{title:k("Marker Cluster Settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:(0,l.jsx)(x,{label:k("Cluster radius in px","citadela-directory"),help:0==y?k("Clusters are disabled.","citadela-directory"):C(k("Markers in distance less than %spx radius are grouped into clusters. Set 0 to disable clusters.","citadela-directory"),y),rangeValue:y,onChange:e=>{t({clusterGridSize:e})},min:0,max:200,initial:80,allowReset:!0})}),"google-map"==u&&(0,l.jsxs)(S,{title:k("Appearance","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(A,{label:k("Theme","citadela-directory"),selected:c,options:M,onChange:e=>{t({theme:e})}}),"custom"==c&&(0,l.jsx)(O,{label:k("Style JSON","citadela-directory"),help:(0,l.jsxs)(l.Fragment,{children:[k("Copy and paste the JSON from this website:","citadela-directory")," ",(0,l.jsx)("a",{target:"_blank",href:"https://mapstyle.withgoogle.com/",children:"https://mapstyle.withgoogle.com/"})]}),value:d,onChange:e=>{t({customTheme:e})}})]}),"openstreetmap"==u&&(0,l.jsx)(S,{title:k("Appearance","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:(0,l.jsx)(A,{label:k("Theme","citadela-directory"),selected:n,options:[{label:k("Default","citadela-directory"),value:"default"},{label:k("Silver","citadela-directory"),value:"silver"},{label:k("Retro","citadela-directory"),value:"retro"},{label:k("Dark","citadela-directory"),value:"dark"},{label:k("Night","citadela-directory"),value:"night"}],onChange:e=>{t({themeOSM:e})}})}),(0,l.jsxs)(S,{title:k("Performance Settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(I,{label:k("Limit displayed posts","citadela-directory"),checked:s,onChange:e=>t({limitPosts:e})}),s&&(0,l.jsx)(B,{label:k("Maximum displayed posts","citadela-directory"),type:"number",onChange:e=>{t({maxPosts:parseInt(e)})},min:1,value:o})]})]},"inspector"),(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks ctdl-automatic-directory-google-map",e.className,{"custom-height":!(void 0===f||_&&v)},{"cover-height":!(!_||!v)}),ref:this.blockRef,children:[(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(N,{icon:D.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:D.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:D.description})]})]}),(0,l.jsx)("div",{class:"citadela-google-map",style:E,children:(0,l.jsx)("div",{class:"citadela-map-image",style:{backgroundImage:"url("+L+")"}})})]}),r&&(0,l.jsx)(T,{template:[["citadela-directory/directory-search-form",{}]],templateLock:"all"})]})}},save:e=>{const{attributes:{withSearchForm:t}}=e;return(0,l.jsx)(G,{children:t&&(0,l.jsx)(U.Content,{template:[["citadela-directory/directory-search-form",{}]],templateLock:"all"})})}});const{__:J}=wp.i18n,{Component:q}=wp.element,{Toolbar:X,DropdownMenu:Y,SVG:K,G:Q,Path:Z}=wp.components;class ee extends q{render(){const{toggleProps:e,value:t,onChange:a}=this.props,i={shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"optimizeQuality",fillRule:"evenodd"},s={simple:(0,l.jsx)(K,{style:i,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",children:(0,l.jsx)(Q,{id:"Layer_x0020_1",children:(0,l.jsx)(Z,{class:"fil0",d:"M2 11l16 0 0 1 -16 0 0 -1zm0 2l16 0 0 1 -16 0 0 -1zm0 2l13 0 0 1 -13 0 0 -1zm1 -12l9 0c1,0 1,0 1,1l0 4c0,1 0,1 -1,1l-9 0c-1,0 -1,0 -1,-1l0 -4c0,-1 0,-1 1,-1z"})})}),list:(0,l.jsx)(K,{style:i,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",children:(0,l.jsxs)(Q,{id:"Layer_x0020_1",children:[(0,l.jsx)(Z,{class:"fil0",d:"M7 5l8 0 0 1 -8 0 0 -1zm0 -2l11 0 0 1 -11 0 0 -1zm-4 -1l2 0c1,0 1,0 1,1l0 2c0,1 0,1 -1,1l-2 0c-1,0 -1,0 -1,-1l0 -2c0,-1 0,-1 1,-1z"}),(0,l.jsx)(Z,{class:"fil0",d:"M7 11l8 0 0 1 -8 0 0 -1zm0 -2l11 0 0 1 -11 0 0 -1zm-4 -1l2 0c1,0 1,0 1,1l0 2c0,1 0,1 -1,1l-2 0c-1,0 -1,0 -1,-1l0 -2c0,-1 0,-1 1,-1z"}),(0,l.jsx)(Z,{class:"fil0",d:"M7 17l8 0 0 1 -8 0 0 -1zm0 -2l11 0 0 1 -11 0 0 -1zm-4 -1l2 0c1,0 1,0 1,1l0 2c0,1 0,1 -1,1l-2 0c-1,0 -1,0 -1,-1l0 -2c0,-1 0,-1 1,-1z"})]})}),box:(0,l.jsx)(K,{style:i,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",children:(0,l.jsx)(Q,{id:"Layer_x0020_1",children:(0,l.jsx)(Z,{class:"fil0",d:"M3 11l3 0c0,0 0,0 0,1l0 4c0,0 0,1 0,1l-3 0c-1,0 -1,-1 -1,-1l0 -4c0,-1 0,-1 1,-1zm11 0l3 0c1,0 1,0 1,1l0 4c0,0 0,1 -1,1l-3 0c0,0 0,-1 0,-1l0 -4c0,-1 0,-1 0,-1zm-5 0l2 0c1,0 1,0 1,1l0 4c0,0 0,1 -1,1l-2 0c-1,0 -1,-1 -1,-1l0 -4c0,-1 0,-1 1,-1zm-6 -8l3 0c0,0 0,1 0,1l0 4c0,1 0,1 0,1l-3 0c-1,0 -1,0 -1,-1l0 -4c0,0 0,-1 1,-1zm11 0l3 0c1,0 1,1 1,1l0 4c0,1 0,1 -1,1l-3 0c0,0 0,0 0,-1l0 -4c0,0 0,-1 0,-1zm-5 0l2 0c1,0 1,1 1,1l0 4c0,1 0,1 -1,1l-2 0c-1,0 -1,0 -1,-1l0 -4c0,0 0,-1 1,-1z"})})}),text:(0,l.jsx)(K,{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",children:(0,l.jsx)(Z,{d:"M18 3v2H2V3h16zm-6 4v2H2V7h10zm6 0v2h-4V7h4zM8 11v2H2v-2h6zm10 0v2h-8v-2h8zm-4 4v2H2v-2h12z"})})},o={text:{title:J("Text layout","citadela-directory"),icon:s.text,isActive:"text"===t,onClick:()=>a("text")},simple:{title:J("Simple layout","citadela-directory"),icon:s.simple,isActive:"simple"===t,onClick:()=>a("simple")},list:{title:J("List layout","citadela-directory"),icon:s.list,isActive:"list"===t,onClick:()=>a("list")},box:{title:J("Box layout","citadela-directory"),icon:s.box,isActive:"box"===t,onClick:()=>a("box")}};let r=[];for(let e in o)this.props.allowedLayouts.includes(e)&&r.push(o[e]);return(0,l.jsx)(Y,{icon:s[t],label:J("Select layout","citadela-directory"),controls:r,toggleProps:e})}}ee.defaultProps={allowedLayouts:["list","box"]};const{__:te}=wp.i18n,{Component:ae}=wp.element,{Toolbar:le,DropdownMenu:ie,SVG:se,Path:oe}=wp.components;class re extends ae{render(){const{toggleProps:e,value:t,onChange:a}=this.props,i={shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"optimizeQuality",fillRule:"evenodd"},s={small:(0,l.jsx)(se,{style:i,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",children:(0,l.jsx)(oe,{d:"M8 8l4 0 0 4 -4 0 0 -4zm-5 -6l14 0c0,0 1,1 1,1l0 14c0,0 -1,1 -1,1l-14 0c0,0 -1,-1 -1,-1l0 -14c0,0 1,-1 1,-1zm1 2l12 0 0 12 -12 0 0 -12z"})}),medium:(0,l.jsx)(se,{style:i,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",children:(0,l.jsx)(oe,{d:"M6 6l8 0 0 8 -8 0 0 -8zm-3 -4l14 0c0,0 1,1 1,1l0 14c0,0 -1,1 -1,1l-14 0c0,0 -1,-1 -1,-1l0 -14c0,0 1,-1 1,-1zm1 2l12 0 0 12 -12 0 0 -12z"})}),large:(0,l.jsx)(se,{style:i,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",children:(0,l.jsx)(oe,{d:"M4 4l12 0 0 12 -12 0 0 -12zm-1 -2l14 0c0,0 1,1 1,1l0 14c0,0 -1,1 -1,1l-14 0c0,0 -1,-1 -1,-1l0 -14c0,0 1,-1 1,-1zm1 2l12 0 0 12 -12 0 0 -12z"})})};return(0,l.jsx)(ie,{icon:s[t],label:te("Select size","citadela-directory"),controls:[{title:te("Small size","citadela-directory"),icon:s.small,isActive:"small"===t,onClick:()=>a("small")},{title:te("Medium size","citadela-directory"),icon:s.medium,isActive:"medium"===t,onClick:()=>a("medium")},{title:te("Large size","citadela-directory"),icon:s.large,isActive:"large"===t,onClick:()=>a("large")}],toggleProps:e})}}const{groupBy:ce}=lodash,{TreeSelect:ne}=wp.components;function de({label:e,noOptionLabel:t,categoriesList:a,selectedCategoryId:i,onChange:s}){const o=function(e){if(!e)return{};const t=e.map((e=>({children:[],parent:null,...e}))),a=ce(t,"parent");if(a.null&&a.null.length)return t;const l=e=>e.map((e=>{const t=a[e.id];return{...e,children:t&&t.length?l(t):[]}}));return l(a[0]||[])}(a);return(0,l.jsx)(ne,{label:e,noOptionLabel:t,onChange:s,tree:o,selectedId:i})}const{__:pe}=wp.i18n,{Component:ue}=wp.element,{PanelBody:he,ToggleControl:ge,RangeControl:be}=wp.components;class me extends ue{constructor(){super(...arguments),this.onChange=this.onChange.bind(this)}render(){const{attributes:e}=this.props,{useCarousel:t,carouselAutoplay:a,carouselAutoHeight:i,carouselAutoplayDelay:s,carouselNavigation:o,carouselLoop:r,carouselPagination:c}=e;return(0,l.jsxs)(he,{title:pe("Carousel Options","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(ge,{label:pe("Use carousel","citadela-directory"),checked:t,onChange:e=>this.onChange("useCarousel",e)}),t&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ge,{label:pe("Show navigation arrows","citadela-directory"),checked:o,onChange:e=>this.onChange("carouselNavigation",e)}),(0,l.jsx)(ge,{label:pe("Show pagination bullets","citadela-directory"),checked:c,onChange:e=>this.onChange("carouselPagination",e)}),(0,l.jsx)(ge,{label:pe("Infinite loop","citadela-directory"),checked:r,onChange:e=>this.onChange("carouselLoop",e)}),(0,l.jsx)(ge,{label:pe("Automatic height","citadela-directory"),checked:i,onChange:e=>this.onChange("carouselAutoHeight",e)}),(0,l.jsx)(ge,{label:pe("Autoplay","citadela-directory"),checked:a,onChange:e=>this.onChange("carouselAutoplay",e)}),a&&(0,l.jsx)(be,{label:pe("Delay between slides","citadela-directory"),help:pe("Time in seconds","citadela-directory"),value:s,onChange:e=>this.onChange("carouselAutoplayDelay",e),min:1,max:10})]})]})}onChange(e,t){const{useCarousel:a,carouselAutoplay:l,carouselAutoplayDelay:i,carouselNavigation:s,carouselPagination:o,carouselLoop:r,carouselAutoHeight:c}=this.props.attributes;let n=[];n.useCarousel=a,n.carouselNavigation=s,n.carouselPagination=o,n.carouselAutoplay=l,n.carouselAutoHeight=c,n.carouselAutoplayDelay=i,n.carouselLoop=r,n[e]=t,this.props.onChange(n)}}const{__:ye}=wp.i18n,{Component:xe}=wp.element,{Tooltip:ve,Icon:je}=wp.components;class fe extends xe{render(){const{useResponsiveOptions:e,isSelected:t,currentView:a,carouselAutoplay:i,carouselLoop:s}=this.props,o=e&&"mobile"==a,r=e&&"desktop"==a;return(0,l.jsxs)("div",{class:"citadela-status-icons",children:[s&&(0,l.jsx)(ve,{text:ye("Carousel loop mode enabled","citadela-directory"),children:(0,l.jsx)("div",{className:"status-icon carousel-state loop",children:(0,l.jsx)(je,{icon:"controls-repeat"})})}),i&&(0,l.jsx)(ve,{text:ye("Carousel autoplay enabled","citadela-directory"),children:(0,l.jsx)("div",{className:"status-icon carousel-state autoplay",children:(0,l.jsx)(je,{icon:"controls-play"})})}),e&&t&&(0,l.jsxs)(l.Fragment,{children:[o&&(0,l.jsx)(ve,{text:ye("Current block view","citadela-directory")+": "+ye("Mobile","citadela-directory"),children:(0,l.jsx)("div",{className:"status-icon current-view-indicator",children:(0,l.jsx)("div",{class:"icon",children:(0,l.jsx)(je,{icon:"smartphone"})})})}),r&&(0,l.jsx)(ve,{text:ye("Current block view","citadela-directory")+": "+ye("Desktop","citadela-directory"),children:(0,l.jsx)("div",{className:"status-icon current-view-indicator",children:(0,l.jsx)("div",{class:"icon",children:(0,l.jsx)(je,{icon:"desktop"})})})})]})]})}}const{apiFetch:ke}=wp,{Component:Ce,Fragment:we}=wp.element,{__:Te}=wp.i18n,{BlockControls:Se,InspectorControls:_e,RichText:Ie}=wp.blockEditor,{ToolbarGroup:Ne,ToolbarItem:Ae,PanelBody:Oe,Icon:He,Tooltip:Be,ToggleControl:Fe}=wp.components,Pe=JSON.parse('{"apiVersion":1,"name":"citadela-directory/directory-categories-list","category":"citadela-directory-blocks","icon":"category","attributes":{"category":{"type":"string","default":"0"},"title":{"type":"string","default":""},"layout":{"type":"string","default":"box"},"size":{"type":"string","default":"large"},"showCategoryIcon":{"type":"boolean","default":true},"showCategoryDescription":{"type":"boolean","default":true},"onlyFeatured":{"type":"boolean","default":false},"useCarousel":{"type":"boolean","default":false},"carouselNavigation":{"type":"boolean","default":true},"carouselPagination":{"type":"boolean","default":true},"carouselAutoplay":{"type":"boolean","default":false},"carouselAutoHeight":{"type":"boolean","default":false},"carouselAutoplayDelay":{"type":"number","default":5},"carouselLoop":{"type":"boolean","default":true}},"example":{"attributes":{"size":"small"}},"editorScript":"citadela-directory-blocks"}'),{__:De,setLocaleData:Le}=wp.i18n,{registerBlockType:Me}=wp.blocks,{name:Re}=Pe;Me(Re,{...Pe,title:De("Listing Categories List","citadela-directory"),description:De("Displays listing categories based on specific filter. It can display parent categories or subcategories from specific category.","citadela-directory"),edit:class extends Ce{constructor(){super(...arguments),this.state={categoriesList:[]}}componentDidMount(){this.fetchRequest=ke({path:"/wp/v2/citadela-item-category/?per_page=-1"}).then((e=>{this.setState({categoriesList:e})})).catch((()=>{this.setState({categoriesList:[]})}))}render(){const{categoriesList:e}=this.state,{attributes:t,setAttributes:a,name:i}=this.props,{category:s,layout:o,size:r,showCategoryDescription:c,showCategoryIcon:n,onlyFeatured:d,useCarousel:p,carouselNavigation:u,carouselPagination:h,carouselAutoplay:g,carouselAutoHeight:b,carouselLoop:m}=t,y=wp.blocks.getBlockType(i);return(0,l.jsxs)(we,{children:[(0,l.jsx)(Se,{children:(0,l.jsxs)(Ne,{children:[(0,l.jsx)(Ae,{children:e=>(0,l.jsx)(ee,{value:o,onChange:e=>a({layout:e}),toggleProps:e})}),(0,l.jsx)(Ae,{children:e=>(0,l.jsx)(re,{value:r,onChange:e=>a({size:e}),toggleProps:e})})]})},"controls"),(0,l.jsxs)(_e,{children:[(0,l.jsxs)(Oe,{title:Te("Filters","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:[(0,l.jsx)(de,{categoriesList:e,label:Te("Category","citadela-directory"),noOptionLabel:Te("Only parent categories","citadela-directory"),selectedCategoryId:s,onChange:e=>{a({category:e})}}),(0,l.jsx)(Fe,{label:Te("Only featured","citadela-directory"),help:Te("Show only categories marked as featured.","citadela-directory"),checked:d,onChange:e=>a({onlyFeatured:e})})]}),(0,l.jsxs)(Oe,{title:Te("Category Details","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(Fe,{label:Te("Show Category icon","citadela-directory"),checked:n,onChange:e=>a({showCategoryIcon:e})}),(0,l.jsx)(Fe,{label:Te("Show Category description","citadela-directory"),checked:c,onChange:e=>a({showCategoryDescription:e})})]}),(0,l.jsx)(me,{attributes:t,onChange:e=>a({useCarousel:e.useCarousel,carouselNavigation:e.carouselNavigation,carouselPagination:e.carouselPagination,carouselAutoplay:e.carouselAutoplay,carouselAutoHeight:e.carouselAutoHeight,carouselAutoplayDelay:e.carouselAutoplayDelay,carouselLoop:e.carouselLoop})})]},"inspector"),(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks","ctdl-directory-categories-list",t.className,"grid-type-2","items-auto","layout-"+o,"size-"+r,{"hide-description":!c},{"hide-icon":!n},{"use-carousel":!!p},{"carousel-navigation":!(!p||!u)},{"carousel-pagination":!(!p||!h)}),children:[(0,l.jsx)(fe,{carouselAutoplay:p&&g,carouselLoop:p&&m}),(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(He,{icon:y.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:y.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:y.description})]})]}),(0,l.jsx)("div",{class:"citadela-block-header",children:(0,l.jsx)(Ie,{tagName:"h3",value:t.title,onChange:e=>a({title:e}),placeholder:y.title,keepPlaceholderOnFocus:!0,allowedFormats:[]})}),(0,l.jsx)("div",{class:"citadela-block-articles",children:(0,l.jsx)("div",{class:"citadela-block-articles-wrap",children:Array.from(Array(12),((e,t)=>(0,l.jsxs)("article",{class:"folder-card",children:[(0,l.jsx)("div",{class:"folder-header",children:(0,l.jsx)("div",{class:"folder-icon"})}),(0,l.jsx)("div",{class:"folder-content",children:(0,l.jsxs)("div",{class:"folder-content-wrap",children:[(0,l.jsx)("div",{class:"folder-title"}),(0,l.jsxs)("div",{class:"folder-description",children:[(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"})]})]})})]})))})}),p&&u&&(0,l.jsxs)("div",{class:"carousel-navigation-wrapper",children:[(0,l.jsx)("div",{class:"carousel-button-prev",children:(0,l.jsx)("i",{class:"fas fa-chevron-left"})}),(0,l.jsx)("div",{class:"carousel-button-next",children:(0,l.jsx)("i",{class:"fas fa-chevron-right"})})]}),p&&h&&(0,l.jsxs)("div",{class:"carousel-pagination-wrapper",children:[(0,l.jsx)("span",{class:"carousel-bullet"}),(0,l.jsx)("span",{class:"carousel-bullet"}),(0,l.jsx)("span",{class:"carousel-bullet"})]})]})]})}},save:()=>null});const{Component:$e,createRef:ze,useState:Ee}=wp.element,{__:Ve,sprintf:Ue}=wp.i18n,{InspectorControls:Ge,InnerBlocks:We}=wp.blockEditor,{PanelBody:Je,ToggleControl:qe,Icon:Xe,RadioControl:Ye,TextareaControl:Ke,SelectControl:Qe,TextControl:Ze,BaseControl:et,RangeControl:tt}=wp.components,{apiFetch:at}=wp,{getBlockName:lt,getBlockParents:it}=wp.data.select("core/block-editor");let st=a.map((e=>({label:e.name,value:e.codeName})));st.push({label:Ve("Custom","citadela-directory"),value:"custom"});const ot=({attributes:e,setAttributes:t})=>{const{unit:a,height:i}=e,[s,o]=Ee(i);let r={px:{min:300,max:800},vh:{min:30,max:100},vw:{min:30,max:100}},c=1;return"px"!=a&&(c=.1),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(et,{label:Ve("Height unit","citadela-directory"),children:(0,l.jsx)(Qe,{value:a,options:[{label:"px",value:"px"},{label:"vh",value:"vh"},{label:"vw",value:"vw"}],onChange:e=>{o(r[e].min),t({unit:e,height:r[e].min})}})}),(0,l.jsx)(et,{label:Ve("Recommended map height","citadela-directory")+`: ${i}${a}`,help:Ve("Minimum map height may differ of defined value due to needs of map's inside content.","citadela-directory"),id:"spacer-height",children:(0,l.jsx)(tt,{value:s,onChange:e=>{let l=e;o(l),""==e&&(o(""),l=r[a].min),t("px"!=a?{height:l?parseFloat(l):l}:{height:l?parseInt(l):l})},min:r[a].min,max:r[a].max,step:c})})]})},rt=({attributes:e,setAttributes:t})=>{const{outsideFormBreakpoint:a}=e,[i,s]=Ee(a);return(0,l.jsx)(et,{label:Ve("Form inside map breakpoint","citadela-directory"),help:Ve("Search form is displayed inside map on screen width larger than","citadela-directory")+` ${a}px.`,id:"mobile-width",children:(0,l.jsx)(Ze,{type:"number",value:i,onChange:e=>{let a=e;s(a),""==e&&(a=600),t({outsideFormBreakpoint:a?parseInt(a):a})},step:1})})},ct=JSON.parse('{"apiVersion":1,"name":"citadela-directory/directory-google-map","category":"citadela-directory-blocks","icon":"location-alt","attributes":{"limitPosts":{"type":"boolean","default":false},"maxPosts":{"type":"number","default":50},"postType":{"type":"string","default":"citadela-item"},"withSearchForm":{"type":"boolean","default":false},"category":{"type":"string","default":""},"location":{"type":"string","default":""},"onlyFeatured":{"type":"boolean","default":false},"theme":{"type":"string","default":"citadela"},"themeOSM":{"type":"string","default":"default"},"customTheme":{"type":"string","default":""},"provider":{"type":"string","default":"openstreetmap"},"dataType":{"type":"string","default":"markers"},"dynamicTrack":{"type":"boolean","default":false},"trackColor":{"type":"string","default":""},"trackEndpointsColor":{"type":"string","default":""},"inColumn":{"type":"boolean","default":false},"coverHeight":{"type":"boolean","default":false},"unit":{"type":"string","default":"px"},"height":{"type":"number","default":500},"outsideFormBreakpoint":{"type":"number","default":600},"clusterGridSize":{"type":"number","default":80}},"example":{"attributes":{"height":300}},"editorScript":"citadela-directory-blocks"}'),{__:nt,setLocaleData:dt}=wp.i18n,{registerBlockType:pt}=wp.blocks,{Fragment:ut}=wp.element,{InnerBlocks:ht}=wp.blockEditor,{name:gt}=ct;pt(gt,{...ct,title:nt("Listing Map","citadela-directory"),description:nt("Displays listing items on map based on filters. For example items only from specific category, location or featured items.","citadela-directory"),edit:class extends $e{constructor(){super(...arguments),this.isParentColumn=this.isParentColumn.bind(this),this.updateMainBlockDivWrapper=this.updateMainBlockDivWrapper.bind(this),this.blockRef=ze(),this.state={categoriesList:[],locationsList:[]}}componentDidMount(){const{attributes:e,setAttributes:t}=this.props,a=this.isParentColumn();e.inColumn!==a&&t({inColumn:a}),this.updateMainBlockDivWrapper(),this.fetchRequest=at({path:"/wp/v2/citadela-item-category/?per_page=-1"}).then((e=>{this.setState({categoriesList:e})})).catch((()=>{this.setState({categoriesList:[]})})),this.fetchRequest=at({path:"/wp/v2/citadela-item-location/?per_page=-1"}).then((e=>{this.setState({locationsList:e})})).catch((()=>{this.setState({locationsList:[]})}))}componentDidUpdate(){this.updateMainBlockDivWrapper()}isParentColumn(){const e=it(this.props.clientId);return e.length>0&&"core/column"===lt(e[e.length-1])}updateMainBlockDivWrapper(){const{withSearchForm:e,coverHeight:t,inColumn:a}=this.props.attributes;let l=this.blockRef.current.parentNode;a&&t?l.dataset.coverHeight="true":delete l.dataset.coverHeight,e?l.dataset.withSearchForm="true":delete l.dataset.withSearchForm}render(){const{categoriesList:e,locationsList:t}=this.state,{attributes:a,setAttributes:i,name:s,isSelected:o}=this.props,{limitPosts:r,maxPosts:c,withSearchForm:n,category:d,location:u,onlyFeatured:h,theme:g,themeOSM:b,customTheme:m,provider:y,dataType:v,dynamicTrack:j,trackColor:f,trackEndpointsColor:k,clusterGridSize:C,coverHeight:w,unit:T,height:S,inColumn:_}=a,I=wp.blocks.getBlockType(s),N=`${CitadelaDirectorySettings.images}/blocks/map.png`,A={...void 0===S||_&&w?{}:{height:S+T}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(Ge,{children:[(0,l.jsxs)(Je,{title:Ve("Options","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:[(0,l.jsx)(Qe,{label:Ve("Maps provider","citadela-directory"),value:y,options:[{label:"Google Maps",value:"google-map"},{label:"OpenStreetMap",value:"openstreetmap"}],onChange:e=>{i({provider:e})}}),(0,l.jsx)(qe,{label:Ve("With search form","citadela-directory"),checked:n,onChange:e=>i({withSearchForm:e})}),n&&(0,l.jsx)(rt,{attributes:a,setAttributes:i}),"openstreetmap"==y&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Ye,{label:Ve("Show on map","citadela-directory"),selected:v,options:[{label:Ve("Markers","citadela-directory"),value:"markers"},{label:Ve("GPX Tracks","citadela-directory"),value:"tracks"},{label:Ve("Markers & GPX Tracks","citadela-directory"),value:"all"}],onChange:e=>{i({dataType:e})}}),"markers"!=v&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(qe,{label:Ve("Dynamic track visibility","citadela-directory"),help:Ve("Tracks are hidden and replaced with map marker according to zoom level.","citadela-directory"),checked:j,onChange:e=>i({dynamicTrack:e})}),(0,l.jsx)(p,{label:Ve("Track color","citadela-directory"),color:f,onChange:e=>{i({trackColor:e})},allowReset:!0}),(0,l.jsx)(p,{label:Ve("Track endpoints color","citadela-directory"),color:k,onChange:e=>{i({trackEndpointsColor:e})},allowReset:!0,disableAlpha:!0})]})]})]}),(0,l.jsxs)(Je,{title:Ve("Filters","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:[(0,l.jsx)(de,{categoriesList:e,label:Ve("Category","citadela-directory"),noOptionLabel:Ve("All","citadela-directory"),selectedCategoryId:d,onChange:e=>{i({category:e})}}),(0,l.jsx)(de,{categoriesList:t,label:Ve("Location","citadela-directory"),noOptionLabel:Ve("All","citadela-directory"),selectedCategoryId:u,onChange:e=>{i({location:e})}}),(0,l.jsx)(qe,{label:Ve("Only featured items","citadela-directory"),checked:h,onChange:e=>i({onlyFeatured:e})})]}),(0,l.jsxs)(Je,{title:Ve("Custom Height Settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[_&&(0,l.jsx)(qe,{label:Ve("Cover column height","citadela-directory"),help:Ve("Works when block is the only block in a column.","citadela-directory"),checked:w,onChange:e=>{i({coverHeight:e})}}),(!_||_&&!w)&&(0,l.jsx)(ot,{attributes:a,setAttributes:i})]}),(0,l.jsx)(Je,{title:Ve("Marker Cluster Settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:(0,l.jsx)(x,{label:Ve("Cluster radius in px","citadela-directory"),help:0==C?Ve("Clusters are disabled.","citadela-directory"):Ue(Ve("Markers in distance less than %spx radius are grouped into clusters. Set 0 to disable clusters.","citadela-directory"),C),rangeValue:C,onChange:e=>{i({clusterGridSize:e})},min:0,max:200,initial:80,allowReset:!0})}),"google-map"==y&&(0,l.jsxs)(Je,{title:Ve("Appearance","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(Ye,{label:Ve("Theme","citadela-directory"),selected:g,options:st,onChange:e=>{i({theme:e})}}),"custom"==g&&(0,l.jsx)(Ke,{label:Ve("Style JSON","citadela-directory"),help:(0,l.jsxs)(l.Fragment,{children:[Ve("Copy and paste the JSON from this website:","citadela-directory")," ",(0,l.jsx)("a",{target:"_blank",href:"https://mapstyle.withgoogle.com/",children:"https://mapstyle.withgoogle.com/"})]}),value:m,onChange:e=>{i({customTheme:e})}})]}),"openstreetmap"==y&&(0,l.jsx)(Je,{title:Ve("Appearance","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:(0,l.jsx)(Ye,{label:Ve("Theme","citadela-directory"),selected:b,options:[{label:Ve("Default","citadela-directory"),value:"default"},{label:Ve("Silver","citadela-directory"),value:"silver"},{label:Ve("Retro","citadela-directory"),value:"retro"},{label:Ve("Dark","citadela-directory"),value:"dark"},{label:Ve("Night","citadela-directory"),value:"night"}],onChange:e=>{i({themeOSM:e})}})}),(0,l.jsxs)(Je,{title:Ve("Performance Settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(qe,{label:Ve("Limit displayed posts","citadela-directory"),checked:r,onChange:e=>i({limitPosts:e})}),r&&(0,l.jsx)(Ze,{label:Ve("Maximum displayed posts","citadela-directory"),type:"number",onChange:e=>{i({maxPosts:parseInt(e)})},min:1,value:c})]})]},"inspector"),(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks ctdl-directory-google-map",a.className,{"custom-height":!(void 0===S||_&&w)},{"cover-height":!(!_||!w)}),ref:this.blockRef,children:[(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(Xe,{icon:I.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:I.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:I.description})]})]}),(0,l.jsx)("div",{class:"citadela-google-map",style:A,children:(0,l.jsx)("div",{class:"citadela-map-image",style:{backgroundImage:"url("+N+")"}})})]}),n&&(0,l.jsx)(We,{template:[["citadela-directory/directory-search-form",{}]],templateLock:"all"})]})}},save:e=>{const{attributes:{withSearchForm:t}}=e;return(0,l.jsx)(ut,{children:t&&(0,l.jsx)(ht.Content,{template:[["citadela-directory/directory-search-form",{}]],templateLock:"all"})})}});const{__:bt}=wp.i18n,{Component:mt}=wp.element,{SelectControl:yt}=wp.components;class xt extends mt{render(){const{value:e,onChange:t,label:a=bt("Image size","citadela-directory"),help:i="",customSizes:s={}}=this.props,{getSettings:o}=wp.data.select("core/block-editor"),{imageSizes:r}=o(),c=[];if(s)for(let e in s)c.push({label:s[e],value:e});for(let e in r)c.push({label:r[e].name,value:r[e].slug});return(0,l.jsx)(yt,{label:a,help:i,value:e,options:c,onChange:e=>t(e)})}}const{__:vt}=wp.i18n,{Fragment:jt,Component:ft}=wp.element,{Button:kt}=wp.components;class Ct extends ft{render(){const{activeTab:e,onChange:t}=this.props;let a=vt("desktop"==e?"General options for desktop.":"Customized options for mobile screen width.","citadela-directory");return(0,l.jsx)(jt,{children:(0,l.jsxs)("div",{class:"citadela-responsive-options-tabs",children:[(0,l.jsxs)("div",{class:"responsive-tabs",children:[(0,l.jsx)("div",{className:classNames("desktop-tab",{active:"desktop"===e}),children:(0,l.jsx)(kt,{className:classNames("components-toolbar__control",{"is-active":"desktop"===e}),icon:"desktop",label:vt("Desktop size","citadela-directory"),onClick:()=>{t("desktop")}})}),(0,l.jsx)("div",{className:classNames("mobile-tab",{active:"mobile"===e}),children:(0,l.jsx)(kt,{className:classNames("components-toolbar__control",{"is-active":"mobile"===e}),icon:"smartphone",label:vt("Mobile size","citadela-directory"),onClick:()=>{t("mobile")}})})]}),(0,l.jsx)("p",{class:"tab-label",children:a})]})})}}const{apiFetch:wt}=wp,{Component:Tt,useState:St}=wp.element,{__:_t}=wp.i18n,{BlockControls:It,InspectorControls:Nt,RichText:At}=wp.blockEditor,{ToolbarGroup:Ot,ToolbarItem:Ht,PanelBody:Bt,RangeControl:Ft,ToggleControl:Pt,Icon:Dt,Tooltip:Lt,SelectControl:Mt,RadioControl:Rt,ColorPalette:$t,ColorIndicator:zt,BaseControl:Et,TextControl:Vt}=wp.components,Ut=({attributes:e,setAttributes:t})=>{const{imageHeightUnit:a,imageHeight:i}=e,[s,o]=St(i);let r=[];r.px=250,r.vh=100,r.vw=30;let c=1;return"px"!=a&&(c=.1),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Et,{label:_t("Image height unit","citadela-directory"),children:(0,l.jsx)(Mt,{value:a,options:[{label:"px",value:"px"},{label:"vh",value:"vh"},{label:"vw",value:"vw"}],onChange:e=>{o(r[e]),t({imageHeightUnit:e,imageHeight:r[e]})}})}),(0,l.jsx)(Et,{label:_t("Image height","citadela-directory")+(void 0!==i?`: ${i}${a}`:": "+_t("default image size","citadela-directory")),children:(0,l.jsx)(Vt,{type:"number",value:s,step:c,onChange:e=>{let l=e;o(l),""==e&&(o(""),l=r[a]),t("px"!=a?{imageHeight:l?parseFloat(l):l}:{imageHeight:l?parseInt(l):l})}})})]})},Gt=({attributes:e,setAttributes:t})=>{const{imageHeightUnitMobile:a,imageHeightMobile:i}=e,[s,o]=St(i);let r=[];r.px=250,r.vh=100,r.vw=30;let c=1;return"px"!=a&&(c=.1),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Et,{label:_t("Image height unit","citadela-directory"),children:(0,l.jsx)(Mt,{value:a,options:[{label:"px",value:"px"},{label:"vh",value:"vh"},{label:"vw",value:"vw"}],onChange:e=>{o(r[e]),t({imageHeightUnitMobile:e,imageHeightMobile:r[e]})}})}),(0,l.jsx)(Et,{label:_t("Image height","citadela-directory")+(void 0!==i?`: ${i}${a}`:": "+_t("default image size","citadela-directory")),children:(0,l.jsx)(Vt,{type:"number",value:s,step:c,onChange:e=>{let l=e;o(l),""==e&&(o(""),l=r[a]),t("px"!=a?{imageHeightMobile:l?parseFloat(l):l}:{imageHeightMobile:l?parseInt(l):l})}})})]})},Wt=({attributes:e,setAttributes:t})=>{const{breakpointMobileImageHeight:a}=e,[i,s]=St(a);return(0,l.jsx)(Et,{label:_t("Mobile width breakpoint","citadela-directory"),help:_t("Responsive options applied under screen width","citadela-directory")+` ${a}px`,id:"mobile-width",children:(0,l.jsx)(Vt,{type:"number",value:i,onChange:e=>{let a=e;s(a),""==e&&(a=600),t({breakpointMobileImageHeight:a?parseInt(a):a})},step:1})})},Jt=JSON.parse('{"apiVersion":1,"name":"citadela-directory/directory-items-list","category":"citadela-directory-blocks","icon":"list-view","attributes":{"category":{"type":"string","default":""},"location":{"type":"string","default":""},"onlyFeaturedCategory":{"type":"boolean","default":false},"onlyFeatured":{"type":"boolean","default":false},"featuredFirst":{"type":"boolean","default":false},"pagination":{"type":"boolean","default":true},"numberOfItems":{"type":"number","default":12},"title":{"type":"string","default":""},"layout":{"type":"string","default":"box"},"size":{"type":"string","default":"medium"},"showItemFeaturedImage":{"type":"boolean","default":true},"showItemSubtitle":{"type":"boolean","default":true},"showItemDescription":{"type":"boolean","default":true},"showItemAddress":{"type":"boolean","default":true},"showItemWeb":{"type":"boolean","default":true},"showItemCategories":{"type":"boolean","default":true},"showItemLocations":{"type":"boolean","default":false},"itemsOrderBy":{"type":"string","default":"date"},"itemsOrder":{"type":"string","default":"DESC"},"useCarousel":{"type":"boolean","default":false},"carouselNavigation":{"type":"boolean","default":true},"carouselPagination":{"type":"boolean","default":true},"carouselAutoplay":{"type":"boolean","default":false},"carouselAutoHeight":{"type":"boolean","default":false},"carouselAutoplayDelay":{"type":"number","default":5},"carouselLoop":{"type":"boolean","default":true},"borderWidth":{"type":"string","default":"thin"},"borderColor":{"type":"string","default":""},"backgroundColor":{"type":"string","default":""},"textColor":{"type":"string","default":""},"decorColor":{"type":"string","default":""},"carouselColor":{"type":"string","default":""},"showRating":{"type":"boolean","default":true},"ratingColor":{"type":"string","default":""},"imageSize":{"type":"string","default":"citadela_item_thumbnail"},"useResponsiveOptionsImageHeight":{"type":"boolean","default":false},"breakpointMobileImageHeight":{"type":"number","default":600},"proportionalImageHeight":{"type":"boolean","default":false},"proportionalImageHeightMobile":{"type":"boolean","default":false},"imageHeightType":{"type":"string","default":"default"},"imageHeightTypeMobile":{"type":"string","default":"default"},"imageHeightUnit":{"type":"string","default":"px"},"imageHeightUnitMobile":{"type":"string","default":"px"},"imageHeight":{"type":"number","default":250},"imageHeightMobile":{"type":"number","default":250},"imageObjectPosition":{"type":"string","default":"center center"},"imageObjectPositionMobile":{"type":"string","default":"center center"}},"example":{"attributes":{"numberOfItems":4}},"editorScript":"citadela-directory-blocks"}'),{__:qt,setLocaleData:Xt}=wp.i18n,{registerBlockType:Yt}=wp.blocks,{name:Kt}=Jt;Yt(Kt,{...Jt,title:qt("Listing Items List","citadela-directory"),description:qt("Displays listing items based on filters. For example items only from specific category, location or featured items.","citadela-directory"),edit:class extends Tt{constructor(){super(...arguments),this.state={categoriesList:[],locationsList:[],responsiveTabHeight:"desktop"}}componentDidMount(){this.fetchRequest=wt({path:"/wp/v2/citadela-item-category/?per_page=-1"}).then((e=>{this.setState({categoriesList:e})})).catch((()=>{this.setState({categoriesList:[]})})),this.fetchRequest=wt({path:"/wp/v2/citadela-item-location/?per_page=-1"}).then((e=>{this.setState({locationsList:e})})).catch((()=>{this.setState({locationsList:[]})}))}render(){const e="undefined"!=typeof CitadelaProSettings,{categoriesList:t,locationsList:a}=this.state,{attributes:i,setAttributes:s,name:o,isSelected:r}=this.props,{category:c,location:n,onlyFeaturedCategory:d,onlyFeatured:u,pagination:h,featuredFirst:g,numberOfItems:b,layout:m,size:y,showItemFeaturedImage:x,showItemSubtitle:v,showItemDescription:j,showItemAddress:f,showItemWeb:k,showItemCategories:C,showItemLocations:w,itemsOrderBy:T,itemsOrder:S,useCarousel:_,carouselNavigation:I,carouselPagination:N,carouselAutoplay:A,carouselAutoHeight:O,carouselLoop:H,borderWidth:B,borderColor:F,backgroundColor:P,textColor:D,decorColor:L,carouselColor:M,showRating:R,ratingColor:$,imageSize:z,useResponsiveOptionsImageHeight:E,breakpointMobileImageHeight:V,proportionalImageHeight:U,proportionalImageHeightMobile:G,imageHeightType:W,imageHeightTypeMobile:J,imageObjectPosition:q,imageObjectPositionMobile:X,imageHeight:Y,imageHeightMobile:K,imageHeightUnit:Q,imageHeightUnitMobile:Z}=i,te=[{color:"#00d1b2"},{color:"#3373dc"},{color:"#209cef"},{color:"#22d25f"},{color:"#ffdd57"},{color:"#ff3860"},{color:"#7941b6"},{color:"#392F43"}],ae=CitadelaDirectorySettings.features.item_reviews,le=!(!ae||!R),ie=wp.blocks.getBlockType(o);let se="";(!E||E&&"desktop"==this.state.responsiveTabHeight)&&(se=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Pt,{label:_t("Proportional image height","citadela-directory"),checked:U,onChange:e=>{s({proportionalImageHeight:e})}}),!U&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Mt,{label:_t("Image height","citadela-directory"),value:W,options:[{label:_t("Default","citadela-directory"),value:"default"},{label:_t("Custom","citadela-directory"),value:"custom"}],onChange:e=>{s({imageHeightType:e})}}),"custom"==W&&(0,l.jsx)(Ut,{attributes:i,setAttributes:s}),(0,l.jsx)(Mt,{value:q,label:_t("Image focus","citadela-directory"),options:[{label:_t("Top left","citadela-directory"),value:"top left"},{label:_t("Top","citadela-directory"),value:"top center"},{label:_t("Top right","citadela-directory"),value:"top right"},{label:_t("Left","citadela-directory"),value:"center left"},{label:_t("Center","citadela-directory"),value:"center center"},{label:_t("Right","citadela-directory"),value:"center right"},{label:_t("Bottom left","citadela-directory"),value:"bottom left"},{label:_t("Bottom","citadela-directory"),value:"bottom center"},{label:_t("Bottom right","citadela-directory"),value:"bottom right"}],onChange:e=>s({imageObjectPosition:e})})]})]})),E&&"mobile"==this.state.responsiveTabHeight&&(se=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Wt,{attributes:i,setAttributes:s}),(0,l.jsx)(Pt,{label:_t("Proportional image height","citadela-directory"),checked:G,onChange:e=>{s({proportionalImageHeightMobile:e})}}),!G&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Mt,{label:_t("Image height","citadela-directory"),value:J,options:[{label:_t("Default","citadela-directory"),value:"default"},{label:_t("Custom","citadela-directory"),value:"custom"}],onChange:e=>{s({imageHeightTypeMobile:e})}}),"custom"==J&&(0,l.jsx)(Gt,{attributes:i,setAttributes:s}),(0,l.jsx)(Mt,{value:X,label:_t("Image focus","citadela-directory"),options:[{label:_t("Top left","citadela-directory"),value:"top left"},{label:_t("Top","citadela-directory"),value:"top center"},{label:_t("Top right","citadela-directory"),value:"top right"},{label:_t("Left","citadela-directory"),value:"center left"},{label:_t("Center","citadela-directory"),value:"center center"},{label:_t("Right","citadela-directory"),value:"center right"},{label:_t("Bottom left","citadela-directory"),value:"bottom left"},{label:_t("Bottom","citadela-directory"),value:"bottom center"},{label:_t("Bottom right","citadela-directory"),value:"bottom right"}],onChange:e=>s({imageObjectPositionMobile:e})})]})]}));var oe="grid-type-1";"list"==m&&(oe="grid-type-3");const ce=E&&"mobile"==this.state.responsiveTabHeight?{imageHeight:K,imageHeightUnit:Z,proportionalImageHeight:G,imageHeightType:J,imageObjectPosition:X}:{imageHeight:Y,imageHeightUnit:Q,proportionalImageHeight:U,imageHeightType:W,imageObjectPosition:q};let ne={},pe={},ue={},he={},ge={},be={};return ue={...ue,...ce.proportionalImageHeight||"custom"!=ce.imageHeightType||void 0===ce.imageHeight?{}:{height:ce.imageHeight+ce.imageHeightUnit}},e&&(ne={...F?{borderColor:F}:{}},pe={...F?{borderColor:F}:{},...P?{backgroundColor:P}:{},...D?{textColor:D}:{}},ue={...ue,...L?{color:L}:{}},he={...D?{color:D}:{}},ge={...M?{color:M}:{}},be={...$?{color:$}:{}}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(It,{children:(0,l.jsxs)(Ot,{children:[(0,l.jsx)(Ht,{children:e=>(0,l.jsx)(ee,{value:m,onChange:e=>s({layout:e}),toggleProps:e})}),(0,l.jsx)(Ht,{children:e=>(0,l.jsx)(re,{value:y,onChange:e=>s({size:e}),toggleProps:e})})]})},"controls"),(0,l.jsxs)(Nt,{children:[(0,l.jsxs)(Bt,{title:_t("Filters","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:[(0,l.jsx)(de,{categoriesList:t,label:_t("Category","citadela-directory"),noOptionLabel:_t("All","citadela-directory"),selectedCategoryId:c,onChange:e=>{s({category:e})}}),(0,l.jsx)(de,{categoriesList:a,label:_t("Location","citadela-directory"),noOptionLabel:_t("All","citadela-directory"),selectedCategoryId:n,onChange:e=>{s({location:e})}}),(0,l.jsx)(Pt,{label:_t("Only featured items","citadela-directory"),checked:u,onChange:e=>s({onlyFeatured:e})}),(0,l.jsx)(Pt,{label:_t("Pagination","citadela-directory"),checked:h,onChange:e=>s({pagination:e})}),(0,l.jsx)(Ft,{label:_t("Number of items","citadela-directory"),value:b,onChange:e=>{s({numberOfItems:e})},min:1,max:200})]}),(0,l.jsxs)(Bt,{title:_t("Item Details","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(Pt,{label:_t("Show featured image","citadela-directory"),checked:x,onChange:e=>this.props.setAttributes({showItemFeaturedImage:e})}),(0,l.jsx)(Pt,{label:_t("Show subtitle","citadela-directory"),checked:v,onChange:e=>this.props.setAttributes({showItemSubtitle:e})}),(0,l.jsx)(Pt,{label:_t("Show description","citadela-directory"),checked:j,onChange:e=>this.props.setAttributes({showItemDescription:e})}),(0,l.jsx)(Pt,{label:_t("Show address","citadela-directory"),checked:f,onChange:e=>this.props.setAttributes({showItemAddress:e})}),(0,l.jsx)(Pt,{label:_t("Show web","citadela-directory"),checked:k,onChange:e=>this.props.setAttributes({showItemWeb:e})}),(0,l.jsx)(Pt,{label:_t("Show categories","citadela-directory"),checked:C,onChange:e=>this.props.setAttributes({showItemCategories:e})}),C&&(0,l.jsx)(Pt,{label:_t("Show only featured category","citadela-directory"),checked:d,onChange:e=>s({onlyFeaturedCategory:e})}),(0,l.jsx)(Pt,{label:_t("Show locations","citadela-directory"),checked:w,onChange:e=>this.props.setAttributes({showItemLocations:e})}),ae&&(0,l.jsx)(Pt,{label:_t("Show rating","citadela-directory"),checked:R,onChange:e=>s({showRating:e})})]}),(0,l.jsxs)(Bt,{title:_t("Order Options","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(Mt,{label:_t("Order by","citadela-directory"),value:T,options:[{label:_t("Date","citadela-directory"),value:"date"},{label:_t("Title","citadela-directory"),value:"title"},{label:_t("Order number","citadela-directory"),value:"menu_order"},{label:_t("Random","citadela-directory"),value:"rand"}],onChange:e=>{s({itemsOrderBy:e})}}),"rand"!=T&&(0,l.jsx)(Rt,{selected:S,options:[{label:_t("Descending","citadela-directory"),value:"DESC"},{label:_t("Ascending","citadela-directory"),value:"ASC"}],onChange:e=>{s({itemsOrder:e})}}),(0,l.jsx)(Pt,{label:_t("Featured items first","citadela-directory"),help:_t("Show featured items on the top of list before all other item posts.","citadela-directory"),checked:g,onChange:e=>s({featuredFirst:e})})]}),e&&(0,l.jsxs)(Bt,{title:_t("Design Options","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsxs)(Et,{label:_t("Decoration color","citadela-directory"),className:"block-editor-panel-color-settings",children:[L&&(0,l.jsx)(zt,{colorValue:L}),(0,l.jsx)($t,{value:L,onChange:e=>{s({decorColor:e})},colors:te})]}),(0,l.jsxs)(Et,{label:_t("Text color","citadela-directory"),className:"block-editor-panel-color-settings",children:[D&&(0,l.jsx)(zt,{colorValue:D}),(0,l.jsx)($t,{value:D,onChange:e=>{s({textColor:e})},colors:te})]}),(0,l.jsx)(p,{label:_t("Background color","citadela-directory"),color:P,onChange:e=>{s({backgroundColor:e})}}),(0,l.jsx)(p,{label:_t("Borders color","citadela-directory"),color:F,onChange:e=>{s({borderColor:e})}}),ae&&(0,l.jsx)(p,{label:_t("Rating stars color","citadela-directory"),color:$,onChange:e=>{s({ratingColor:e})},disableAlpha:!0}),(0,l.jsx)(Mt,{label:_t("Borders width","citadela-directory"),value:B,options:[{label:_t("No borders","citadela-directory"),value:"none"},{label:_t("Thin borders","citadela-directory"),value:"thin"},{label:_t("Thick borders","citadela-directory"),value:"thick"}],onChange:e=>{s({borderWidth:e})}}),_&&(0,l.jsx)(l.Fragment,{children:(N||I)&&(0,l.jsxs)(Et,{label:_t("Carousel decoration color","citadela-directory"),className:"block-editor-panel-color-settings",children:[M&&(0,l.jsx)(zt,{colorValue:M}),(0,l.jsx)($t,{value:M,onChange:e=>{s({carouselColor:e})},colors:te})]})})]}),(0,l.jsxs)(Bt,{title:_t("Item Image Options","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(xt,{value:z,customSizes:{citadela_item_thumbnail:_t("Default","citadela-directory")},onChange:e=>s({imageSize:e})}),(0,l.jsx)(Pt,{label:_t("Use responsive options","citadela-directory"),checked:E,onChange:e=>{s({useResponsiveOptionsImageHeight:e})}}),E?(0,l.jsxs)("div",{class:"citadela-responsive-settings-holder",children:[(0,l.jsx)(Ct,{activeTab:this.state.responsiveTabHeight,onChange:e=>{this.setState({responsiveTabHeight:e})}}),se]}):(0,l.jsx)(l.Fragment,{children:se})]}),(0,l.jsx)(me,{attributes:i,onChange:e=>this.props.setAttributes({useCarousel:e.useCarousel,carouselNavigation:e.carouselNavigation,carouselPagination:e.carouselPagination,carouselAutoplay:e.carouselAutoplay,carouselAutoHeight:e.carouselAutoHeight,carouselAutoplayDelay:e.carouselAutoplayDelay,carouselLoop:e.carouselLoop})})]},"inspector"),(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks","ctdl-directory-items-list",i.className,oe,`layout-${m}`,`size-${y}`,e?`border-${B}`:null,{"custom-text-color":!(!e||!D)},{"custom-decor-color":!(!e||!L)},{"custom-background-color":!(!e||!P)},{"custom-carousel-color":!(!e||!M)},{"show-item-featured-image":!!x},{"show-item-subtitle":!!v},{"show-item-description":!!j},{"show-item-address":!!f},{"show-item-web":!!k},{"show-item-categories":!!C},{"show-item-locations":!!w},{"use-carousel":!!_},{"carousel-navigation":!(!_||!I)},{"carousel-pagination":!(!_||!N)},{"carousel-autoheight":!(!_||!O)},{"show-item-rating":!!le},`image-size-${z}`,"desktop"==this.state.responsiveTabHeight&&U?"proportional-image-height":null,"mobile"==this.state.responsiveTabHeight&&G?"proportional-image-height":null,"desktop"!=this.state.responsiveTabHeight||U?null:`${W}-image-height`,"mobile"!=this.state.responsiveTabHeight||G?null:`${J}-image-height`,"desktop"!=this.state.responsiveTabHeight||U?null:`image-position-${q.replace(" ","-")}`,"mobile"!=this.state.responsiveTabHeight||G?null:`image-position-${X.replace(" ","-")}`),children:[(0,l.jsx)(fe,{useResponsiveOptions:E,isSelected:r,currentView:this.state.responsiveTabHeight,carouselAutoplay:_&&A,carouselLoop:_&&H}),(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(Dt,{icon:ie.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:ie.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:ie.description})]})]}),(0,l.jsx)("div",{class:"citadela-block-header",children:(0,l.jsx)(At,{tagName:"h3",value:i.title,onChange:e=>s({title:e}),placeholder:ie.title,keepPlaceholderOnFocus:!0,allowedFormats:[]})}),(0,l.jsx)("div",{class:"citadela-block-articles",children:(0,l.jsx)("div",{class:"citadela-block-articles-wrap",children:Array.from(Array(b),((e,t)=>(0,l.jsx)("article",{class:"citadela-article",style:he,children:(0,l.jsxs)("div",{class:"item-content",style:pe,children:[(0,l.jsx)("div",{class:"item-thumbnail",style:ue}),(0,l.jsxs)("div",{class:"item-body",children:[(0,l.jsx)("div",{class:"item-title",children:(0,l.jsxs)("div",{class:"item-title-wrap",children:[(0,l.jsx)("div",{class:"post-title"}),(0,l.jsx)("div",{class:"post-subtitle"})]})}),le&&(0,l.jsx)("div",{class:"item-rating",style:be}),(0,l.jsx)("div",{class:"item-text",children:(0,l.jsxs)("div",{class:"item-description",children:[(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"})]})}),(0,l.jsxs)("div",{class:"item-footer",style:ne,children:[(0,l.jsxs)("div",{class:"item-data location",style:ne,children:[(0,l.jsx)("span",{class:"label"}),(0,l.jsx)("span",{class:"values"})]}),(0,l.jsxs)("div",{class:"item-data address",style:ne,children:[(0,l.jsx)("span",{class:"label"}),(0,l.jsx)("span",{class:"values"})]}),(0,l.jsxs)("div",{class:"item-data web",style:ne,children:[(0,l.jsx)("span",{class:"label"}),(0,l.jsx)("span",{class:"values"})]}),(0,l.jsxs)("div",{class:"item-data categories",style:ne,children:[(0,l.jsx)("span",{class:"label"}),(0,l.jsx)("span",{class:"values"})]})]})]})]})})))})}),_&&I&&(0,l.jsxs)("div",{class:"carousel-navigation-wrapper",style:ge,children:[(0,l.jsx)("div",{class:"carousel-button-prev",children:(0,l.jsx)("i",{class:"fas fa-chevron-left"})}),(0,l.jsx)("div",{class:"carousel-button-next",children:(0,l.jsx)("i",{class:"fas fa-chevron-right"})})]}),_&&N&&(0,l.jsxs)("div",{class:"carousel-pagination-wrapper",style:ge,children:[(0,l.jsx)("span",{class:"carousel-bullet"}),(0,l.jsx)("span",{class:"carousel-bullet"}),(0,l.jsx)("span",{class:"carousel-bullet"})]})]})]})}},save:()=>null,example:{attributes:{numberOfItems:4}}});const{__:Qt}=wp.i18n,{Component:Zt,createRef:ea}=wp.element,{TextControl:ta,Spinner:aa}=wp.components,{apiFetch:la}=wp;class ia extends Zt{constructor(){super(...arguments),this.getSelectedPostsData=this.getSelectedPostsData.bind(this),this.searchPosts=this.searchPosts.bind(this),this.updateSelectedPosts=this.updateSelectedPosts.bind(this),this.getData=this.getData.bind(this),this.state={loading:!1,searchString:"",selectedPostsData:[],loadingSelectedPostsData:!0,foundPosts:[],typing:!1,typingTimeout:0,editSelection:!1}}componentDidMount(){this.getSelectedPostsData(),this.searchPosts(),this.setState({loading:!0})}render(){const{loading:e,searchString:t,foundPosts:a,loadingSelectedPostsData:i,selectedPostsData:s}=this.state,{dataType:o="posts",postType:r="post",selectedPostsIds:c,titleLabel:n=Qt("Selected posts","citadela-directory"),searchLabel:d=Qt("Search for posts","citadela-directory"),nothingFoundLabel:p=Qt("No posts found","citadela-directory"),description:u="",isSelected:h,singleValue:g}=this.props;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{class:"citadela-posts-selection-component",children:[c.length>0&&(0,l.jsxs)("div",{class:"selected-posts",children:[(0,l.jsxs)("div",{class:"header",children:[(0,l.jsx)("div",{class:"title",children:n}),u&&(0,l.jsx)("div",{class:"desc",children:u})]}),i?(0,l.jsx)("div",{class:"loader",children:(0,l.jsx)(aa,{})}):(0,l.jsx)("div",{class:"posts-list",children:0==s.length?(0,l.jsx)(l.Fragment,{children:g?(0,l.jsx)(l.Fragment,{children:Qt("Selected post is no more published.","citadela-directory")}):(0,l.jsx)(l.Fragment,{children:Qt("Selected posts are no more published.","citadela-directory")})}):(0,l.jsx)(l.Fragment,{children:c.map((e=>{const t=this.getData(e);if(t){let e="";return"posts"==o?e=t.post_title:"users"==o&&(e=t.data?`${t.data.display_name} - ${t.data.user_email}`:`${t.display_name} - ${t.user_email}`),(0,l.jsxs)("div",{class:"list-item",children:[h&&(0,l.jsx)("div",{class:"remove",onClick:e=>{this.updateSelectedPosts(t,"remove")},children:(0,l.jsx)("i",{class:"fa fa-times","aria-hidden":"true"})}),(0,l.jsx)("div",{class:"title",children:e})]})}return""}))})})]}),(h&&c.length>0||0==c.length)&&(0,l.jsxs)("div",{class:"search-posts",children:[(0,l.jsx)("div",{class:"search-bar",children:(0,l.jsx)(ta,{label:d,value:t,onChange:e=>{const t=this;this.state.typingTimeout&&clearTimeout(this.state.typingTimeout),this.setState({searchString:e,loading:!0,typingTimeout:setTimeout((function(){t.searchPosts()}),1e3)})}})}),(0,l.jsx)("div",{class:classNames("posts-list",`data-type-${o}`),children:e?(0,l.jsx)("div",{class:"loader",children:(0,l.jsx)(aa,{})}):(0,l.jsx)(l.Fragment,{children:this.state.foundPosts.length>0?this.state.foundPosts.map(((e,t)=>{const a=c.includes(parseInt(e.ID));let i="";return"posts"==o?i=e.post_title:"users"==o&&(i=e.data?`${e.data.display_name} - ${e.data.user_email}`:`${e.display_name} - ${e.user_email}`),(0,l.jsx)("div",{className:classNames("list-item",a?"selected":null),onClick:t=>{this.updateSelectedPosts(e,a?"remove":"add")},children:(0,l.jsx)("div",{class:"title",children:i})})})):(0,l.jsx)("div",{class:"no-posts-found",children:p})})})]})]})})}updateSelectedPosts(e,t="add"){const{selectedPostsIds:a,onChange:l,singleValue:i=!1}=this.props,{selectedPostsData:s}=this.state;let o=[...s],r=i?[]:[...a];const c=parseInt(e.ID);if("remove"==t)for(let e=0;e<r.length;e++)r[e]==c&&r.splice(e,1);else r.push(c),o.push(e),this.setState({selectedPostsData:o});l(r)}componentDidUpdate(e,t){}searchPosts(){const{limit:e=100,selectedPostsIds:t,postType:a="post",dataType:l="posts"}=this.props,{searchString:i}=this.state;let s={},o=[];t.length&&(o=t,s.exclude_posts=o),""!=i?s.search=i:s.limit=e;let r=Object.keys(s).map((e=>encodeURIComponent(e)+"="+encodeURIComponent(s[e]))).join("&"),c="";"posts"==l?c=`/citadela-directory/posts?post_type=${a}&${r}`:"users"==l&&(c=`/citadela-directory/users?${r}`),this.fetchRequest=la({path:c}).then((e=>{this.setState({foundPosts:e,loading:!1,typingTimeout:0})})).catch((()=>{this.setState({foundPosts:[],loading:!1,typingTimeout:0})}))}getSelectedPostsData(){const{postType:e,selectedPostsIds:t,dataType:a="posts"}=this.props;let l={};l.selected_posts=t;let i=Object.keys(l).map((e=>encodeURIComponent(e)+"="+encodeURIComponent(l[e]))).join("&"),s="";"posts"==a?s=`/citadela-directory/posts?post_type=${e}&${i}`:"users"==a&&(s=`/citadela-directory/users?${i}`),this.fetchRequest=la({path:s}).then((e=>{this.setState({selectedPostsData:e,loadingSelectedPostsData:!1})})).catch((()=>{this.setState({selectedPostsData:[],loadingSelectedPostsData:!1})}))}getData(e){const{selectedPostsData:t}=this.state,{dataType:a="posts"}=this.props;for(let a=0;a<t.length;a++){const l=t[a];if(e==l.ID)return l}return!1}}const{Component:sa,useState:oa}=wp.element,{__:ra}=wp.i18n,{BlockControls:ca,InspectorControls:na,RichText:da}=wp.blockEditor,{TextControl:pa,ToolbarGroup:ua,ToolbarItem:ha,PanelBody:ga,ToggleControl:ba,Icon:ma,Tooltip:ya,SelectControl:xa,RadioControl:va,ColorPalette:ja,ColorIndicator:fa,BaseControl:ka}=wp.components,{apiFetch:Ca}=wp,wa=({attributes:e,setAttributes:t})=>{const{numberOfItems:a}=e,[i,s]=oa(a);return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(ka,{label:ra("Number of items","citadela-directory"),help:ra(null!=a?"Empty value to show all similar items.":"Will be listed all available similar items.","citadela-directory"),children:(0,l.jsx)("input",{className:"components-text-control__input",type:"number",onChange:e=>{let a=e.target.value;s(a),(""==a||a<=0)&&(s(""),a=void 0),t({numberOfItems:a?parseInt(a):a})},value:i,step:1,min:1})})})},Ta=({attributes:e,setAttributes:t})=>{const{imageHeightUnit:a,imageHeight:i}=e,[s,o]=oa(i);let r=[];r.px=250,r.vh=100,r.vw=30;let c=1;return"px"!=a&&(c=.1),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ka,{label:ra("Image height unit","citadela-directory"),children:(0,l.jsx)(xa,{value:a,options:[{label:"px",value:"px"},{label:"vh",value:"vh"},{label:"vw",value:"vw"}],onChange:e=>{o(r[e]),t({imageHeightUnit:e,imageHeight:r[e]})}})}),(0,l.jsx)(ka,{label:ra("Image height","citadela-directory")+(void 0!==i?`: ${i}${a}`:": "+ra("default image size","citadela-directory")),children:(0,l.jsx)(pa,{type:"number",value:s,step:c,onChange:e=>{let l=e;o(l),""==e&&(o(""),l=r[a]),t("px"!=a?{imageHeight:l?parseFloat(l):l}:{imageHeight:l?parseInt(l):l})}})})]})},Sa=({attributes:e,setAttributes:t})=>{const{imageHeightUnitMobile:a,imageHeightMobile:i}=e,[s,o]=oa(i);let r=[];r.px=250,r.vh=100,r.vw=30;let c=1;return"px"!=a&&(c=.1),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ka,{label:ra("Image height unit","citadela-directory"),children:(0,l.jsx)(xa,{value:a,options:[{label:"px",value:"px"},{label:"vh",value:"vh"},{label:"vw",value:"vw"}],onChange:e=>{o(r[e]),t({imageHeightUnitMobile:e,imageHeightMobile:r[e]})}})}),(0,l.jsx)(ka,{label:ra("Image height","citadela-directory")+(void 0!==i?`: ${i}${a}`:": "+ra("default image size","citadela-directory")),children:(0,l.jsx)(pa,{type:"number",value:s,step:c,onChange:e=>{let l=e;o(l),""==e&&(o(""),l=r[a]),t("px"!=a?{imageHeightMobile:l?parseFloat(l):l}:{imageHeightMobile:l?parseInt(l):l})}})})]})},_a=({attributes:e,setAttributes:t})=>{const{breakpointMobileImageHeight:a}=e,[i,s]=oa(a);return(0,l.jsx)(ka,{label:ra("Mobile width breakpoint","citadela-directory"),help:ra("Responsive options applied under screen width","citadela-directory")+` ${a}px`,id:"mobile-width",children:(0,l.jsx)(pa,{type:"number",value:i,onChange:e=>{let a=e;s(a),""==e&&(a=600),t({breakpointMobileImageHeight:a?parseInt(a):a})},step:1})})},Ia=JSON.parse('{"apiVersion":1,"name":"citadela-directory/directory-similar-items","category":"citadela-directory-blocks","icon":"list-view","attributes":{"refPost":{"type":"array","default":[]},"similarByAuthor":{"type":"boolean","default":false},"similarByCategory":{"type":"boolean","default":false},"similarByLocation":{"type":"boolean","default":false},"showReferencePost":{"type":"boolean","default":false},"onlyFeaturedCategory":{"type":"boolean","default":false},"onlyFeatured":{"type":"boolean","default":false},"featuredFirst":{"type":"boolean","default":false},"numberOfItems":{"type":"number"},"title":{"type":"string","default":""},"layout":{"type":"string","default":"box"},"size":{"type":"string","default":"medium"},"showItemFeaturedImage":{"type":"boolean","default":true},"showItemSubtitle":{"type":"boolean","default":true},"showItemDescription":{"type":"boolean","default":true},"showItemAddress":{"type":"boolean","default":true},"showItemWeb":{"type":"boolean","default":true},"showItemCategories":{"type":"boolean","default":true},"showItemLocations":{"type":"boolean","default":false},"itemsOrderBy":{"type":"string","default":"date"},"itemsOrder":{"type":"string","default":"DESC"},"useCarousel":{"type":"boolean","default":false},"carouselNavigation":{"type":"boolean","default":true},"carouselPagination":{"type":"boolean","default":true},"carouselAutoplay":{"type":"boolean","default":false},"carouselAutoHeight":{"type":"boolean","default":false},"carouselAutoplayDelay":{"type":"number","default":5},"carouselLoop":{"type":"boolean","default":true},"borderWidth":{"type":"string","default":"thin"},"borderColor":{"type":"string","default":""},"backgroundColor":{"type":"string","default":""},"textColor":{"type":"string","default":""},"decorColor":{"type":"string","default":""},"carouselColor":{"type":"string","default":""},"showRating":{"type":"boolean","default":true},"ratingColor":{"type":"string","default":""},"imageSize":{"type":"string","default":"citadela_item_thumbnail"},"useResponsiveOptionsImageHeight":{"type":"boolean","default":false},"breakpointMobileImageHeight":{"type":"number","default":600},"proportionalImageHeight":{"type":"boolean","default":false},"proportionalImageHeightMobile":{"type":"boolean","default":false},"imageHeightType":{"type":"string","default":"default"},"imageHeightTypeMobile":{"type":"string","default":"default"},"imageHeightUnit":{"type":"string","default":"px"},"imageHeightUnitMobile":{"type":"string","default":"px"},"imageHeight":{"type":"number","default":250},"imageHeightMobile":{"type":"number","default":250},"imageObjectPosition":{"type":"string","default":"center center"},"imageObjectPositionMobile":{"type":"string","default":"center center"}},"example":{"attributes":{"numberOfItems":4}},"editorScript":"citadela-directory-blocks"}'),{__:Na,setLocaleData:Aa}=wp.i18n,{registerBlockType:Oa}=wp.blocks,{name:Ha}=Ia;Oa(Ha,{...Ia,title:Na("Listing Similar Items","citadela-directory"),description:Na("Displays listing items similar to selected reference item post.","citadela-directory"),edit:class extends sa{constructor(){super(...arguments);const e=wp.data.select("core/editor")?wp.data.select("core/editor").getCurrentPostId():null,t=parseInt(CitadelaDirectorySettings.specialPages["single-item"]),a=wp.data.select("core/editor")?wp.data.select("core/editor").getCurrentPostType():null;this.state={isItemDetail:e===t||"citadela-item"===a,responsiveTabHeight:"desktop"}}render(){const e="undefined"!=typeof CitadelaProSettings,{isItemDetail:t}=this.state,{attributes:a,setAttributes:i,name:s,isSelected:o}=this.props,{onlyFeaturedCategory:r,onlyFeatured:c,featuredFirst:n,numberOfItems:d,layout:u,size:h,showItemFeaturedImage:g,showItemSubtitle:b,showItemDescription:m,showItemAddress:y,showItemWeb:x,showItemCategories:v,showItemLocations:j,itemsOrderBy:f,itemsOrder:k,useCarousel:C,carouselNavigation:w,carouselPagination:T,carouselAutoplay:S,carouselAutoHeight:_,carouselLoop:I,borderWidth:N,borderColor:A,backgroundColor:O,textColor:H,decorColor:B,carouselColor:F,showRating:P,ratingColor:D,refPost:L,similarByAuthor:M,similarByCategory:R,similarByLocation:$,showReferencePost:z,imageSize:E,useResponsiveOptionsImageHeight:V,breakpointMobileImageHeight:U,proportionalImageHeight:G,proportionalImageHeightMobile:W,imageHeightType:J,imageHeightTypeMobile:q,imageObjectPosition:X,imageObjectPositionMobile:Y,imageHeight:K,imageHeightMobile:Q,imageHeightUnit:Z,imageHeightUnitMobile:te}=a,ae=[{color:"#00d1b2"},{color:"#3373dc"},{color:"#209cef"},{color:"#22d25f"},{color:"#ffdd57"},{color:"#ff3860"},{color:"#7941b6"},{color:"#392F43"}],le=CitadelaDirectorySettings.features.item_reviews,ie=!(!le||!P),se=wp.blocks.getBlockType(s);let oe="";(!V||V&&"desktop"==this.state.responsiveTabHeight)&&(oe=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ba,{label:ra("Proportional image height","citadela-directory"),checked:G,onChange:e=>{i({proportionalImageHeight:e})}}),!G&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(xa,{label:ra("Image height","citadela-directory"),value:J,options:[{label:ra("Default","citadela-directory"),value:"default"},{label:ra("Custom","citadela-directory"),value:"custom"}],onChange:e=>{i({imageHeightType:e})}}),"custom"==J&&(0,l.jsx)(Ta,{attributes:a,setAttributes:i}),(0,l.jsx)(xa,{value:X,label:ra("Image focus","citadela-directory"),options:[{label:ra("Top left","citadela-directory"),value:"top left"},{label:ra("Top","citadela-directory"),value:"top center"},{label:ra("Top right","citadela-directory"),value:"top right"},{label:ra("Left","citadela-directory"),value:"center left"},{label:ra("Center","citadela-directory"),value:"center center"},{label:ra("Right","citadela-directory"),value:"center right"},{label:ra("Bottom left","citadela-directory"),value:"bottom left"},{label:ra("Bottom","citadela-directory"),value:"bottom center"},{label:ra("Bottom right","citadela-directory"),value:"bottom right"}],onChange:e=>i({imageObjectPosition:e})})]})]})),V&&"mobile"==this.state.responsiveTabHeight&&(oe=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(_a,{attributes:a,setAttributes:i}),(0,l.jsx)(ba,{label:ra("Proportional image height","citadela-directory"),checked:W,onChange:e=>{i({proportionalImageHeightMobile:e})}}),!W&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(xa,{label:ra("Image height","citadela-directory"),value:q,options:[{label:ra("Default","citadela-directory"),value:"default"},{label:ra("Custom","citadela-directory"),value:"custom"}],onChange:e=>{i({imageHeightTypeMobile:e})}}),"custom"==q&&(0,l.jsx)(Sa,{attributes:a,setAttributes:i}),(0,l.jsx)(xa,{value:Y,label:ra("Image focus","citadela-directory"),options:[{label:ra("Top left","citadela-directory"),value:"top left"},{label:ra("Top","citadela-directory"),value:"top center"},{label:ra("Top right","citadela-directory"),value:"top right"},{label:ra("Left","citadela-directory"),value:"center left"},{label:ra("Center","citadela-directory"),value:"center center"},{label:ra("Right","citadela-directory"),value:"center right"},{label:ra("Bottom left","citadela-directory"),value:"bottom left"},{label:ra("Bottom","citadela-directory"),value:"bottom center"},{label:ra("Bottom right","citadela-directory"),value:"bottom right"}],onChange:e=>i({imageObjectPositionMobile:e})})]})]}));var ce="grid-type-1";"list"==u&&(ce="grid-type-3");const ne=V&&"mobile"==this.state.responsiveTabHeight?{imageHeight:Q,imageHeightUnit:te,proportionalImageHeight:W,imageHeightType:q,imageObjectPosition:Y}:{imageHeight:K,imageHeightUnit:Z,proportionalImageHeight:G,imageHeightType:J,imageObjectPosition:X};let de={},pe={},ue={},he={},ge={},be={};ue={...ue,...ne.proportionalImageHeight||"custom"!=ne.imageHeightType||void 0===ne.imageHeight?{}:{height:ne.imageHeight+ne.imageHeightUnit}},e&&(de={...A?{borderColor:A}:{}},pe={...A?{borderColor:A}:{},...O?{backgroundColor:O}:{},...H?{textColor:H}:{}},ue={...ue,...B?{color:B}:{}},he={...H?{color:H}:{}},ge={...F?{color:F}:{}},be={...D?{color:D}:{}});let ye=null!=d?d:10;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ca,{children:(0,l.jsxs)(ua,{children:[(0,l.jsx)(ha,{children:e=>(0,l.jsx)(ee,{value:u,onChange:e=>i({layout:e}),toggleProps:e})}),(0,l.jsx)(ha,{children:e=>(0,l.jsx)(re,{value:h,onChange:e=>i({size:e}),toggleProps:e})})]})},"controls"),(0,l.jsxs)(na,{children:[(0,l.jsxs)(ga,{title:ra("Filters","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:[(0,l.jsxs)(ka,{label:ra("Show similar posts from the same:","citadela-directory"),className:"citadela-toggle-list-control",children:[(0,l.jsx)(ba,{label:ra("Item category","citadela-directory"),checked:R,onChange:e=>i({similarByCategory:e})}),(0,l.jsx)(ba,{label:ra("Item location","citadela-directory"),checked:$,onChange:e=>i({similarByLocation:e})}),(0,l.jsx)(ba,{label:ra("Item author","citadela-directory"),checked:M,onChange:e=>i({similarByAuthor:e})})]}),(0,l.jsx)(wa,{attributes:a,setAttributes:i}),(0,l.jsx)(ba,{label:ra("Show reference Item Post","citadela-directory"),help:ra("Selected reference post will be listed before all other similar posts.","citadela-directory"),checked:z,onChange:e=>i({showReferencePost:e})}),(0,l.jsx)(ba,{label:ra("Only featured items","citadela-directory"),checked:c,onChange:e=>i({onlyFeatured:e})})]}),(0,l.jsxs)(ga,{title:ra("Item Details","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(ba,{label:ra("Show featured image","citadela-directory"),checked:g,onChange:e=>this.props.setAttributes({showItemFeaturedImage:e})}),(0,l.jsx)(ba,{label:ra("Show subtitle","citadela-directory"),checked:b,onChange:e=>this.props.setAttributes({showItemSubtitle:e})}),(0,l.jsx)(ba,{label:ra("Show description","citadela-directory"),checked:m,onChange:e=>this.props.setAttributes({showItemDescription:e})}),(0,l.jsx)(ba,{label:ra("Show address","citadela-directory"),checked:y,onChange:e=>this.props.setAttributes({showItemAddress:e})}),(0,l.jsx)(ba,{label:ra("Show web","citadela-directory"),checked:x,onChange:e=>this.props.setAttributes({showItemWeb:e})}),(0,l.jsx)(ba,{label:ra("Show categories","citadela-directory"),checked:v,onChange:e=>this.props.setAttributes({showItemCategories:e})}),v&&(0,l.jsx)(ba,{label:ra("Show only featured category","citadela-directory"),checked:r,onChange:e=>i({onlyFeaturedCategory:e})}),(0,l.jsx)(ba,{label:ra("Show locations","citadela-directory"),checked:j,onChange:e=>this.props.setAttributes({showItemLocations:e})}),le&&(0,l.jsx)(ba,{label:ra("Show rating","citadela-directory"),checked:P,onChange:e=>i({showRating:e})})]}),(0,l.jsxs)(ga,{title:ra("Order Options","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(xa,{label:ra("Order by","citadela-directory"),help:"gps"==f&&ra("Displayed are nearest items by their GPS coordinates.","citadela-directory"),value:f,options:[{label:ra("Date","citadela-directory"),value:"date"},{label:ra("Title","citadela-directory"),value:"title"},{label:ra("Order number","citadela-directory"),value:"menu_order"},{label:ra("Random","citadela-directory"),value:"rand"},{label:ra("Distance","citadela-directory"),value:"gps"}],onChange:e=>{i({itemsOrderBy:e})}}),"rand"!=f&&"gps"!=f&&(0,l.jsx)(va,{selected:k,options:[{label:ra("Descending","citadela-directory"),value:"DESC"},{label:ra("Ascending","citadela-directory"),value:"ASC"}],onChange:e=>{i({itemsOrder:e})}}),"gps"!=f&&(0,l.jsx)(ba,{label:ra("Featured items first","citadela-directory"),help:ra("Show featured items on the top of list before all other item posts.","citadela-directory"),checked:n,onChange:e=>i({featuredFirst:e})})]}),e&&(0,l.jsxs)(ga,{title:ra("Design Options","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsxs)(ka,{label:ra("Decoration color","citadela-directory"),className:"block-editor-panel-color-settings",children:[B&&(0,l.jsx)(fa,{colorValue:B}),(0,l.jsx)(ja,{value:B,onChange:e=>{i({decorColor:e})},colors:ae})]}),(0,l.jsxs)(ka,{label:ra("Text color","citadela-directory"),className:"block-editor-panel-color-settings",children:[H&&(0,l.jsx)(fa,{colorValue:H}),(0,l.jsx)(ja,{value:H,onChange:e=>{i({textColor:e})},colors:ae})]}),(0,l.jsx)(p,{label:ra("Background color","citadela-directory"),color:O,onChange:e=>{i({backgroundColor:e})}}),(0,l.jsx)(p,{label:ra("Borders color","citadela-directory"),color:A,onChange:e=>{i({borderColor:e})}}),le&&(0,l.jsx)(p,{label:ra("Rating stars color","citadela-directory"),color:D,onChange:e=>{i({ratingColor:e})},disableAlpha:!0}),(0,l.jsx)(xa,{label:ra("Borders width","citadela-directory"),value:N,options:[{label:ra("No borders","citadela-directory"),value:"none"},{label:ra("Thin borders","citadela-directory"),value:"thin"},{label:ra("Thick borders","citadela-directory"),value:"thick"}],onChange:e=>{i({borderWidth:e})}}),C&&(0,l.jsx)(l.Fragment,{children:(T||w)&&(0,l.jsxs)(ka,{label:ra("Carousel decoration color","citadela-directory"),className:"block-editor-panel-color-settings",children:[F&&(0,l.jsx)(fa,{colorValue:F}),(0,l.jsx)(ja,{value:F,onChange:e=>{i({carouselColor:e})},colors:ae})]})})]}),(0,l.jsxs)(ga,{title:ra("Item Image Options","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(xt,{value:E,customSizes:{citadela_item_thumbnail:ra("Default","citadela-directory")},onChange:e=>i({imageSize:e})}),(0,l.jsx)(ba,{label:ra("Use responsive options","citadela-directory"),checked:V,onChange:e=>{i({useResponsiveOptionsImageHeight:e})}}),V?(0,l.jsxs)("div",{class:"citadela-responsive-settings-holder",children:[(0,l.jsx)(Ct,{activeTab:this.state.responsiveTabHeight,onChange:e=>{this.setState({responsiveTabHeight:e})}}),oe]}):(0,l.jsx)(l.Fragment,{children:oe})]}),(0,l.jsx)(me,{attributes:a,onChange:e=>this.props.setAttributes({useCarousel:e.useCarousel,carouselNavigation:e.carouselNavigation,carouselPagination:e.carouselPagination,carouselAutoplay:e.carouselAutoplay,carouselAutoHeight:e.carouselAutoHeight,carouselAutoplayDelay:e.carouselAutoplayDelay,carouselLoop:e.carouselLoop})})]},"inspector"),(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks","ctdl-directory-similar-items",a.className,ce,`layout-${u}`,`size-${h}`,e?`border-${N}`:null,{"custom-text-color":!(!e||!H)},{"custom-decor-color":!(!e||!B)},{"custom-background-color":!(!e||!O)},{"custom-carousel-color":!(!e||!F)},{"show-item-featured-image":!!g},{"show-item-subtitle":!!b},{"show-item-description":!!m},{"show-item-address":!!y},{"show-item-web":!!x},{"show-item-categories":!!v},{"show-item-locations":!!j},{"use-carousel":!!C},{"carousel-navigation":!(!C||!w)},{"carousel-pagination":!(!C||!T)},{"carousel-autoheight":!(!C||!_)},{"show-item-rating":!!ie},`image-size-${E}`,"desktop"==this.state.responsiveTabHeight&&G?"proportional-image-height":null,"mobile"==this.state.responsiveTabHeight&&W?"proportional-image-height":null,"desktop"!=this.state.responsiveTabHeight||G?null:`${J}-image-height`,"mobile"!=this.state.responsiveTabHeight||W?null:`${q}-image-height`,"desktop"!=this.state.responsiveTabHeight||G?null:`image-position-${X.replace(" ","-")}`,"mobile"!=this.state.responsiveTabHeight||W?null:`image-position-${Y.replace(" ","-")}`),children:[(0,l.jsx)(fe,{useResponsiveOptions:V,isSelected:o,currentView:this.state.responsiveTabHeight,carouselAutoplay:C&&S,carouselLoop:C&&I}),(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(ma,{icon:se.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:se.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:se.description})]})]}),t?(0,l.jsx)("div",{class:"citadela-directory-posts-selection",children:(0,l.jsx)("div",{class:"selected-posts",children:(0,l.jsxs)("div",{class:"header",children:[(0,l.jsx)("div",{class:"title",children:ra("Reference Item Post","citadela-directory")}),(0,l.jsx)("div",{class:"desc",children:ra("Already opened Item Post will be used as reference post.","citadela-directory")})]})})}):(0,l.jsx)(ia,{postType:"citadela-item",selectedPostsIds:L,onChange:e=>i({refPost:e}),titleLabel:ra("Reference Item Post","citadela-directory"),description:ra("Displayed will be posts similar to selected reference Item Post.","citadela-directory"),searchLabel:ra("Search for reference item post","citadela-directory"),singleValue:!0,...this.props}),(Object.keys(L).length>0||t)&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{class:"citadela-block-header",children:(0,l.jsx)(da,{tagName:"h3",value:a.title,onChange:e=>i({title:e}),placeholder:se.title,keepPlaceholderOnFocus:!0,allowedFormats:[]})}),(0,l.jsx)("div",{class:"citadela-block-articles",children:(0,l.jsx)("div",{class:"citadela-block-articles-wrap",children:Array.from(Array(ye),((e,t)=>(0,l.jsx)("article",{class:"citadela-article",style:he,children:(0,l.jsxs)("div",{class:"item-content",style:pe,children:[(0,l.jsx)("div",{class:"item-thumbnail",style:ue}),(0,l.jsxs)("div",{class:"item-body",children:[(0,l.jsx)("div",{class:"item-title",children:(0,l.jsxs)("div",{class:"item-title-wrap",children:[(0,l.jsx)("div",{class:"post-title"}),(0,l.jsx)("div",{class:"post-subtitle"})]})}),ie&&(0,l.jsx)("div",{class:"item-rating",style:be}),(0,l.jsx)("div",{class:"item-text",children:(0,l.jsxs)("div",{class:"item-description",children:[(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"})]})}),(0,l.jsxs)("div",{class:"item-footer",style:de,children:[(0,l.jsxs)("div",{class:"item-data location",style:de,children:[(0,l.jsx)("span",{class:"label"}),(0,l.jsx)("span",{class:"values"})]}),(0,l.jsxs)("div",{class:"item-data address",style:de,children:[(0,l.jsx)("span",{class:"label"}),(0,l.jsx)("span",{class:"values"})]}),(0,l.jsxs)("div",{class:"item-data web",style:de,children:[(0,l.jsx)("span",{class:"label"}),(0,l.jsx)("span",{class:"values"})]}),(0,l.jsxs)("div",{class:"item-data categories",style:de,children:[(0,l.jsx)("span",{class:"label"}),(0,l.jsx)("span",{class:"values"})]})]})]})]})})))})}),C&&w&&(0,l.jsxs)("div",{class:"carousel-navigation-wrapper",style:ge,children:[(0,l.jsx)("div",{class:"carousel-button-prev",children:(0,l.jsx)("i",{class:"fas fa-chevron-left"})}),(0,l.jsx)("div",{class:"carousel-button-next",children:(0,l.jsx)("i",{class:"fas fa-chevron-right"})})]}),C&&T&&(0,l.jsxs)("div",{class:"carousel-pagination-wrapper",style:ge,children:[(0,l.jsx)("span",{class:"carousel-bullet"}),(0,l.jsx)("span",{class:"carousel-bullet"}),(0,l.jsx)("span",{class:"carousel-bullet"})]})]})]})]})}},save:()=>null});const{__:Ba}=wp.i18n,{Component:Fa,Fragment:Pa}=wp.element,{BlockControls:Da,InspectorControls:La,RichText:Ma}=wp.blockEditor,{ToolbarGroup:Ra,ToolbarItem:$a,PanelBody:za,Icon:Ea,Tooltip:Va,ToggleControl:Ua}=wp.components,{apiFetch:Ga}=wp,Wa=JSON.parse('{"apiVersion":1,"name":"citadela-directory/directory-locations-list","category":"citadela-directory-blocks","icon":"admin-site-alt","attributes":{"location":{"type":"string","default":"0"},"title":{"type":"string","default":""},"layout":{"type":"string","default":"box"},"size":{"type":"string","default":"large"},"showLocationIcon":{"type":"boolean","default":true},"showLocationDescription":{"type":"boolean","default":true},"onlyFeatured":{"type":"boolean","default":false},"useCarousel":{"type":"boolean","default":false},"carouselNavigation":{"type":"boolean","default":true},"carouselPagination":{"type":"boolean","default":true},"carouselAutoplay":{"type":"boolean","default":false},"carouselAutoHeight":{"type":"boolean","default":false},"carouselAutoplayDelay":{"type":"number","default":5},"carouselLoop":{"type":"boolean","default":true}},"example":{"attributes":{"size":"small"}},"editorScript":"citadela-directory-blocks"}'),{__:Ja,setLocaleData:qa}=wp.i18n,{registerBlockType:Xa}=wp.blocks,{name:Ya}=Wa;Xa(Ya,{...Wa,title:Ja("Listing Locations List","citadela-directory"),description:Ja("Displays listing locations based on specific filter. It can display parent locations or sublocations from specific location.","citadela-directory"),edit:class extends Fa{constructor(){super(...arguments),this.state={locationsList:[]}}componentDidMount(){this.fetchRequest=Ga({path:"/wp/v2/citadela-item-location/?per_page=-1"}).then((e=>{this.setState({locationsList:e})})).catch((()=>{this.setState({locationsList:[]})}))}render(){const{locationsList:e}=this.state,{attributes:t,setAttributes:a,name:i}=this.props,{location:s,layout:o,size:r,showLocationDescription:c,showLocationIcon:n,onlyFeatured:d,useCarousel:p,carouselNavigation:u,carouselPagination:h,carouselAutoplay:g,carouselAutoHeight:b,carouselLoop:m}=t,y=wp.blocks.getBlockType(i);return(0,l.jsxs)(Pa,{children:[(0,l.jsx)(Da,{children:(0,l.jsxs)(Ra,{children:[(0,l.jsx)($a,{children:e=>(0,l.jsx)(ee,{value:o,onChange:e=>a({layout:e}),toggleProps:e})}),(0,l.jsx)($a,{children:e=>(0,l.jsx)(re,{value:r,onChange:e=>a({size:e}),toggleProps:e})})]})},"controls"),(0,l.jsxs)(La,{children:[(0,l.jsxs)(za,{title:Ba("Filters","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:[(0,l.jsx)(de,{categoriesList:e,label:Ba("Location","citadela-directory"),noOptionLabel:Ba("Only parent locations","citadela-directory"),selectedCategoryId:s,onChange:e=>{a({location:e})}}),(0,l.jsx)(Ua,{label:Ba("Only featured","citadela-directory"),help:Ba("Show only locations marked as featured.","citadela-directory"),checked:d,onChange:e=>a({onlyFeatured:e})})]}),(0,l.jsxs)(za,{title:Ba("Location Details","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(Ua,{label:Ba("Show Location icon","citadela-directory"),checked:n,onChange:e=>a({showLocationIcon:e})}),(0,l.jsx)(Ua,{label:Ba("Show Location description","citadela-directory"),checked:c,onChange:e=>a({showLocationDescription:e})})]}),(0,l.jsx)(me,{attributes:t,onChange:e=>a({useCarousel:e.useCarousel,carouselNavigation:e.carouselNavigation,carouselPagination:e.carouselPagination,carouselAutoplay:e.carouselAutoplay,carouselAutoHeight:e.carouselAutoHeight,carouselAutoplayDelay:e.carouselAutoplayDelay,carouselLoop:e.carouselLoop})})]},"inspector"),(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks","ctdl-directory-locations-list",t.className,"grid-type-2","items-auto","layout-"+o,"size-"+r,{"hide-description":!c},{"hide-icon":!n},{"use-carousel":!!p},{"carousel-navigation":!(!p||!u)},{"carousel-pagination":!(!p||!h)}),children:[(0,l.jsx)(fe,{carouselAutoplay:p&&g,carouselLoop:p&&m}),(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(Ea,{icon:y.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:y.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:y.description})]})]}),(0,l.jsx)("div",{class:"citadela-block-header",children:(0,l.jsx)(Ma,{tagName:"h3",value:t.title,onChange:e=>a({title:e}),placeholder:y.title,keepPlaceholderOnFocus:!0,allowedFormats:[]})}),(0,l.jsx)("div",{class:"citadela-block-articles",children:(0,l.jsx)("div",{class:"citadela-block-articles-wrap",children:Array.from(Array(12),((e,t)=>(0,l.jsxs)("article",{class:"folder-card",children:[(0,l.jsx)("div",{class:"folder-header",children:(0,l.jsx)("div",{class:"folder-icon"})}),(0,l.jsx)("div",{class:"folder-content",children:(0,l.jsxs)("div",{class:"folder-content-wrap",children:[(0,l.jsx)("div",{class:"folder-title"}),(0,l.jsxs)("div",{class:"folder-description",children:[(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"})]})]})})]})))})}),p&&u&&(0,l.jsxs)("div",{class:"carousel-navigation-wrapper",children:[(0,l.jsx)("div",{class:"carousel-button-prev",children:(0,l.jsx)("i",{class:"fas fa-chevron-left"})}),(0,l.jsx)("div",{class:"carousel-button-next",children:(0,l.jsx)("i",{class:"fas fa-chevron-right"})})]}),p&&h&&(0,l.jsxs)("div",{class:"carousel-pagination-wrapper",children:[(0,l.jsx)("span",{class:"carousel-bullet"}),(0,l.jsx)("span",{class:"carousel-bullet"}),(0,l.jsx)("span",{class:"carousel-bullet"})]})]})]})}},save:()=>null,example:{attributes:{size:"small"}}});const Ka=JSON.parse('{"apiVersion":1,"name":"citadela-directory/directory-search-form","category":"citadela-directory-blocks","icon":"search","attributes":{"withAdvancedFilters":{"type":"boolean","default":false},"geoDistanceLabel":{"type":"string","default":"Set distance for search"},"geoDistanceSubmitLabel":{"type":"string","default":"OK"},"geoDisableLabel":{"type":"string","default":"Disable geolocation"},"useGeolocationInput":{"type":"boolean","default":false},"geoUnit":{"type":"string","default":"km"},"geoMax":{"type":"number","default":100},"geoStep":{"type":"number","default":1},"buttonBackgroundColor":{"type":"string","default":""},"buttonTextColor":{"type":"string","default":""},"backgroundType":{"type":"string","default":"none"},"backgroundColorType":{"type":"string","default":"solid"},"backgroundColor":{"type":"string","default":""},"backgroundGradient":{"type":"object","default":{"first":"#dddddd","second":"#f6f6f6","degree":90,"type":"linear"}},"backgroundBlur":{"type":"boolean","default":false},"blurRadius":{"type":"number","default":10},"borderWidth":{"type":"string","default":"thin"},"borderColor":{"type":"string","default":""},"borderRadius":{"type":"number"},"boxShadow":{"type":"object"},"boxShadowType":{"type":"string","default":"default"},"align":{"type":"string","default":"center"}},"example":{"attributes":{"useGeolocationInput":true,"withAdvancedFilters":true}},"editorScript":"citadela-directory-blocks"}'),{__:Qa}=wp.i18n,{Component:Za}=wp.element;class el extends Za{constructor(){super(...arguments),this.updateShadowValues=this.updateShadowValues.bind(this),this.defaults={horizontal:10,vertical:10,blur:20,spread:0}}updateShadowValues(e,t){const{color:a,horizontal:l,vertical:i,blur:s,spread:o}=this.props.value;let r={color:null==a?this.defaults.color:a,horizontal:null==l?this.defaults.horizontal:l,vertical:null==i?this.defaults.vertical:i,blur:null==s?this.defaults.blur:s,spread:null==o?this.defaults.spread:o};r[e]=t,this.props.onChange(r)}render(){const{allowColorReset:e=!0}=this.props,{color:t,horizontal:a=this.defaults.horizontal,vertical:i=this.defaults.vertical,blur:s=this.defaults.blur,spread:o=this.defaults.spread}=this.props.value;let r=t;return"object"==typeof t&&(r=`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`),(0,l.jsxs)("div",{class:"citadela-box-shadow-control",children:[(0,l.jsx)(p,{label:Qa("Shadow color","citadela-directory"),color:r,returnObject:!0,allowReset:e,onChange:e=>{this.updateShadowValues("color",e)}}),(0,l.jsx)(x,{label:Qa("Horizontal offset","citadela-directory")+`: ${a}px`,rangeValue:null==a?this.defaults.horizontal:a,onChange:e=>{this.updateShadowValues("horizontal",e)},min:-50,max:50,initial:this.defaults.horizontal,allowReset:!0}),(0,l.jsx)(x,{label:Qa("Vertical offset","citadela-directory")+`: ${i}px`,rangeValue:null==i?this.defaults.vertical:i,onChange:e=>{this.updateShadowValues("vertical",e)},min:-50,max:50,initial:this.defaults.vertical,allowReset:!0}),(0,l.jsx)(x,{label:Qa("Blur radius","citadela-directory")+`: ${s}px`,rangeValue:null==s?this.defaults.blur:s,onChange:e=>{this.updateShadowValues("blur",e)},min:0,max:50,initial:this.defaults.blur,allowReset:!0}),(0,l.jsx)(x,{label:Qa("Spread radius","citadela-directory")+`: ${o}px`,rangeValue:null==o?this.defaults.spread:o,onChange:e=>{this.updateShadowValues("spread",e)},min:0,max:50,initial:this.defaults.spread,allowReset:!0})]})}}const{__:tl}=wp.i18n,{Component:al,useCallback:ll,Fragment:il}=wp.element,{BaseControl:sl,ColorPicker:ol,Dropdown:rl,ToggleControl:cl,RangeControl:nl}=wp.components,dl=({gradientDegree:e="",onChange:t})=>{const a=ll((e=>{t(e)}),[t]);return(0,l.jsx)(nl,{value:e,min:0,max:359,initialPosition:90,allowReset:!0,onChange:a})};class pl extends al{render(){const{label:e="",help:t="",gradient:a,disableAlpha:i=!1,onFirstColorChange:s,onSecondColorChange:o,onDegreeChange:r,onGradientTypeChange:c}=this.props,n={backgroundImage:"linear"==a.type?`linear-gradient(${a.degree}deg, ${a.first} 0%, ${a.second} 100%)`:`radial-gradient(${a.first} 0%, ${a.second} 100%)`};return(0,l.jsxs)(il,{children:[(0,l.jsxs)("div",{class:"citadela-gradient-control",children:[(0,l.jsxs)(sl,{label:e||"",children:[(0,l.jsx)("div",{className:classNames("gradient-preview",i?"":"alpha"),children:(0,l.jsx)("div",{class:"inner-preview",style:n})}),(0,l.jsxs)("div",{class:"colors-preview",children:[(0,l.jsx)(rl,{className:classNames("left-picker",i?"":"alpha"),position:"bottom right",renderToggle:({isOpen:e,onToggle:t})=>(0,l.jsx)("div",{class:"color","aria-expanded":e,onClick:t,style:{backgroundColor:a.first}}),renderContent:()=>(0,l.jsx)(ol,{color:a.first,onChangeComplete:e=>s(i?e.hex:`rgba(${e.rgb.r}, ${e.rgb.g}, ${e.rgb.b}, ${e.rgb.a})`),disableAlpha:i})}),(0,l.jsx)(rl,{className:classNames("right-picker",i?"":"alpha"),position:"bottom right",renderToggle:({isOpen:e,onToggle:t})=>(0,l.jsx)("div",{class:"color","aria-expanded":e,onClick:t,style:{backgroundColor:a.second}}),renderContent:()=>(0,l.jsx)(ol,{color:a.second,onChangeComplete:e=>o(i?e.hex:`rgba(${e.rgb.r}, ${e.rgb.g}, ${e.rgb.b}, ${e.rgb.a})`),disableAlpha:i})})]}),"linear"==a.type&&(0,l.jsx)(sl,{label:tl("Gradient degree","citadela-directory")+`: ${a.degree}`,children:(0,l.jsx)(dl,{gradientDegree:a.degree,onChange:r})})]}),(0,l.jsx)(cl,{label:tl("Radial gradient","citadela-directory"),checked:"radial"==a.type,onChange:e=>{c(e)}})]}),""!=t&&(0,l.jsx)("p",{class:"components-base-control__help",children:t})]})}}const{__:ul,_x:hl}=wp.i18n,{Component:gl,Fragment:bl}=wp.element,{PanelBody:ml,SelectControl:yl,ToggleControl:xl,TextControl:vl}=wp.components;class jl extends gl{constructor(){super(...arguments),this.state={childBlock:null}}componentDidUpdate(e,t){const{withAdvancedFilters:a}=this.props.attributes;if(a&&!this.state.childBlock&&this.props.props.clientId){const e=wp.data.select("core/block-editor").getBlocksByClientId(this.props.props.clientId)[0],t=e&&e.innerBlocks.length>0?e.innerBlocks[0]:null;t&&this.setState({childBlock:t})}}render(){const{attributes:e,setAttributes:t,props:a}=this.props,{withAdvancedFilters:i,geoDistanceLabel:s,geoDistanceSubmitLabel:o,geoDisableLabel:r,useGeolocationInput:c,geoUnit:n,geoMax:d,geoStep:u,buttonBackgroundColor:h,buttonTextColor:g,backgroundBlur:b,blurRadius:m,backgroundType:y,backgroundColorType:v,backgroundColor:j,backgroundGradient:f,borderColor:k,borderRadius:C,borderWidth:w,boxShadowType:T,boxShadow:S}=e,_="undefined"!=typeof CitadelaProSettings;return(0,l.jsxs)(bl,{children:[(0,l.jsxs)(ml,{title:ul("Filters settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(xl,{label:ul("Show advanced filters","citadela-directory"),help:ul("Advanced Filters block displayed within search form","citadela-directory"),checked:i,onChange:e=>t({withAdvancedFilters:e})}),i&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(vl,{label:ul("Submit filters button label","citadela-directory"),value:this.state.childBlock?wp.data.select("core/block-editor").getBlockAttributes(this.state.childBlock.clientId).filters_submit_label:"",onChange:e=>{wp.data.dispatch("core/block-editor").updateBlockAttributes(this.state.childBlock.clientId,{filters_submit_label:e}),this.forceUpdate()}}),(0,l.jsx)(vl,{label:ul("Disable filters button label","citadela-directory"),value:this.state.childBlock?wp.data.select("core/block-editor").getBlockAttributes(this.state.childBlock.clientId).filters_disable_label:"",onChange:e=>{wp.data.dispatch("core/block-editor").updateBlockAttributes(this.state.childBlock.clientId,{filters_disable_label:e}),this.forceUpdate()}})]})]}),(0,l.jsxs)(ml,{title:ul("Geolocation search settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(xl,{label:ul("Use geolocation search","citadela-directory"),checked:c,onChange:e=>t({useGeolocationInput:e})}),c&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(yl,{label:ul("Distance unit","citadela-directory"),value:n,options:[{label:ul("Kilometers","citadela-directory"),value:"km"},{label:ul("Miles","citadela-directory"),value:"mi"}],onChange:e=>{t({geoUnit:e})}}),(0,l.jsx)(yl,{label:ul("Step","citadela-directory"),value:u,options:[{label:ul("1","citadela-directory"),value:1},{label:ul("0.1","citadela-directory"),value:.1}],onChange:e=>{t({geoStep:e})}}),(0,l.jsx)(x,{label:ul("Maximum distance","citadela-directory")+`: ${d}${n}`,rangeValue:d,onChange:e=>{t({geoMax:e})},min:1,max:1e3,initial:10,allowReset:!0}),(0,l.jsx)(vl,{label:ul("Distance option label","citadela-directory"),value:s,onChange:e=>{t({geoDistanceLabel:e})}}),(0,l.jsx)(vl,{label:ul("Submit distance button label","citadela-directory"),value:o,onChange:e=>{t({geoDistanceSubmitLabel:e})}}),(0,l.jsx)(vl,{label:ul("Disable geolocation button label","citadela-directory"),value:r,onChange:e=>{t({geoDisableLabel:e})}})]})]}),_&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(ml,{title:ul("Background settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(yl,{label:ul("Background","citadela-directory"),value:y,options:[{label:ul("None","citadela-directory"),value:"none"},{label:ul("With background","citadela-directory"),value:"background"},{label:ul("Background on collapsed form","citadela-directory"),value:"background-collapsed"}],onChange:e=>{t({backgroundType:e})}}),"none"!=y&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(xl,{label:ul("Blur background","citadela-directory"),checked:b,onChange:e=>t({backgroundBlur:e})}),b&&(0,l.jsx)(x,{label:ul("Blur radius","citadela-directory")+`: ${m}px`,rangeValue:m,onChange:e=>{t({blurRadius:e})},min:0,max:50,initial:10,allowReset:!0}),(0,l.jsx)(yl,{label:ul("Background type","citadela-directory"),value:v,options:[{label:ul("Solid color","citadela-directory"),value:"solid"},{label:ul("Gradient","citadela-directory"),value:"gradient"}],onChange:e=>{t({backgroundColorType:e})}}),"solid"==v&&(0,l.jsx)(p,{label:ul("Background color","citadela-directory"),color:j,onChange:e=>{t({backgroundColor:e})}}),"gradient"==v&&(0,l.jsx)(pl,{label:ul("Background gradient","citadela-blocks"),gradient:f,onFirstColorChange:e=>{t({backgroundGradient:{first:e,second:f.second,degree:f.degree,type:f.type}})},onSecondColorChange:e=>{t({backgroundGradient:{first:f.first,second:e,degree:f.degree,type:f.type}})},onDegreeChange:e=>{t({backgroundGradient:{first:f.first,second:f.second,degree:null==e?90:e,type:f.type}})},onGradientTypeChange:e=>{t({backgroundGradient:{first:f.first,second:f.second,degree:f.degree,type:e?"radial":"linear"}})}})]})]}),(0,l.jsxs)(ml,{title:ul("Border settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(yl,{label:ul("Border width","citadela-directory"),value:w,options:[{label:ul("No border","citadela-directory"),value:"none"},{label:ul("Thin border","citadela-directory"),value:"thin"},{label:ul("Thick border","citadela-directory"),value:"thick"}],onChange:e=>{t({borderWidth:e})}}),"none"!=w&&(0,l.jsx)(p,{label:ul("Border color","citadela-directory"),color:k,onChange:e=>{t({borderColor:e})},disableAlpha:!0}),(0,l.jsx)(x,{label:ul("Border radius","citadela-directory"),rangeValue:C,onChange:e=>{t({borderRadius:e})},min:0,max:40,initial:40,allowNoValue:!0,allowReset:!0})]}),(0,l.jsxs)(ml,{title:ul("Shadow settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(yl,{label:ul("Shadow","citadela-directory"),value:T,options:[{label:ul("No shadow","citadela-directory"),value:"none"},{label:ul("Default shadow","citadela-directory"),value:"default"},{label:ul("Custom shadow","citadela-directory"),value:"custom"}],onChange:e=>{t({boxShadowType:e})}}),"custom"===T&&(0,l.jsx)(el,{value:void 0===S?{}:S,onChange:e=>{t({boxShadow:e})},allowColorReset:!1})]}),(0,l.jsxs)(ml,{title:ul("Button settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(p,{label:ul("Background color","citadela-directory"),color:h,onChange:e=>{t({buttonBackgroundColor:e})}}),(0,l.jsx)(p,{label:ul("Text color","citadela-directory"),color:g,onChange:e=>{t({buttonTextColor:e})}})]})]})]})}}const{__:fl}=wp.i18n,{Component:kl}=wp.element,{DropdownMenu:Cl}=wp.components;class wl extends kl{render(){const{toggleProps:e,value:t,onChange:a,label:i=fl("Select alignment","citadela-directory"),leftLabel:s=fl("Align Text Left","citadela-directory"),centerLabel:o=fl("Align Text Center","citadela-directory"),rightLabel:r=fl("Align Text Right","citadela-directory"),justifyLabel:c=fl("Align Text Justify","citadela-directory"),allowJustify:n}=this.props,d={left:"editor-alignleft",center:"editor-aligncenter",right:"editor-alignright",justify:"editor-justify"};let p={left:{title:s,icon:d.left,isActive:"left"===t,onClick:()=>{a("left")}},center:{title:o,icon:d.center,isActive:"center"===t,onClick:()=>{a("center")}},right:{title:r,icon:d.right,isActive:"right"===t,onClick:()=>{a("right")}}};n&&(p.justify={title:c,icon:d.justify,isActive:"justify"===t,onClick:()=>{a("justify")}});let u=[];for(let e in p)u.push(p[e]);return(0,l.jsx)(Cl,{icon:d[t],label:i,controls:[u],toggleProps:e})}}const{__:Tl}=wp.i18n,{registerBlockType:Sl}=wp.blocks,{InspectorControls:_l,BlockControls:Il,InnerBlocks:Nl}=wp.blockEditor,{ToolbarGroup:Al,ToolbarItem:Ol,Icon:Hl}=wp.components,{name:Bl}=Ka;Sl(Bl,{...Ka,title:Tl("Listing Search Form","citadela-directory"),description:Tl("Search form that allows visitors to search listing items by keyword, category or location.","citadela-directory"),edit:e=>{const t="undefined"!=typeof CitadelaProSettings,{attributes:a,setAttributes:i,name:s}=e,{withAdvancedFilters:o,useGeolocationInput:r,buttonBackgroundColor:c,buttonTextColor:n,backgroundBlur:d,blurRadius:p,backgroundType:u,backgroundColorType:h,backgroundColor:g,backgroundGradient:b,align:m,borderWidth:y,borderColor:x,borderRadius:v,boxShadow:j,boxShadowType:f}=a,k=wp.blocks.getBlockType(s);let C={},w={},T={},S={},_={},I={},N=!1;if(t){N="background"==u||"background-collapsed"==u,"none"!=u&&("solid"==h&&(C={...C,...g?{backgroundColor:g}:{}}),"gradient"==h&&(C={...C,backgroundImage:"linear"==b.type?`linear-gradient(${b.degree}deg, ${b.first} 0%, ${b.second} 100%)`:`radial-gradient(${b.first} 0%, ${b.second} 100%)`}),d&&(C={...C,WebkitBackdropFilter:`blur(${p}px)`,backdropFilter:`blur(${p}px)`})),S={...c?{backgroundColor:c}:{}},_={...c?{borderColor:c}:{}},I={...n?{color:n}:{}};const e="custom"===f&&j?`${j.horizontal}px ${j.vertical}px ${j.blur}px ${j.spread}px rgba(${j.color.r}, ${j.color.g}, ${j.color.b}, ${j.color.a})`:"";w={..."none"!=y&&x?{borderColor:x}:{},...v>=0?{borderRadius:`${v}px`}:{},...e?{boxShadow:e}:{}},T={...v>=0?{borderRadius:`${v}px`}:{}}}return(0,l.jsxs)(l.Fragment,{children:[t&&(0,l.jsx)(Il,{children:(0,l.jsx)(Al,{children:(0,l.jsx)(Ol,{children:e=>(0,l.jsx)(wl,{value:m,onChange:e=>i({align:e}),leftLabel:Tl("Align Left","citadela-directory"),centerLabel:Tl("Align Center","citadela-directory"),rightLabel:Tl("Align Right","citadela-directory"),toggleProps:e,allowJustify:!0,justifyLabel:Tl("Align Justify","citadela-directory")})})})}),(0,l.jsx)(_l,{children:(0,l.jsx)(jl,{props:e,attributes:a,setAttributes:i})}),(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks","ctdl-directory-search-form",a.className,o?"with-advanced-filters":null,r?"has-geolocation-input":null,t?`border-${y}`:null,t?`shadow-${f}`:null,t?`align-${m}`:null,t&&v?"custom-border-radius":null,t&&"background"==u?"has-background":null,t&&"background-collapsed"==u?"has-background-collapsed":null,t&&N&&d?"blur-background":null,t&&N&&"solid"==h?"solid-background":null,t&&N&&"solid"==h&&g?"custom-solid-background-color":null,t&&N&&"gradient"==h?"gradient-background":null,t&&c?"custom-button-background-color":null,t&&n?"custom-button-text-color":null),children:[(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(Hl,{icon:k.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:k.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:k.description})]})]}),(0,l.jsx)("div",{class:"citadela-block-form search-form-component-container",style:C,children:(0,l.jsxs)("div",{class:"search-form",style:w,children:[(0,l.jsx)("div",{class:"data-type-1",children:(0,l.jsx)("div",{class:"input-container keyword",style:w,children:(0,l.jsxs)("div",{class:"input-data",children:[(0,l.jsx)("div",{class:"label"}),(0,l.jsx)("div",{class:"input",style:T})]})})}),(0,l.jsxs)("div",{class:"data-type-2",children:[(0,l.jsx)("div",{class:"input-container category",style:w,children:(0,l.jsxs)("div",{class:"input-data",children:[(0,l.jsx)("div",{class:"label"}),(0,l.jsx)("div",{class:"input",style:T})]})}),(0,l.jsx)("div",{class:"input-container location",style:w,children:(0,l.jsxs)("div",{class:"input-data",children:[(0,l.jsx)("div",{class:"label"}),(0,l.jsx)("div",{class:"input",style:T})]})}),r&&(0,l.jsx)("div",{class:"input-container geolocation",style:w,children:(0,l.jsxs)("div",{class:"input-data",children:[(0,l.jsx)("div",{class:"label"}),(0,l.jsx)("div",{class:"input",style:T})]})}),o&&(0,l.jsx)("div",{class:"input-container advanced-filters",style:w,children:(0,l.jsxs)("div",{class:"input-data",children:[(0,l.jsx)("div",{class:"label"}),(0,l.jsx)("div",{class:"input",style:T})]})})]}),(0,l.jsx)("div",{class:"data-submit",children:(0,l.jsx)("div",{class:"input-container sf-button",style:{...T,...S,..._},children:(0,l.jsx)("div",{class:"input-data",children:(0,l.jsx)("span",{class:"submit",style:I,children:Tl("Search","citadela-directory")})})})})]})})]}),o&&(0,l.jsx)(Nl,{template:[["citadela-directory/directory-advanced-filters",{in_search_form:!0}]],templateLock:"all"})]})},save:e=>{const{attributes:{withAdvancedFilters:t}}=e;return(0,l.jsx)(l.Fragment,{children:t&&(0,l.jsx)(Nl.Content,{template:[["citadela-directory/directory-advanced-filters",{in_search_form:!0}]],templateLock:"all"})})}});const{__:Fl}=wp.i18n,{Component:Pl,useState:Dl}=wp.element,{BlockControls:Ll,InspectorControls:Ml}=wp.blockEditor,{TextControl:Rl,ToolbarGroup:$l,ToolbarItem:zl,PanelBody:El,ToggleControl:Vl,Icon:Ul,SelectControl:Gl,RadioControl:Wl,BaseControl:Jl,ColorPalette:ql,ColorIndicator:Xl}=wp.components,Yl=({attributes:e,setAttributes:t})=>{const{imageHeightUnit:a,imageHeight:i}=e,[s,o]=Dl(i);let r=[];r.px=250,r.vh=100,r.vw=30;let c=1;return"px"!=a&&(c=.1),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Jl,{label:Fl("Image height unit","citadela-directory"),children:(0,l.jsx)(Gl,{value:a,options:[{label:"px",value:"px"},{label:"vh",value:"vh"},{label:"vw",value:"vw"}],onChange:e=>{o(r[e]),t({imageHeightUnit:e,imageHeight:r[e]})}})}),(0,l.jsx)(Jl,{label:Fl("Image height","citadela-directory")+(void 0!==i?`: ${i}${a}`:": "+Fl("default image size","citadela-directory")),children:(0,l.jsx)(Rl,{type:"number",value:s,step:c,onChange:e=>{let l=e;o(l),""==e&&(o(""),l=r[a]),t("px"!=a?{imageHeight:l?parseFloat(l):l}:{imageHeight:l?parseInt(l):l})}})})]})},Kl=({attributes:e,setAttributes:t})=>{const{imageHeightUnitMobile:a,imageHeightMobile:i}=e,[s,o]=Dl(i);let r=[];r.px=250,r.vh=100,r.vw=30;let c=1;return"px"!=a&&(c=.1),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Jl,{label:Fl("Image height unit","citadela-directory"),children:(0,l.jsx)(Gl,{value:a,options:[{label:"px",value:"px"},{label:"vh",value:"vh"},{label:"vw",value:"vw"}],onChange:e=>{o(r[e]),t({imageHeightUnitMobile:e,imageHeightMobile:r[e]})}})}),(0,l.jsx)(Jl,{label:Fl("Image height","citadela-directory")+(void 0!==i?`: ${i}${a}`:": "+Fl("default image size","citadela-directory")),children:(0,l.jsx)(Rl,{type:"number",value:s,step:c,onChange:e=>{let l=e;o(l),""==e&&(o(""),l=r[a]),t("px"!=a?{imageHeightMobile:l?parseFloat(l):l}:{imageHeightMobile:l?parseInt(l):l})}})})]})},Ql=({attributes:e,setAttributes:t})=>{const{breakpointMobileImageHeight:a}=e,[i,s]=Dl(a);return(0,l.jsx)(Jl,{label:Fl("Mobile width breakpoint","citadela-directory"),help:Fl("Responsive options applied under screen width","citadela-directory")+` ${a}px`,id:"mobile-width",children:(0,l.jsx)(Rl,{type:"number",value:i,onChange:e=>{let a=e;s(a),""==e&&(a=600),t({breakpointMobileImageHeight:a?parseInt(a):a})},step:1})})},Zl=JSON.parse('{"apiVersion":1,"name":"citadela-directory/directory-search-results","category":"citadela-directory-blocks","icon":"excerpt-view","attributes":{"onlyFeaturedCategory":{"type":"boolean","default":false},"featuredFirst":{"type":"boolean","default":false},"layout":{"type":"string","default":"box"},"size":{"type":"string","default":"medium"},"showItemFeaturedImage":{"type":"boolean","default":true},"showItemSubtitle":{"type":"boolean","default":true},"showItemDescription":{"type":"boolean","default":true},"showItemAddress":{"type":"boolean","default":true},"showItemWeb":{"type":"boolean","default":true},"showItemCategories":{"type":"boolean","default":true},"showItemLocations":{"type":"boolean","default":false},"itemsOrderBy":{"type":"string","default":"date"},"itemsOrder":{"type":"string","default":"DESC"},"borderWidth":{"type":"string","default":"thin"},"borderColor":{"type":"string","default":""},"backgroundColor":{"type":"string","default":""},"textColor":{"type":"string","default":""},"decorColor":{"type":"string","default":""},"showRating":{"type":"boolean","default":true},"ratingColor":{"type":"string","default":""},"imageSize":{"type":"string","default":"citadela_item_thumbnail"},"useResponsiveOptionsImageHeight":{"type":"boolean","default":false},"breakpointMobileImageHeight":{"type":"number","default":600},"proportionalImageHeight":{"type":"boolean","default":false},"proportionalImageHeightMobile":{"type":"boolean","default":false},"imageHeightType":{"type":"string","default":"default"},"imageHeightTypeMobile":{"type":"string","default":"default"},"imageHeightUnit":{"type":"string","default":"px"},"imageHeightUnitMobile":{"type":"string","default":"px"},"imageHeight":{"type":"number","default":250},"imageHeightMobile":{"type":"number","default":250},"imageObjectPosition":{"type":"string","default":"center center"},"imageObjectPositionMobile":{"type":"string","default":"center center"}},"example":{"attributes":{"size":"small"}},"editorScript":"citadela-directory-blocks"}'),{__:ei}=wp.i18n,{registerBlockType:ti}=wp.blocks,{name:ai}=Zl;ti(ai,{...Zl,title:ei("Listing Search Results","citadela-directory"),description:ei("Displays listing items based on current category/location page or results from search form.","citadela-directory"),edit:class extends Pl{constructor(){super(...arguments),this.state={responsiveTabHeight:"desktop"}}componentDidMount(){}render(){const e="undefined"!=typeof CitadelaProSettings,{attributes:t,setAttributes:a,name:i,isSelected:s}=this.props,o=wp.blocks.getBlockType(i),{featuredFirst:r,onlyFeaturedCategory:c,layout:n,size:d,showItemFeaturedImage:u,showItemSubtitle:h,showItemDescription:g,showItemAddress:b,showItemWeb:m,showItemCategories:y,showItemLocations:x,itemsOrderBy:v,itemsOrder:j,borderWidth:f,borderColor:k,backgroundColor:C,textColor:w,decorColor:T,showRating:S,ratingColor:_,imageSize:I,useResponsiveOptionsImageHeight:N,breakpointMobileImageHeight:A,proportionalImageHeight:O,proportionalImageHeightMobile:H,imageHeightType:B,imageHeightTypeMobile:F,imageObjectPosition:P,imageObjectPositionMobile:D,imageHeight:L,imageHeightMobile:M,imageHeightUnit:R,imageHeightUnitMobile:$}=t,z=[{color:"#00d1b2"},{color:"#3373dc"},{color:"#209cef"},{color:"#22d25f"},{color:"#ffdd57"},{color:"#ff3860"},{color:"#7941b6"},{color:"#392F43"}],E=parseInt(CitadelaDirectorySettings.wpSettings.postsPerPage),V=CitadelaDirectorySettings.features.item_reviews,U=!(!V||!S);let G="";(!N||N&&"desktop"==this.state.responsiveTabHeight)&&(G=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Vl,{label:Fl("Proportional image height","citadela-directory"),checked:O,onChange:e=>{a({proportionalImageHeight:e})}}),!O&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Gl,{label:Fl("Image height","citadela-directory"),value:B,options:[{label:Fl("Default","citadela-directory"),value:"default"},{label:Fl("Custom","citadela-directory"),value:"custom"}],onChange:e=>{a({imageHeightType:e})}}),"custom"==B&&(0,l.jsx)(Yl,{attributes:t,setAttributes:a}),(0,l.jsx)(Gl,{value:P,label:Fl("Image focus","citadela-directory"),options:[{label:Fl("Top left","citadela-directory"),value:"top left"},{label:Fl("Top","citadela-directory"),value:"top center"},{label:Fl("Top right","citadela-directory"),value:"top right"},{label:Fl("Left","citadela-directory"),value:"center left"},{label:Fl("Center","citadela-directory"),value:"center center"},{label:Fl("Right","citadela-directory"),value:"center right"},{label:Fl("Bottom left","citadela-directory"),value:"bottom left"},{label:Fl("Bottom","citadela-directory"),value:"bottom center"},{label:Fl("Bottom right","citadela-directory"),value:"bottom right"}],onChange:e=>a({imageObjectPosition:e})})]})]})),N&&"mobile"==this.state.responsiveTabHeight&&(G=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Ql,{attributes:t,setAttributes:a}),(0,l.jsx)(Vl,{label:Fl("Proportional image height","citadela-directory"),checked:H,onChange:e=>{a({proportionalImageHeightMobile:e})}}),!H&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Gl,{label:Fl("Image height","citadela-directory"),value:F,options:[{label:Fl("Default","citadela-directory"),value:"default"},{label:Fl("Custom","citadela-directory"),value:"custom"}],onChange:e=>{a({imageHeightTypeMobile:e})}}),"custom"==F&&(0,l.jsx)(Kl,{attributes:t,setAttributes:a}),(0,l.jsx)(Gl,{value:D,label:Fl("Image focus","citadela-directory"),options:[{label:Fl("Top left","citadela-directory"),value:"top left"},{label:Fl("Top","citadela-directory"),value:"top center"},{label:Fl("Top right","citadela-directory"),value:"top right"},{label:Fl("Left","citadela-directory"),value:"center left"},{label:Fl("Center","citadela-directory"),value:"center center"},{label:Fl("Right","citadela-directory"),value:"center right"},{label:Fl("Bottom left","citadela-directory"),value:"bottom left"},{label:Fl("Bottom","citadela-directory"),value:"bottom center"},{label:Fl("Bottom right","citadela-directory"),value:"bottom right"}],onChange:e=>a({imageObjectPositionMobile:e})})]})]}));var W="grid-type-1";"list"==n&&(W="grid-type-3");const J=N&&"mobile"==this.state.responsiveTabHeight?{imageHeight:M,imageHeightUnit:$,proportionalImageHeight:H,imageHeightType:F,imageObjectPosition:D}:{imageHeight:L,imageHeightUnit:R,proportionalImageHeight:O,imageHeightType:B,imageObjectPosition:P};let q={},X={},Y={},K={},Q={};return Y={...Y,...J.proportionalImageHeight||"custom"!=J.imageHeightType||void 0===J.imageHeight?{}:{height:J.imageHeight+J.imageHeightUnit}},e&&(q={...k?{borderColor:k}:{}},X={...k?{borderColor:k}:{},...C?{backgroundColor:C}:{},...w?{textColor:w}:{}},Y={...Y,...T?{color:T}:{}},K={...w?{color:w}:{}},Q={..._?{color:_}:{}}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Ll,{children:(0,l.jsxs)($l,{children:[(0,l.jsx)(zl,{children:e=>(0,l.jsx)(ee,{value:n,onChange:e=>a({layout:e}),toggleProps:e})}),(0,l.jsx)(zl,{children:e=>(0,l.jsx)(re,{value:d,onChange:e=>a({size:e}),toggleProps:e})})]})},"controls"),(0,l.jsxs)(Ml,{children:[(0,l.jsxs)(El,{title:Fl("Order Options","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:[(0,l.jsx)(Gl,{label:Fl("Order by","citadela-directory"),value:v,options:[{label:Fl("Date","citadela-directory"),value:"date"},{label:Fl("Title","citadela-directory"),value:"title"},{label:Fl("Order number","citadela-directory"),value:"menu_order"},{label:Fl("Random","citadela-directory"),value:"rand"}],onChange:e=>{a({itemsOrderBy:e})}}),"rand"!=v&&(0,l.jsx)(Wl,{selected:j,options:[{label:Fl("Descending","citadela-directory"),value:"DESC"},{label:Fl("Ascending","citadela-directory"),value:"ASC"}],onChange:e=>{a({itemsOrder:e})}}),(0,l.jsx)(Vl,{label:Fl("Featured items first","citadela-directory"),help:Fl("Show featured items on the top of list before all other item posts.","citadela-directory"),checked:r,onChange:e=>a({featuredFirst:e})})]}),(0,l.jsxs)(El,{title:Fl("Item Details","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(Vl,{label:Fl("Show featured image","citadela-directory"),checked:u,onChange:e=>a({showItemFeaturedImage:e})}),(0,l.jsx)(Vl,{label:Fl("Show subtitle","citadela-directory"),checked:h,onChange:e=>a({showItemSubtitle:e})}),(0,l.jsx)(Vl,{label:Fl("Show description","citadela-directory"),checked:g,onChange:e=>a({showItemDescription:e})}),(0,l.jsx)(Vl,{label:Fl("Show address","citadela-directory"),checked:b,onChange:e=>a({showItemAddress:e})}),(0,l.jsx)(Vl,{label:Fl("Show web","citadela-directory"),checked:m,onChange:e=>a({showItemWeb:e})}),(0,l.jsx)(Vl,{label:Fl("Show categories","citadela-directory"),checked:y,onChange:e=>a({showItemCategories:e})}),y&&(0,l.jsx)(Vl,{label:Fl("Show only featured category","citadela-directory"),checked:c,onChange:e=>a({onlyFeaturedCategory:e})}),(0,l.jsx)(Vl,{label:Fl("Show locations","citadela-directory"),checked:x,onChange:e=>a({showItemLocations:e})}),V&&(0,l.jsx)(Vl,{label:Fl("Show rating","citadela-directory"),checked:S,onChange:e=>a({showRating:e})})]}),e&&(0,l.jsxs)(El,{title:Fl("Design Options","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsxs)(Jl,{label:Fl("Decoration color","citadela-directory"),className:"block-editor-panel-color-settings",children:[T&&(0,l.jsx)(Xl,{colorValue:T}),(0,l.jsx)(ql,{value:T,onChange:e=>{a({decorColor:e})},colors:z})]}),(0,l.jsxs)(Jl,{label:Fl("Text color","citadela-directory"),className:"block-editor-panel-color-settings",children:[w&&(0,l.jsx)(Xl,{colorValue:w}),(0,l.jsx)(ql,{value:w,onChange:e=>{a({textColor:e})},colors:z})]}),(0,l.jsx)(p,{label:Fl("Background color","citadela-directory"),color:C,onChange:e=>{a({backgroundColor:e})}}),(0,l.jsx)(p,{label:Fl("Borders color","citadela-directory"),color:k,onChange:e=>{a({borderColor:e})}}),V&&(0,l.jsx)(p,{label:Fl("Rating stars color","citadela-directory"),color:_,onChange:e=>{a({ratingColor:e})},disableAlpha:!0}),(0,l.jsx)(Gl,{label:Fl("Borders width","citadela-directory"),value:f,options:[{label:Fl("No borders","citadela-directory"),value:"none"},{label:Fl("Thin borders","citadela-directory"),value:"thin"},{label:Fl("Thick borders","citadela-directory"),value:"thick"}],onChange:e=>{a({borderWidth:e})}})]}),(0,l.jsxs)(El,{title:Fl("Item Image Options","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(xt,{value:I,customSizes:{citadela_item_thumbnail:Fl("Default","citadela-directory")},onChange:e=>a({imageSize:e})}),(0,l.jsx)(Vl,{label:Fl("Use responsive options","citadela-directory"),checked:N,onChange:e=>{a({useResponsiveOptionsImageHeight:e})}}),N?(0,l.jsxs)("div",{class:"citadela-responsive-settings-holder",children:[(0,l.jsx)(Ct,{activeTab:this.state.responsiveTabHeight,onChange:e=>{this.setState({responsiveTabHeight:e})}}),G]}):(0,l.jsx)(l.Fragment,{children:G})]})]},"inspector"),(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks","ctdl-directory-search-results",t.className,W,"layout-"+n,"size-"+d,e?`border-${f}`:null,{"custom-text-color":!(!e||!w)},{"custom-decor-color":!(!e||!T)},{"custom-background-color":!(!e||!C)},{"show-item-featured-image":!!u},{"show-item-subtitle":!!h},{"show-item-description":!!g},{"show-item-address":!!b},{"show-item-web":!!m},{"show-item-categories":!!y},{"show-item-locations":!!x},{"show-item-rating":!!U},`image-size-${I}`,"desktop"==this.state.responsiveTabHeight&&O?"proportional-image-height":null,"mobile"==this.state.responsiveTabHeight&&H?"proportional-image-height":null,"desktop"!=this.state.responsiveTabHeight||O?null:`${B}-image-height`,"mobile"!=this.state.responsiveTabHeight||H?null:`${F}-image-height`,"desktop"!=this.state.responsiveTabHeight||O?null:`image-position-${P.replace(" ","-")}`,"mobile"!=this.state.responsiveTabHeight||H?null:`image-position-${D.replace(" ","-")}`),children:[(0,l.jsx)(fe,{useResponsiveOptions:N,isSelected:s,currentView:this.state.responsiveTabHeight}),(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(Ul,{icon:o.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:o.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:o.description})]})]}),(0,l.jsx)("div",{class:"citadela-block-articles",children:(0,l.jsx)("div",{class:"citadela-block-articles-wrap",children:Array.from(Array(E),((e,t)=>(0,l.jsx)("article",{class:"citadela-article",style:K,children:(0,l.jsxs)("div",{class:"item-content",style:X,children:[(0,l.jsx)("div",{class:"item-thumbnail",style:Y}),(0,l.jsxs)("div",{class:"item-body",children:[(0,l.jsx)("div",{class:"item-title",children:(0,l.jsxs)("div",{class:"item-title-wrap",children:[(0,l.jsx)("div",{class:"post-title"}),(0,l.jsx)("div",{class:"post-subtitle"})]})}),U&&(0,l.jsx)("div",{class:"item-rating",style:Q}),(0,l.jsx)("div",{class:"item-text",children:(0,l.jsxs)("div",{class:"item-description",children:[(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"})]})}),(0,l.jsxs)("div",{class:"item-footer",style:q,children:[(0,l.jsxs)("div",{class:"item-data location",style:q,children:[(0,l.jsx)("span",{class:"label"}),(0,l.jsx)("span",{class:"values"})]}),(0,l.jsxs)("div",{class:"item-data address",style:q,children:[(0,l.jsx)("span",{class:"label"}),(0,l.jsx)("span",{class:"values"})]}),(0,l.jsxs)("div",{class:"item-data web",style:q,children:[(0,l.jsx)("span",{class:"label"}),(0,l.jsx)("span",{class:"values"})]}),(0,l.jsxs)("div",{class:"item-data categories",style:q,children:[(0,l.jsx)("span",{class:"label"}),(0,l.jsx)("span",{class:"values"})]})]})]})]})})))})})]})]})}},save:()=>null});const li=JSON.parse('{"apiVersion":1,"name":"citadela-directory/directory-subcategories-list","category":"citadela-directory-blocks","icon":"portfolio","attributes":{"onlyFeatured":{"type":"boolean","default":false}},"example":{"attributes":{"size":"small"}},"editorScript":"citadela-directory-blocks"}'),{__:ii,setLocaleData:si}=wp.i18n,{registerBlockType:oi}=wp.blocks,{Fragment:ri}=wp.element,{BlockControls:ci,InspectorControls:ni,RichText:di}=wp.blockEditor,{PanelBody:pi,Icon:ui,BaseControl:hi,ToggleControl:gi}=wp.components,{name:bi}=li;oi(bi,{...li,title:ii("Listing Subcategories List","citadela-directory"),description:ii("Displays listing subcategories based on current category page.","citadela-directory"),edit:e=>{const{name:t,attributes:a,setAttributes:i}=e,{onlyFeatured:s}=a,o=wp.blocks.getBlockType(t);return(0,l.jsxs)(ri,{children:[(0,l.jsx)(ni,{children:(0,l.jsx)(pi,{title:ii("Filters","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:(0,l.jsx)(gi,{label:ii("Only featured","citadela-directory"),help:ii("Show only categories marked as featured.","citadela-directory"),checked:s,onChange:e=>i({onlyFeatured:e})})})},"inspector"),(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks ctdl-directory-subcategories-list grid-type-2 size-small items-auto",a.className),children:[(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(ui,{icon:o.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:o.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:o.description})]})]}),(0,l.jsx)("div",{class:"citadela-block-articles",children:(0,l.jsx)("div",{class:"citadela-block-articles-wrap",children:Array.from(Array(12),((e,t)=>(0,l.jsxs)("article",{class:"folder-card",children:[(0,l.jsx)("div",{class:"folder-header",children:(0,l.jsx)("div",{class:"folder-icon"})}),(0,l.jsx)("div",{class:"folder-content",children:(0,l.jsxs)("div",{class:"folder-content-wrap",children:[(0,l.jsx)("div",{class:"folder-title"}),(0,l.jsxs)("div",{class:"folder-description",children:[(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"})]})]})})]})))})})]})]})},save:()=>null});const mi=JSON.parse('{"apiVersion":1,"name":"citadela-directory/directory-sublocations-list","category":"citadela-directory-blocks","icon":"admin-site-alt3","attributes":{"onlyFeatured":{"type":"boolean","default":false}},"example":{"attributes":{"size":"small"}},"editorScript":"citadela-directory-blocks"}'),{__:yi,setLocaleData:xi}=wp.i18n,{registerBlockType:vi}=wp.blocks,{Fragment:ji}=wp.element,{BlockControls:fi,InspectorControls:ki,RichText:Ci}=wp.blockEditor,{PanelBody:wi,Icon:Ti,BaseControl:Si,ToggleControl:_i}=wp.components,{name:Ii}=mi;vi(Ii,{...mi,title:yi("Listing Sublocations List","citadela-directory"),description:yi("Displays listing sublocations based on current category page.","citadela-directory"),edit:e=>{const{name:t,attributes:a,setAttributes:i}=e,{onlyFeatured:s}=a,o=wp.blocks.getBlockType(t);return(0,l.jsxs)(ji,{children:[(0,l.jsx)(ki,{children:(0,l.jsx)(wi,{title:yi("Filters","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:(0,l.jsx)(_i,{label:yi("Only featured","citadela-directory"),help:yi("Show only locations marked as featured.","citadela-directory"),checked:s,onChange:e=>i({onlyFeatured:e})})})},"inspector"),(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks ctdl-directory-sublocations-list grid-type-2 size-small items-auto",a.className),children:[(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(Ti,{icon:o.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:o.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:o.description})]})]}),(0,l.jsx)("div",{class:"citadela-block-articles",children:(0,l.jsx)("div",{class:"citadela-block-articles-wrap",children:Array.from(Array(12),((e,t)=>(0,l.jsxs)("article",{class:"folder-card",children:[(0,l.jsx)("div",{class:"folder-header",children:(0,l.jsx)("div",{class:"folder-icon"})}),(0,l.jsx)("div",{class:"folder-content",children:(0,l.jsxs)("div",{class:"folder-content-wrap",children:[(0,l.jsx)("div",{class:"folder-title"}),(0,l.jsxs)("div",{class:"folder-description",children:[(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"})]})]})})]})))})})]})]})},save:()=>null});const{__:Ni}=wp.i18n,{Component:Ai}=wp.element,{Icon:Oi}=wp.components;class Hi extends Ai{render(){const{title:e=Ni("Feature is disabled","citadela-directory"),description:t="",pathText:a="",icon:i=!0}=this.props;return(0,l.jsx)("div",{className:classNames("feature-disabled-placeholder",i?"with-icon":null,t?"has-description":null),children:(0,l.jsxs)("div",{class:"inner-wrapper",children:[(0,l.jsx)("div",{class:"title",children:(0,l.jsx)("h4",{children:e})}),t&&(0,l.jsx)("div",{class:"description",children:(0,l.jsx)("p",{children:t})}),a&&(0,l.jsx)("div",{class:"path-text",children:(0,l.jsx)("strong",{children:(0,l.jsx)("small",{children:a})})})]})})}}const{__:Bi}=wp.i18n,{Component:Fi}=wp.element,{InspectorControls:Pi,BlockControls:Di,RichText:Li}=wp.blockEditor,{PanelBody:Mi,ToolbarGroup:Ri,ToolbarItem:$i,Icon:zi,ToggleControl:Ei,SelectControl:Vi,BaseControl:Ui,RadioControl:Gi,Button:Wi,ButtonGroup:Ji}=wp.components,qi=JSON.parse('{"apiVersion":1,"name":"citadela-directory/directory-advanced-filters","category":"citadela-directory-blocks","icon":"filter","attributes":{"in_search_form":{"type":"boolean","default":false},"advanced_header":{"type":"boolean","default":false},"advanced_header_opened":{"type":"boolean","default":true},"advanced_header_closed_on_mobile":{"type":"boolean","default":false},"layout":{"type":"string","default":"box"},"align":{"type":"string","default":"left"},"box_width":{"type":"string"},"title":{"type":"string","default":""},"hide_empty":{"type":"boolean","default":false},"hide_empty_checkbox":{"type":"boolean","default":false},"show_data":{"type":"string","default":"all"},"selected_inputs":{"type":"array","default":[]},"title_color":{"type":"string","default":""},"lines_color":{"type":"string","default":""},"labels_color":{"type":"string","default":""},"data_row_bg_color":{"type":"string","default":""},"filters_order":{"type":"array","default":[]},"active_filter_groups":{"type":"array","default":[]},"filter_operators":{"type":"object","default":[]},"show_group_title":{"type":"boolean","default":true},"show_submit_button":{"type":"boolean","default":true},"button_text":{"type":"string","default":"Filter"},"button_style":{"type":"string","default":"small-button"},"button_text_color":{"type":"string","default":""},"button_bg_color":{"type":"string","default":""},"button_border_radius":{"type":"number"},"lines_type":{"type":"string","default":"filter-group"},"header_text_color":{"type":"string","default":""},"header_bg_color":{"type":"string","default":""},"header_border_color":{"type":"string","default":""},"header_border_type":{"type":"string","default":"none"},"filters_submit_label":{"type":"string","default":"OK"},"filters_disable_label":{"type":"string","default":"Disable filters"}},"example":{},"editorScript":"citadela-directory-blocks"}'),{__:Xi}=wp.i18n,{registerBlockType:Yi}=wp.blocks,{name:Ki}=qi;Yi(Ki,{...qi,title:Xi("Listing Advanced Filters","citadela-directory"),description:Xi("Filters to specify results of displayed items.","citadela-directory"),edit:class extends Fi{constructor(){super(...arguments),this.updateSelectedInputs=this.updateSelectedInputs.bind(this),this.onMove=this.onMove.bind(this),this.onMoveBackward=this.onMoveBackward.bind(this),this.onMoveForward=this.onMoveForward.bind(this),this.getCurrentOrder=this.getCurrentOrder.bind(this),this.checkAvailableInput=this.checkAvailableInput.bind(this),this.onClickGroup=this.onClickGroup.bind(this),this.updateFiltersOperator=this.updateFiltersOperator.bind(this),this.item_extension_options=CitadelaDirectorySettings.options.item_extension,this.filtered_data=[],this.available_inputs=[],this.state={selected_group:""}}componentDidMount(){const{attributes:e,setAttributes:t}=this.props;_.isEqual(e.active_filter_groups,Object.keys(this.filtered_data))||t({active_filter_groups:Object.keys(this.filtered_data)}),e.show_submit_button&&e.in_search_form&&t({show_submit_button:!1})}componentDidUpdate(e,t){e.isSelected==this.props.isSelected||this.props.isSelected||this.setState({selected_group:""}),_.isEqual(e.attributes.active_filter_groups,Object.keys(this.filtered_data))||this.props.setAttributes({active_filter_groups:Object.keys(this.filtered_data)})}onClickGroup(e){this.setState({selected_group:e})}checkAvailableInput(e){const{selected_inputs:t}=this.props.attributes;return t.includes(e)&&this.available_inputs.includes(e)}updateFiltersOperator(e,t){const{attributes:a,setAttributes:l}=this.props,{filter_operators:i}=a;let s={...i};s[e]=t,l({filter_operators:s})}updateSelectedInputs(e,t,a){const{attributes:l,setAttributes:i}=this.props;let s=l.selected_inputs.map((e=>e));if(t)s.push(e);else{const t=s.indexOf(e);t>-1&&s.splice(t,1)}i({selected_inputs:s})}getCurrentOrder(){let e=[];return Object.keys(this.filtered_data).map(((t,a)=>{e[a]=t})),Object.values(e)}onMove(e,t){const{setAttributes:a}=this.props,l=this.getCurrentOrder();let i=[...l];i.splice(t,1,l[e]),i.splice(e,1,l[t]),a({filters_order:Object.values(i)})}onMoveForward(e){e!==Object.keys(this.getCurrentOrder()).length-1&&this.onMove(e,e+1)}onMoveBackward(e){0!==e&&this.onMove(e,e-1)}render(){const e="undefined"!=typeof CitadelaProSettings,{item_extension_options:t}=this,{attributes:a,setAttributes:i,name:s,isSelected:o}=this.props,{in_search_form:r,advanced_header:c,advanced_header_opened:n,advanced_header_closed_on_mobile:d,header_text_color:u,header_bg_color:h,header_border_color:g,header_border_type:b,show_group_title:m,filter_operators:y,filters_order:v,show_data:j,title:f,layout:k,align:C,box_width:w,title_color:T,lines_color:S,lines_type:_,labels_color:I,data_row_bg_color:N,show_submit_button:A,button_text:O,button_style:H,button_text_color:B,button_bg_color:F,button_border_radius:P}=a,{selected_group:D}=this.state,L=wp.blocks.getBlockType(s),M=0!=Object.keys(t).length,R=!!M&&t.enable;let $=M?t.inputs_group.inputs:{};this.available_inputs=Object.keys($).map(((e,t)=>e));let z=[],E=[];if(Object.keys($).map(((e,t)=>{if($[e].use_as_filter){let t=$[e];if("checkbox"==t.type){const a=void 0===t.checkbox_filters_group_name||""==t.checkbox_filters_group_name?Bi("Filters","citadela-directory"):t.checkbox_filters_group_name;void 0===z[a]&&(z[a]=[]),z[a][e]=t}else"select"!=t.type&&"citadela_multiselect"!=t.type||(E[e]=t)}})),this.filtered_data=[],Object.keys(z).map(((e,t)=>{let a=[];a.filters_group_name=e,a.filters_group_type="checkbox",a.filters=[],Object.keys(z[e]).map(((t,l)=>{let i=!1;"all"==j?i=!0:"selected"==j?this.checkAvailableInput(t)&&(i=!0):"hide_selected"==j&&(this.checkAvailableInput(t)||(i=!0)),i&&(a.filters[t]=[],a.filters[t].key=t,a.filters[t].label=z[e][t].label)}));const l=a.filters_group_name+"_"+a.filters_group_type;Object.keys(a.filters).length&&(this.filtered_data[l]=a)})),Object.keys(E).map(((e,t)=>{let a=[];a.filters_group_name=E[e].label,a.filters_group_type=E[e].type,a.filters=[];let l=!1;"all"==j?l=!0:"selected"==j?this.checkAvailableInput(e)&&(l=!0):"hide_selected"==j&&(this.checkAvailableInput(e)||(l=!0)),l&&Object.keys(E[e].choices).map(((t,l)=>{a.filters[t]=[],a.filters[t].key=t,a.filters[t].label=E[e].choices[t]}));const i=e+"_"+a.filters_group_type;Object.keys(a.filters).length&&(this.filtered_data[i]=a)})),Object.keys(v).length){let e=this.filtered_data,t=[];Object.keys(v).map((a=>{void 0!==e[v[a]]&&(t[v[a]]=e[v[a]],delete e[v[a]])})),this.filtered_data=t,Object.keys(e).length>0&&(this.filtered_data={...this.filtered_data,...e})}let V={...!(!e||!T)&&{color:`${T}`}},U={};e&&c&&(delete V.color,U={...!!u&&{color:`${u}`},...!!h&&{backgroundColor:`${h}`},...!!g&&{borderColor:`${g}`}});const G={...!(!e||!T)&&{color:`${T}`},...!(!e||"filter-heading"!=_||!S)&&{borderColor:`${S}`}},W={...!(!e||!I)&&{color:`${I}`}},J={...!("box"!=k||!w)&&{flexBasis:`${w}px`},...!(!e||"filter-group"!=_||!S)&&{borderColor:`${S}`},...!(!e||!N)&&{backgroundColor:`${N}`}},q=Object.keys(this.filtered_data).map(((e,t)=>{let a=this.filtered_data[e].filters_group_name,i=Object.keys(this.filtered_data[e].filters).map((t=>(0,l.jsx)("div",{class:"filter-container",children:(0,l.jsx)("div",{class:"filter-label",style:W||!1,children:this.filtered_data[e].filters[t].label})})));const s=0==t,r=Object.keys(this.filtered_data).length-1==t;return 0==i.length?"":(0,l.jsxs)("div",{className:classNames("data-row",o&&D==e?"selected":null),style:J||!1,onClick:()=>this.onClickGroup(e),children:[o&&D==e&&(0,l.jsxs)(Ji,{className:"avanced-filters-navigation",children:[(0,l.jsx)(Wi,{className:"backward",icon:"box"==k?"arrow-left-alt2":"arrow-up-alt2",onClick:s?void 0:()=>{this.onMoveBackward(t)},label:Bi("Move backward","citadela-directory"),"aria-disabled":s}),(0,l.jsx)(Wi,{className:"forward",icon:"box"==k?"arrow-right-alt2":"arrow-down-alt2",onClick:r?void 0:()=>{this.onMoveForward(t)},label:Bi("Move forward","citadela-directory"),"aria-disabled":r})]}),m&&(0,l.jsx)("div",{class:"filters-heading",style:G||!1,children:a}),(0,l.jsx)("div",{class:"filters-wrapper",children:i}),o&&D==e?(0,l.jsx)("div",{class:"logical-operator-component",children:(0,l.jsx)(Vi,{label:Bi("Logical operator","citadela-directory"),help:"select"==this.filtered_data[e].filters_group_type?Bi("Select type input cannot use AND operator.","citadela-directory"):"AND"==y[e]?Bi("Results must include all selected filters.","citadela-directory"):Bi("Results include at least one of selected filters.","citadela-directory"),value:y[e]?y[e]:"OR",options:[{label:"OR",value:"OR"},{label:"AND",value:"AND"}],onChange:t=>{this.updateFiltersOperator(e,t)},disabled:"select"==this.filtered_data[e].filters_group_type})}):(0,l.jsx)("div",{class:"logical-operator-component",children:(0,l.jsxs)("div",{class:"info-label",children:[Bi("Logical operator","citadela-directory"),(0,l.jsxs)("span",{class:"operator",children:[" ",y[e]?y[e]:"OR"]})]})})]})})),X=B?{color:B}:{},Y={...F?{backgroundColor:F}:{},...P>=0?{borderRadius:`${P}px`}:{}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Di,{children:(0,l.jsxs)(Ri,{children:[(0,l.jsx)($i,{children:e=>(0,l.jsx)(wl,{value:C,onChange:e=>i({align:e}),leftLabel:Bi("Align Left","citadela-directory"),centerLabel:Bi("Align Center","citadela-directory"),rightLabel:Bi("Align Right","citadela-directory"),toggleProps:e})}),!r&&(0,l.jsx)($i,{children:e=>(0,l.jsx)(ee,{allowedLayouts:["list","box"],value:k,onChange:e=>i({layout:e}),toggleProps:e})})]})},"controls"),(0,l.jsxs)(Pi,{children:[(0,l.jsxs)(Mi,{title:Bi("Show data","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:[(0,l.jsx)(Vi,{label:Bi("Show data","citadela-directory"),value:j,options:[{label:Bi("All filters","citadela-directory"),value:"all"},{label:Bi("Show selected filters","citadela-directory"),value:"selected"},{label:Bi("Hide selected filters","citadela-directory"),value:"hide_selected"}],onChange:e=>{i({show_data:e})}}),"all"!==j&&(0,l.jsxs)(l.Fragment,{children:[Object.keys(z).length>0&&(0,l.jsx)("div",{class:"citadela-label-separator",children:Bi("Single checkbox filters")}),Object.keys(z).map((e=>{const t=`${e}_checkbox`,a=Object.keys(z[e]).map((a=>{const i=this.checkAvailableInput(a);return(0,l.jsx)(Ei,{label:z[e][a].label,checked:i,onChange:e=>{this.updateSelectedInputs(a,e,t)}})}));return(0,l.jsx)(l.Fragment,{children:a})})),Object.keys(E).length>0&&(0,l.jsx)("div",{class:"citadela-label-separator",children:Bi("Selection filters")}),Object.keys(E).map((e=>{const t=E[e].type,a=`${e}_${t}`,i=this.checkAvailableInput(e);return(0,l.jsx)(Ei,{label:E[e].label,checked:i,onChange:t=>{this.updateSelectedInputs(e,t,a)}})}))]})]}),(0,l.jsxs)(Mi,{title:Bi("Options","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[!r&&(0,l.jsx)(Ei,{label:Bi("Advanced header","citadela-directory"),help:Bi("Collapsible filters section.","citadela-directory"),checked:c,onChange:e=>i({advanced_header:e})}),c&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Ei,{label:Bi("Opened by default","citadela-directory"),help:Bi("Header opened or closed by default.","citadela-directory"),checked:n,onChange:e=>i({advanced_header_opened:e})}),n&&(0,l.jsx)(Ei,{label:Bi("Closed on mobile","citadela-directory"),help:Bi("Keep header closed by default on mobile.","citadela-directory"),checked:d,onChange:e=>i({advanced_header_closed_on_mobile:e})})]}),(0,l.jsx)(Ei,{label:Bi("Show filters group title","citadela-directory"),checked:m,onChange:e=>i({show_group_title:e})}),"box"==k&&(0,l.jsx)(x,{label:Bi("Box width","citadela-directory"),rangeValue:w,onChange:e=>{i({box_width:e})},min:150,max:500,initial:200,allowReset:!0,allowNoValue:!0}),!r&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Ei,{label:Bi("Show submit filter button","citadela-directory"),help:A?"":Bi("Make sure the submit button is enabled at least in one of Listing Advanced Filters blocks on this page."),checked:A,onChange:e=>i({show_submit_button:e})}),A&&(0,l.jsx)(Ui,{label:Bi("Button style","citadela-directory"),children:(0,l.jsx)(Gi,{selected:H,options:[{label:Bi("Small button","citadela-directory"),value:"small-button"},{label:Bi("Large button","citadela-directory"),value:"large-button"}],onChange:e=>{i({button_style:e})}})})]})]}),e&&(0,l.jsxs)(l.Fragment,{children:[c&&(0,l.jsxs)(Mi,{title:Bi("Advanced Header Design","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(p,{label:Bi("Text color","citadela-directory"),color:u,onChange:e=>{i({header_text_color:e})},allowReset:!0}),(0,l.jsx)(p,{label:Bi("Background color","citadela-directory"),color:h,onChange:e=>{i({header_bg_color:e})},allowReset:!0}),(0,l.jsx)(p,{label:Bi("Border color","citadela-directory"),color:g,onChange:e=>{i({header_border_color:e})},allowReset:!0}),(0,l.jsx)(Vi,{label:Bi("Border style","citadela-directory"),value:b,options:[{label:Bi("No lines","citadela-directory"),value:"none"},{label:Bi("Line under heading","citadela-directory"),value:"bottom"},{label:Bi("Border around heading","citadela-directory"),value:"full"}],onChange:e=>{i({header_border_type:e})}})]}),(0,l.jsxs)(Mi,{title:Bi("Filters Design","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(p,{label:Bi("Filters background color","citadela-directory"),color:N,onChange:e=>{i({data_row_bg_color:e})}}),(0,l.jsx)(p,{label:Bi("Title color","citadela-directory"),color:T,onChange:e=>{i({title_color:e})}}),(0,l.jsx)(p,{label:Bi("Label color","citadela-directory"),color:I,onChange:e=>{i({labels_color:e})}}),(0,l.jsx)(Vi,{label:Bi("Lines decoration","citadela-directory"),value:_,options:[{label:Bi("No lines","citadela-directory"),value:"none"},{label:Bi("Line under heading","citadela-directory"),value:"filter-heading"},{label:Bi("Border around filter group","citadela-directory"),value:"filter-group"}],onChange:e=>{i({lines_type:e})}}),"none"!=_&&(0,l.jsx)(p,{label:Bi("Lines color","citadela-directory"),color:S,onChange:e=>{i({lines_color:e})}}),A&&!r&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p,{label:Bi("Button text color","citadela-directory"),color:B,onChange:e=>{i({button_text_color:e})},allowReset:!0,disableAlpha:!0}),(0,l.jsx)(p,{label:Bi("Button background color","citadela-directory"),color:F,onChange:e=>{i({button_bg_color:e})},allowReset:!0}),(0,l.jsx)(x,{label:Bi("Button border radius","citadela-directory"),rangeValue:P,onChange:e=>{i({button_border_radius:e})},min:0,max:50,initial:0,allowReset:!0,allowNoValue:!0})]})]})]})]}),(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks","ctdl-directory-advanced-filters",a.className,`${k}-layout`,`align-${C}`,""==f?"no-header-text":null,m?null:"hidden-filter-group-title",c?"advanced-header":"simple-header",c&&n?"opened":null,c&&n&&d?"closed-on-mobile":null,e&&c&&u?"custom-header-text-color":null,e&&c&&h?"custom-header-background-color":null,e&&c&&g?"custom-header-border-color":null,e&&c?`header-border-type-${b}`:null,e?`lines-type-${_}`:null,e&&S?"custom-lines-color":null,e&&T?"custom-title-color":null,e&&I?"custom-label-color":null,e&&N?"custom-data-background-color":null,"box"==k&&w?"custom-box-width":null,A?"has-submit-button":null,R?null:"feature-disabled"),children:[(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(zi,{icon:L.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:L.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:L.description})]})]}),R?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{class:"citadela-block-header",style:U||!1,children:[(0,l.jsx)(Li,{tagName:"h3",value:f,onChange:e=>i({title:e}),placeholder:L.title,keepPlaceholderOnFocus:!0,allowedFormats:[],style:V||!1}),c&&(0,l.jsx)("div",{class:"header-toggle",children:(0,l.jsx)("span",{class:"toggle-arrow"})})]}),(0,l.jsx)("div",{class:"citadela-block-articles",children:(0,l.jsx)("div",{class:"citadela-block-articles-wrap",children:0==Object.keys(this.filtered_data).length?Bi("There are no filters to show.","citadela-directory"):(0,l.jsx)(l.Fragment,{children:q})})}),A&&!r&&(0,l.jsx)("div",{className:classNames("submit-button-wrapper",`${H}-style`,e&&B?"custom-text-color":null,e&&F?"custom-background-color":null,e&&P?"custom-border-radius":null),children:(0,l.jsx)("div",{class:"submit-button",style:Y,children:(0,l.jsx)(Li,{tagName:"span",className:"button-text",placeholder:Bi("Filter","citadela-directory"),value:O,onChange:e=>i({button_text:e}),keepPlaceholderOnFocus:!0,allowedFormats:["core/bold","core/italic"],style:X})})})]}):(0,l.jsx)(Hi,{description:Bi("Enable and insert inputs available for filters via menu","citadela-directory"),pathText:Bi("Citadela Listing > Item Extension","citadela-directory")})]})]})}},save:()=>null});const{Component:Qi}=wp.element,{__:Zi}=wp.i18n,{InspectorControls:es,RichText:ts,InnerBlocks:as}=wp.blockEditor,{SelectControl:ls,RadioControl:is,PanelBody:ss,Icon:os}=wp.components,rs=JSON.parse('{"apiVersion":1,"name":"citadela-directory/directory-membership-content","category":"citadela-directory-blocks","icon":"lock","attributes":{"title":{"type":"string","default":""},"membership":{"type":"string","default":"0"},"contentFor":{"type":"string","default":"non-membership"}},"example":{},"editorScript":"citadela-directory-blocks"}'),{__:cs}=wp.i18n,{registerBlockType:ns}=wp.blocks,{InnerBlocks:ds}=wp.blockEditor,{name:ps}=rs;ns(ps,{...rs,title:cs("Listing Membership Content","citadela-directory"),description:cs("Displays content only for users with active membership, or only for visitors without membership.","citadela-directory"),edit:class extends Qi{constructor(){super(...arguments)}render(){const{attributes:e,setAttributes:t,name:a,isSelected:i}=this.props,{contentFor:s,membership:o}=e,r=wp.blocks.getBlockType(a),c=CitadelaDirectorySettings.citadelaSubscriptionProducts?CitadelaDirectorySettings.citadelaSubscriptionProducts:[];let n=c.map((e=>({label:e.post_title,value:e.id})));return n.unshift({label:Zi("Any active subscription","citadela-directory"),value:"0"}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(es,{children:(0,l.jsxs)(ss,{title:Zi("Options","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:[(0,l.jsx)(is,{selected:s,label:Zi("Content visible for:","citadela-directory"),options:[{label:Zi("Non-membership visitors","citadela-directory"),value:"non-membership"},{label:Zi("Users with active membership","citadela-directory"),value:"active-membership"}],onChange:e=>{t({contentFor:e})}}),"active-membership"==s&&(0,l.jsx)(l.Fragment,{children:c.length?(0,l.jsx)(ls,{label:Zi("WooCommerce subscriptions","citadela-directory"),value:""==o?c[0].id:o,options:n,onChange:e=>{t({membership:e})}}):Zi("There are no available subscriptions. Add some, please.","citadela-directory")})]})},"inspector"),(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks","ctdl-directory-membership-content",e.className),children:[(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(os,{icon:r.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:r.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:r.description})]})]}),(0,l.jsx)("div",{class:"citadela-block-header",children:(0,l.jsx)(ts,{tagName:"h3",value:e.title,onChange:e=>t({title:e}),placeholder:r.title,keepPlaceholderOnFocus:!0,allowedFormats:[]})}),(0,l.jsx)(as,{renderAppender:()=>(0,l.jsx)(as.ButtonBlockAppender,{})})]})]})}},save:()=>(0,l.jsx)(ds.Content,{})});const us=JSON.parse('{"apiVersion":1,"name":"citadela-directory/item-contact-details","category":"citadela-directory-blocks","icon":"admin-home","attributes":{"title":{"type":"string","default":""}},"example":{},"editorScript":"citadela-directory-blocks"}'),{__:hs,setLocaleData:gs}=wp.i18n,{registerBlockType:bs}=wp.blocks,{RichText:ms}=wp.blockEditor,{Fragment:ys}=wp.element,{Icon:xs}=wp.components,{name:vs}=us;bs(vs,{...us,title:hs("Item Contact Details","citadela-directory"),description:hs("Displays address, phone number and other contact information of specific listing item.","citadela-directory"),edit:({className:e,attributes:t,setAttributes:a,name:i})=>{const s=wp.blocks.getBlockType(i);return(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks ctdl-item-contact-details",t.className),children:[(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(xs,{icon:s.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:s.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:s.description})]})]}),(0,l.jsx)("div",{class:"citadela-block-header",children:(0,l.jsx)(ms,{tagName:"h3",value:t.title,onChange:e=>a({title:e}),placeholder:s.title,keepPlaceholderOnFocus:!0,allowedFormats:[]})}),(0,l.jsx)("div",{class:"citadela-block-articles",children:(0,l.jsxs)("div",{class:"citadela-block-articles-wrap",children:[(0,l.jsxs)("div",{class:"cd-info cd-address",children:[(0,l.jsx)("div",{class:"cd-label"}),(0,l.jsx)("div",{class:"cd-data"})]}),(0,l.jsxs)("div",{class:"cd-info cd-gps",children:[(0,l.jsx)("div",{class:"cd-label"}),(0,l.jsx)("div",{class:"cd-data"})]}),(0,l.jsxs)("div",{class:"cd-info cd-phone",children:[(0,l.jsx)("div",{class:"cd-label"}),(0,l.jsx)("div",{class:"cd-data"})]}),(0,l.jsxs)("div",{class:"cd-info cd-mail",children:[(0,l.jsx)("div",{class:"cd-label"}),(0,l.jsx)("div",{class:"cd-data"})]}),(0,l.jsxs)("div",{class:"cd-info cd-web",children:[(0,l.jsx)("div",{class:"cd-label"}),(0,l.jsx)("div",{class:"cd-data"})]})]})})]})},save:()=>null});const{__:js}=wp.i18n,{Component:fs,Fragment:ks}=wp.element,{TextControl:Cs,TextareaControl:ws,SelectControl:Ts,BaseControl:Ss,PanelBody:_s,ToggleControl:Is}=wp.components,{URLInput:Ns,MediaUpload:As}=wp.blockEditor;class Os extends fs{render(){const{setAttributes:e}=this.props,{emailFromName:t,emailFromAddress:a,emailMessage:i,labelName:s,labelEmail:o,labelSubject:r,labelMessage:c,labelSendButton:n,helpName:d,helpEmail:p,helpSubject:u,helpMessage:h,notificationSuccess:g,notificationValidationError:b,notificationServerError:m}=this.props.attributes;return(0,l.jsxs)(ks,{children:[(0,l.jsxs)(_s,{title:js("Email settings","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:[(0,l.jsx)(Ss,{id:"emailFromName",label:js("Sender Name","citadela-directory"),help:js("Name of sender displayed in received email.","citadela-directory"),children:(0,l.jsx)(Cs,{id:"emailFromName",type:"text",value:t,onChange:t=>{e({emailFromName:t})}})}),(0,l.jsx)(Ss,{id:"emailFromAddress",label:js("Sender Email","citadela-directory"),help:js("Email used as sender in email, make sure the email address corresponds with your website domain.","citadela-directory"),children:(0,l.jsx)(Cs,{id:"emailFromAddress",type:"text",value:a,onChange:t=>{e({emailFromAddress:t})}})}),(0,l.jsx)(Ss,{id:"emailMessage",label:js("Email Message","citadela-directory"),help:js("Text of email message. Available are variables: {user-name} {user-email} {user-message}","citadela-directory"),children:(0,l.jsx)(ws,{id:"emailMessage",value:i,onChange:t=>{e({emailMessage:t})}})})]}),(0,l.jsxs)(_s,{title:js("Input labels","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(Ss,{id:"labelName",label:js("Name Label","citadela-directory"),help:js("Label used for Name input.","citadela-directory"),children:(0,l.jsx)(Cs,{id:"labelName",type:"text",value:s,onChange:t=>{e({labelName:t})}})}),(0,l.jsx)(Ss,{id:"labelEmail",label:js("Email Label","citadela-directory"),help:js("Label used for Email input.","citadela-directory"),children:(0,l.jsx)(Cs,{id:"labelEmail",type:"text",value:o,onChange:t=>{e({labelEmail:t})}})}),(0,l.jsx)(Ss,{id:"labelSubject",label:js("Subject Label","citadela-directory"),help:js("Label used for Subject input.","citadela-directory"),children:(0,l.jsx)(Cs,{id:"labelSubject",type:"text",value:r,onChange:t=>{e({labelSubject:t})}})}),(0,l.jsx)(Ss,{id:"labelMessage",label:js("Message Label","citadela-directory"),help:js("Label used for Message textarea.","citadela-directory"),children:(0,l.jsx)(Cs,{id:"labelMessage",type:"text",value:c,onChange:t=>{e({labelMessage:t})}})}),(0,l.jsx)(Ss,{id:"labelSendButton",label:js("Send Button Text","citadela-directory"),help:js("Text displayed on Send Button.","citadela-directory"),children:(0,l.jsx)(Cs,{id:"labelSendButton",type:"text",value:n,onChange:t=>{e({labelSendButton:t})}})})]}),(0,l.jsxs)(_s,{title:js("Help texts","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)("p",{className:"citadela-help-text",children:js("Useful to show additional help text or GDPR text with each input in the form.","citadela-directory")}),(0,l.jsx)(Ss,{id:"helpName",label:js("Name Help","citadela-directory"),help:js("Help text displayed with Name input.","citadela-directory"),children:(0,l.jsx)(Cs,{id:"helpName",type:"text",value:d,onChange:t=>{e({helpName:t})}})}),(0,l.jsx)(Ss,{id:"helpEmail",label:js("Email Help","citadela-directory"),help:js("Help text displayed with Email input.","citadela-directory"),children:(0,l.jsx)(Cs,{id:"helpEmail",type:"text",value:p,onChange:t=>{e({helpEmail:t})}})}),(0,l.jsx)(Ss,{id:"helpSubject",label:js("Subject Help","citadela-directory"),help:js("Help text displayed with Subject input.","citadela-directory"),children:(0,l.jsx)(Cs,{id:"helpSubject",type:"text",value:u,onChange:t=>{e({helpSubject:t})}})}),(0,l.jsx)(Ss,{id:"helpMessage",label:js("Message Help","citadela-directory"),help:js("Help text displayed with Message input.","citadela-directory"),children:(0,l.jsx)(Cs,{id:"helpMessage",type:"text",value:h,onChange:t=>{e({helpMessage:t})}})})]}),(0,l.jsxs)(_s,{title:js("Notification messages","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(Ss,{id:"notificationSuccess",label:js("Success Message","citadela-directory"),help:js("Message displayed when the form was sent succesfully.","citadela-directory"),children:(0,l.jsx)(Cs,{id:"notificationSuccess",type:"text",value:g,onChange:t=>{e({notificationSuccess:t})}})}),(0,l.jsx)(Ss,{id:"notificationValidationError",label:js("Validation Error Message","citadela-directory"),help:js("Message displayed when the form validation failed.","citadela-directory"),children:(0,l.jsx)(Cs,{id:"notificationValidationError",type:"text",value:b,onChange:t=>{e({notificationValidationError:t})}})}),(0,l.jsx)(Ss,{id:"notificationServerError",label:js("Server Error Message","citadela-directory"),help:js("Message displayed when the form sending failed because of problem on the server side.","citadela-directory"),children:(0,l.jsx)(Cs,{id:"notificationServerError",type:"text",value:m,onChange:t=>{e({notificationServerError:t})}})})]})]})}}const{__:Hs}=wp.i18n,{Fragment:Bs}=wp.element,{RichText:Fs,BlockControls:Ps,InspectorControls:Ds}=wp.blockEditor,{Icon:Ls}=wp.components,Ms=JSON.parse('{"apiVersion":1,"name":"citadela-directory/item-contact-form","category":"citadela-directory-blocks","icon":"editor-table","attributes":{"emailFromName":{"type":"string","default":""},"emailFromAddress":{"type":"string","default":""},"emailMessage":{"type":"string","default":"{user-name} with email {user-email} wrote the following message: {user-message}"},"labelName":{"type":"string","default":"Your Name"},"labelEmail":{"type":"string","default":"Your Email"},"labelSubject":{"type":"string","default":"Subject of message"},"labelMessage":{"type":"string","default":"Your message..."},"labelSendButton":{"type":"string","default":"Send message"},"helpName":{"type":"string","default":""},"helpEmail":{"type":"string","default":""},"helpSubject":{"type":"string","default":""},"helpMessage":{"type":"string","default":""},"notificationSuccess":{"type":"string","default":"Thank you for your message!"},"notificationValidationError":{"type":"string","default":"Input fields contain invalid values, check the form again, please."},"notificationServerError":{"type":"string","default":"Server encountered an error. If problem persists, contact website administrator, please."},"title":{"type":"string","default":""}},"example":{},"editorScript":"citadela-directory-blocks"}'),{__:Rs,setLocaleData:$s}=wp.i18n,{registerBlockType:zs}=wp.blocks,{name:Es}=Ms;zs(Es,{...Ms,title:Rs("Item Contact Form","citadela-directory"),description:Rs("Displays contact form which send email directly to email address of specific listing item.","citadela-directory"),edit:function({attributes:e,setAttributes:t,className:a,name:i}){const{labelName:s,labelEmail:o,labelSubject:r,labelMessage:c,labelSendButton:n,helpName:d,helpEmail:p,helpSubject:u,helpMessage:h}=e,g=wp.blocks.getBlockType(i);return(0,l.jsxs)(Bs,{children:[(0,l.jsx)(Ds,{children:(0,l.jsx)(Os,{attributes:e,setAttributes:t})},"inspector"),(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks ctdl-item-contact-form",e.className),children:[(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(Ls,{icon:g.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:g.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:g.description})]})]}),(0,l.jsx)("div",{class:"citadela-block-header",children:(0,l.jsx)(Fs,{tagName:"h3",value:e.title,onChange:e=>t({title:e}),placeholder:g.title,keepPlaceholderOnFocus:!0,allowedFormats:[]})}),(0,l.jsx)("div",{class:"citadela-block-form",children:(0,l.jsxs)("div",{class:"contact-form",children:[(0,l.jsxs)("div",{class:"data-type-1",children:[(0,l.jsxs)("div",{class:"input-container name",children:[(0,l.jsxs)("div",{class:"input-data",children:[(0,l.jsx)("div",{class:"label",children:s}),(0,l.jsx)("div",{class:"input"})]}),(0,l.jsx)("div",{class:"input-help",children:d})]}),(0,l.jsxs)("div",{class:"input-container email",children:[(0,l.jsxs)("div",{class:"input-data",children:[(0,l.jsx)("div",{class:"label",children:o}),(0,l.jsx)("div",{class:"input"})]}),(0,l.jsx)("div",{class:"input-help",children:p})]}),(0,l.jsxs)("div",{class:"input-container subject",children:[(0,l.jsxs)("div",{class:"input-data",children:[(0,l.jsx)("div",{class:"label",children:r}),(0,l.jsx)("div",{class:"input"})]}),(0,l.jsx)("div",{class:"input-help",children:u})]})]}),(0,l.jsxs)("div",{class:"data-type-2",children:[(0,l.jsxs)("div",{class:"input-container message",children:[(0,l.jsxs)("div",{class:"input-data",children:[(0,l.jsx)("div",{class:"label",children:c}),(0,l.jsx)("div",{class:"input"})]}),(0,l.jsx)("div",{class:"input-help",children:h})]}),(0,l.jsx)("div",{class:"input-container sf-button",children:(0,l.jsx)("div",{class:"input-data",children:(0,l.jsx)("span",{class:"submit",children:n})})})]})]})})]})]})},save:()=>null});const Vs=JSON.parse('{"apiVersion":1,"name":"citadela-directory/item-content","category":"citadela-directory-blocks","icon":"text","attributes":{},"example":{},"editorScript":"citadela-directory-blocks"}'),{__:Us,setLocaleData:Gs}=wp.i18n,{registerBlockType:Ws}=wp.blocks,{Icon:Js}=wp.components,{name:qs}=Vs;Ws(qs,{...Vs,title:Us("Item Content","citadela-directory"),description:Us("Displays content written in visual editor of specific listing item.","citadela-directory"),icon:"text",category:"citadela-directory-blocks",edit:({attributes:e,name:t})=>{const a=wp.blocks.getBlockType(t);return(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks ctdl-item-content",e.className),children:[(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(Js,{icon:a.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:a.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:a.description})]})]}),(0,l.jsxs)("div",{class:"item-content",children:[(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"})]})]})},save:()=>null});const{__:Xs,setLocaleData:Ys}=wp.i18n,{Component:Ks,createRef:Qs,useState:Zs}=wp.element,{Icon:eo,PanelBody:to,ToggleControl:ao,ToolbarGroup:lo,ToolbarItem:io,BaseControl:so,SelectControl:oo,TextControl:ro}=wp.components,{InspectorControls:co,BlockControls:no}=wp.blockEditor,{getBlockName:po,getBlockParents:uo}=wp.data.select("core/block-editor"),ho=({attributes:e,setAttributes:t})=>{const{breakpointMobile:a}=e,[i,s]=Zs(a);return(0,l.jsx)(so,{label:Xs("Mobile width breakpoint","citadela-directory"),help:Xs("Responsive options applied under screen width","citadela-directory")+` ${a}px`,id:"mobile-width",children:(0,l.jsx)(ro,{type:"number",value:i,onChange:e=>{let a=e;s(a),""==e&&(a=600),t({breakpointMobile:a?parseInt(a):a})},step:1})})},go=({attributes:e,setAttributes:t})=>{const{unit:a,height:i}=e,[s,o]=Zs(i);let r=[];r.px=400,r.vh=100,r.vw=30;let c=1;return"px"!=a&&(c=.1),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(so,{label:Xs("Height unit","citadela-directory"),children:(0,l.jsx)(oo,{value:a,options:[{label:"px",value:"px"},{label:"vh",value:"vh"},{label:"vw",value:"vw"}],onChange:e=>{o(r[e]),t({unit:e,height:r[e]})}})}),(0,l.jsx)(so,{label:Xs("Image height","citadela-directory")+(void 0!==i?`: ${i}${a}`:": "+Xs("default image size","citadela-directory")),children:(0,l.jsx)(ro,{type:"number",value:s,step:c,onChange:e=>{let l=e;o(l),""==e&&(o(""),l=void 0),t("px"!=a?{height:l?parseFloat(l):l}:{height:l?parseInt(l):l})}})})]})},bo=({attributes:e,setAttributes:t})=>{const{unitMobile:a,heightMobile:i}=e,[s,o]=Zs(i);let r=[];r.px=400,r.vh=100,r.vw=30;let c=1;return"px"!=a&&(c=.1),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(so,{label:Xs("Height unit","citadela-directory"),children:(0,l.jsx)(oo,{value:a,options:[{label:"px",value:"px"},{label:"vh",value:"vh"},{label:"vw",value:"vw"}],onChange:e=>{o(r[e]),t({unitMobile:e,heightMobile:r[e]})}})}),(0,l.jsx)(so,{label:Xs("Image height","citadela-directory")+(void 0!==i?`: ${i}${a}`:": "+Xs("default image size","citadela-directory")),children:(0,l.jsx)(ro,{type:"number",value:s,step:c,onChange:e=>{let l=e;o(l),""==e&&(o(""),l=void 0),t("px"!=a?{heightMobile:l?parseFloat(l):l}:{heightMobile:l?parseInt(l):l})}})})]})},mo=({attributes:e,setAttributes:t})=>{const{minUnit:a,minHeight:i}=e,[s,o]=Zs(i);let r=[];r.px=250,r.vh=100,r.vw=30;let c=1;return"px"!=a&&(c=.1),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(so,{label:Xs("Minimum height unit","citadela-directory"),children:(0,l.jsx)(oo,{value:a,options:[{label:"px",value:"px"},{label:"vh",value:"vh"},{label:"vw",value:"vw"}],onChange:e=>{o(r[e]),t({minUnit:e,minHeight:r[e]})}})}),(0,l.jsx)(so,{label:Xs("Minimum image height","citadela-directory")+(void 0!==i?`: ${i}${a}`:""),children:(0,l.jsx)(ro,{type:"number",value:s,step:c,onChange:e=>{let l=e;o(l),""==e&&(o(""),l=r[a]),t("px"!=a?{minHeight:l?parseFloat(l):l}:{minHeight:l?parseInt(l):l})}})})]})},yo=({attributes:e,setAttributes:t})=>{const{minUnitMobile:a,minHeightMobile:i}=e,[s,o]=Zs(i);let r=[];r.px=250,r.vh=100,r.vw=30;let c=1;return"px"!=a&&(c=.1),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(so,{label:Xs("Minimum height unit","citadela-directory"),children:(0,l.jsx)(oo,{value:a,options:[{label:"px",value:"px"},{label:"vh",value:"vh"},{label:"vw",value:"vw"}],onChange:e=>{o(r[e]),t({minUnitMobile:e,minHeightMobile:r[e]})}})}),(0,l.jsx)(so,{label:Xs("Minimum image height","citadela-directory")+(void 0!==i?`: ${i}${a}`:""),children:(0,l.jsx)(ro,{type:"number",value:s,step:c,onChange:e=>{let l=e;o(l),""==e&&(o(""),l=r[a]),t("px"!=a?{minHeightMobile:l?parseFloat(l):l}:{minHeightMobile:l?parseInt(l):l})}})})]})},xo=JSON.parse('{"apiVersion":1,"name":"citadela-directory/item-featured-image","category":"citadela-directory-blocks","icon":"format-image","attributes":{"align":{"type":"string","default":"center"},"size":{"type":"string","default":"full"},"inPopup":{"type":"boolean","default":false},"objectPosition":{"type":"string","default":"center center"},"inColumn":{"type":"boolean","default":false},"coverHeight":{"type":"boolean","default":false},"coverHeightMobile":{"type":"boolean","default":false},"unit":{"type":"string","default":"px"},"unitMobile":{"type":"string","default":"px"},"minUnit":{"type":"string","default":"px"},"minUnitMobile":{"type":"string","default":"px"},"height":{"type":"number"},"heightMobile":{"type":"number"},"minHeight":{"type":"number","default":250},"minHeightMobile":{"type":"number","default":250},"useResponsiveOptions":{"type":"boolean","default":false},"breakpointMobile":{"type":"number","default":600}},"example":{},"editorScript":"citadela-directory-blocks"}'),{__:vo,setLocaleData:jo}=wp.i18n,{registerBlockType:fo}=wp.blocks,{name:ko}=xo;fo(ko,{...xo,title:vo("Item Featured Image","citadela-directory"),description:vo("Displays main item image of specific listing item.","citadela-directory"),edit:class extends Ks{constructor(){super(...arguments),this.isParentColumn=this.isParentColumn.bind(this),this.updateMainBlockDivWrapper=this.updateMainBlockDivWrapper.bind(this),this.blockRef=Qs(),this.state={responsiveTab:"desktop"}}componentDidMount(){const{attributes:e,setAttributes:t}=this.props,a=this.isParentColumn();e.inColumn!==a&&t({inColumn:a}),this.updateMainBlockDivWrapper()}componentDidUpdate(){this.updateMainBlockDivWrapper()}isParentColumn(){const e=uo(this.props.clientId);return e.length>0&&"core/column"===po(e[e.length-1])}updateMainBlockDivWrapper(){const{coverHeight:e,coverHeightMobile:t,inColumn:a}=this.props.attributes;let l=this.blockRef.current.parentNode;const i="desktop"==this.state.responsiveTab?e:t;a&&i?l.dataset.coverHeight="true":delete l.dataset.coverHeight}render(){const{attributes:e,setAttributes:t,name:a,isSelected:i}=this.props,{size:s,inPopup:o,align:r,coverHeight:c,coverHeightMobile:n,unit:d,unitMobile:p,minUnit:u,minUnitMobile:h,height:g,heightMobile:b,minHeight:m,minHeightMobile:y,useResponsiveOptions:x,inColumn:v,objectPosition:j}=e,f=wp.blocks.getBlockType(a);let k="";(!x||x&&"desktop"==this.state.responsiveTab)&&(k=(0,l.jsxs)(l.Fragment,{children:[v&&(0,l.jsx)(ao,{label:Xs("Cover column height","citadela-directory"),help:Xs("Works when block is the only block in a column.","citadela-directory"),checked:c,onChange:e=>{t({coverHeight:e})}}),(!v||v&&!c)&&(0,l.jsx)(go,{attributes:e,setAttributes:t}),v&&c&&(0,l.jsx)(mo,{attributes:e,setAttributes:t})]})),x&&"mobile"==this.state.responsiveTab&&(k=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ho,{attributes:e,setAttributes:t}),v&&(0,l.jsx)(ao,{label:Xs("Cover column height","citadela-directory"),help:Xs("Works when block is the only block in a column.","citadela-directory"),checked:n,onChange:e=>{t({coverHeightMobile:e})}}),(!v||v&&!n)&&(0,l.jsx)(bo,{attributes:e,setAttributes:t}),v&&n&&(0,l.jsx)(yo,{attributes:e,setAttributes:t})]}));const C=x&&"mobile"==this.state.responsiveTab?{height:b,minHeight:y,unit:p,minUnit:h,coverHeight:n}:{height:g,minHeight:m,unit:d,minUnit:u,coverHeight:c},w={...void 0===C.height||v&&C.coverHeight?{}:{height:C.height+C.unit}},T={...v&&C.coverHeight?{minHeight:C.minHeight+C.minUnit}:{}},S=void 0!==C.height&&!(v&&C.coverHeight)||v&&C.coverHeight;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(no,{children:(0,l.jsx)(lo,{children:(0,l.jsx)(io,{children:e=>(0,l.jsx)(wl,{value:r,onChange:e=>t({align:e}),leftLabel:Xs("Align Left","citadela-directory"),centerLabel:Xs("Align Center","citadela-directory"),rightLabel:Xs("Align Right","citadela-directory"),toggleProps:e})})})}),(0,l.jsxs)(co,{children:[(0,l.jsxs)(to,{title:Xs("Options","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:[(0,l.jsx)(xt,{value:s,onChange:e=>t({size:e})}),(0,l.jsx)(ao,{label:Xs("Open image in popup","citadela-directory"),checked:o,onChange:e=>t({inPopup:e})})]}),(0,l.jsxs)(to,{title:Xs("Custom Height Settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(ao,{label:Xs("Use responsive options","citadela-directory"),checked:x,onChange:e=>{t({useResponsiveOptions:e})}}),x?(0,l.jsxs)("div",{class:"citadela-responsive-settings-holder",children:[(0,l.jsx)(Ct,{activeTab:this.state.responsiveTab,onChange:e=>{this.setState({responsiveTab:e})}}),k]}):(0,l.jsx)(l.Fragment,{children:k}),(0,l.jsx)(oo,{value:j,label:Xs("Image focus","citadela-directory"),options:[{label:Xs("Top left","citadela-directory"),value:"top left"},{label:Xs("Top","citadela-directory"),value:"top center"},{label:Xs("Top right","citadela-directory"),value:"top right"},{label:Xs("Left","citadela-directory"),value:"center left"},{label:Xs("Center","citadela-directory"),value:"center center"},{label:Xs("Right","citadela-directory"),value:"center right"},{label:Xs("Bottom left","citadela-directory"),value:"bottom left"},{label:Xs("Bottom","citadela-directory"),value:"bottom center"},{label:Xs("Bottom right","citadela-directory"),value:"bottom right"}],onChange:e=>t({objectPosition:e})})]})]},"inspector"),(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks","ctdl-block-item-featured-image",e.className,`align-${r}`,`size-${s}`,{"custom-height":!(void 0===C.height||v&&C.coverHeight)},{"cover-height":!(!v||!C.coverHeight)},{[`position-${j.replace(" ","-")}`]:!!S}),style:T,ref:this.blockRef,children:[(0,l.jsx)(fe,{useResponsiveOptions:x,isSelected:i,currentView:this.state.responsiveTab}),(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(eo,{icon:f.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:f.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:f.description})]})]}),(0,l.jsx)("div",{class:"ft-image-thumb",children:(0,l.jsx)("div",{class:"ft-image",style:w})})]})]})}},save:()=>null});const Co=JSON.parse('{"apiVersion":1,"name":"citadela-directory/item-opening-hours","category":"citadela-directory-blocks","icon":"clock","attributes":{"title":{"type":"string","default":""}},"example":{},"editorScript":"citadela-directory-blocks"}'),{__:wo,setLocaleData:To}=wp.i18n,{registerBlockType:So}=wp.blocks,{RichText:_o}=wp.blockEditor,{Fragment:Io}=wp.element,{TextControl:No,BlockTitle:Ao,Icon:Oo}=wp.components,{name:Ho}=Co;So(Ho,{...Co,title:wo("Item Opening Hours","citadela-directory"),description:wo("Displays opening hours of specific listing item.","citadela-directory"),edit({attributes:e,setAttributes:t,name:a}){const i=wp.blocks.getBlockType(a);return(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks ctdl-item-opening-hours",e.className),children:[(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(Oo,{icon:i.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:i.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:i.description})]})]}),(0,l.jsx)("div",{class:"citadela-block-header",children:(0,l.jsx)(_o,{tagName:"h3",value:e.title,onChange:e=>t({title:e}),placeholder:i.title,keepPlaceholderOnFocus:!0,allowedFormats:[]})}),(0,l.jsx)("div",{class:"citadela-block-articles",children:(0,l.jsx)("div",{class:"citadela-block-articles-wrap",children:Array.from(Array(7),((e,t)=>(0,l.jsxs)("div",{class:"oh-day",children:[(0,l.jsx)("div",{class:"oh-label"}),(0,l.jsx)("div",{class:"oh-data"})]})))})}),(0,l.jsx)("div",{class:"citadela-block-note",children:(0,l.jsx)("span",{class:"line"})})]})},save:()=>null});const{__:Bo}=wp.i18n,{Component:Fo}=wp.element,{ToolbarGroup:Po,ToolbarButton:Do,BaseControl:Lo}=wp.components;class Mo extends Fo{render(){const{value:e,onChange:t,label:a=Bo("Select alignment","citadela-directory")}=this.props;return(0,l.jsx)(Lo,{label:a,className:"citadela-alignment-control",children:(0,l.jsxs)(Po,{label:a,isCollapsed:!1,children:[(0,l.jsx)(Do,{icon:"editor-alignleft",onClick:()=>t("left"),isPressed:"left"===e}),(0,l.jsx)(Do,{icon:"editor-aligncenter",onClick:()=>t("center"),isPressed:"center"===e}),(0,l.jsx)(Do,{icon:"editor-alignright",onClick:()=>t("right"),isPressed:"right"===e})]})})}}const Ro=JSON.parse('{"apiVersion":1,"name":"citadela-directory/item-gpx-download","category":"citadela-directory-blocks","icon":"download","attributes":{"text":{"type":"string","default":"Download GPX file"},"align":{"type":"string","default":"left"},"style":{"type":"string","default":"small-button"},"textColor":{"type":"string","default":""},"bgColor":{"type":"string","default":""},"borderRadius":{"type":"number"}},"example":{},"editorScript":"citadela-directory-blocks"}'),{__:$o}=wp.i18n,{registerBlockType:zo}=wp.blocks,{ToolbarGroup:Eo,ToolbarItem:Vo,PanelBody:Uo,BaseControl:Go,RadioControl:Wo}=wp.components,{InspectorControls:Jo,BlockControls:qo,RichText:Xo}=wp.blockEditor,{name:Yo}=Ro;zo(Yo,{...Ro,title:$o("Item GPX Download","citadela-directory"),description:$o("Displays button to download GPX file assigned to item.","citadela-directory"),edit:({className:e,attributes:t,setAttributes:a,name:i})=>{wp.blocks.getBlockType(i);const{align:s,text:o,style:r,textColor:c,bgColor:n,borderRadius:d}=t,u=c?{color:c}:{},h={..."text"!=r&&n?{backgroundColor:n}:{},..."text"!=r&&d>=0?{borderRadius:`${d}px`}:{}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(qo,{children:(0,l.jsx)(Eo,{children:(0,l.jsx)(Vo,{children:e=>(0,l.jsx)(wl,{value:s,onChange:e=>a({align:e}),leftLabel:$o("Align Left","citadela-directory"),centerLabel:$o("Align Center","citadela-directory"),rightLabel:$o("Align Right","citadela-directory"),toggleProps:e})})})}),(0,l.jsx)(Jo,{children:(0,l.jsxs)(Uo,{title:$o("Options","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:[(0,l.jsx)(Mo,{label:$o("Alignment","citadela-directory"),value:s,onChange:e=>{a({align:e})}}),(0,l.jsx)(Go,{label:$o("Style","citadela-directory"),children:(0,l.jsx)(Wo,{selected:r,options:[{label:$o("Small button","citadela-directory"),value:"small-button"},{label:$o("Large button","citadela-directory"),value:"large-button"},{label:$o("Text link","citadela-directory"),value:"text"}],onChange:e=>{a({style:e})}})}),(0,l.jsx)(p,{label:$o("Text color","citadela-directory"),color:c,onChange:e=>{a({textColor:e})},allowReset:!0,disableAlpha:!0}),"text"!=r&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p,{label:$o("Button background color","citadela-directory"),color:n,onChange:e=>{a({bgColor:e})},allowReset:!0}),(0,l.jsx)(x,{label:$o("Border radius","citadela-directory"),rangeValue:d,onChange:e=>{a({borderRadius:e})},min:0,max:50,initial:0,allowReset:!0,allowNoValue:!0})]})]})}),(0,l.jsx)("div",{className:classNames("wp-block-citadela-blocks","ctdl-item-gpx-download",t.className,`align-${s}`,`${r}-style`,c?"custom-text-color":null,"text"!=r&&n?"custom-background-color":null,"text"!=r&&d?"custom-border-radius":null),children:(0,l.jsx)("div",{class:"download-button",style:h,children:(0,l.jsx)(Xo,{tagName:"span",className:"button-text",placeholder:$o("Download GPX file","citadela-directory"),value:o,onChange:e=>a({text:e}),keepPlaceholderOnFocus:!0,allowedFormats:["core/bold","core/italic"],style:u})})})]})},save:()=>null});const Ko=JSON.parse('{"apiVersion":1,"name":"citadela-directory/item-get-directions","category":"citadela-directory-blocks","icon":"randomize","attributes":{"text":{"type":"string","default":"Get directions"},"align":{"type":"string","default":"left"},"style":{"type":"string","default":"small-button"},"textColor":{"type":"string","default":""},"bgColor":{"type":"string","default":""},"borderRadius":{"type":"number"}},"example":{},"editorScript":"citadela-directory-blocks"}'),{__:Qo}=wp.i18n,{registerBlockType:Zo}=wp.blocks,{ToolbarGroup:er,ToolbarItem:tr,PanelBody:ar,BaseControl:lr,RadioControl:ir}=wp.components,{InspectorControls:sr,BlockControls:or,RichText:rr}=wp.blockEditor,{name:cr}=Ko;Zo(cr,{...Ko,title:Qo("Item Get Directions","citadela-directory"),description:Qo("Displays button that open Google Maps navigation to Item Post location.","citadela-directory"),edit:({className:e,attributes:t,setAttributes:a,name:i})=>{wp.blocks.getBlockType(i);const{align:s,text:o,style:r,textColor:c,bgColor:n,borderRadius:d}=t,u=c?{color:c}:{},h={..."text"!=r&&n?{backgroundColor:n}:{},..."text"!=r&&d>=0?{borderRadius:`${d}px`}:{}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(or,{children:(0,l.jsx)(er,{children:(0,l.jsx)(tr,{children:e=>(0,l.jsx)(wl,{value:s,onChange:e=>a({align:e}),leftLabel:Qo("Align Left","citadela-directory"),centerLabel:Qo("Align Center","citadela-directory"),rightLabel:Qo("Align Right","citadela-directory"),toggleProps:e})})})}),(0,l.jsx)(sr,{children:(0,l.jsxs)(ar,{title:Qo("Options","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:[(0,l.jsx)(Mo,{label:Qo("Alignment","citadela-directory"),value:s,onChange:e=>{a({align:e})}}),(0,l.jsx)(lr,{label:Qo("Style","citadela-directory"),children:(0,l.jsx)(ir,{selected:r,options:[{label:Qo("Small button","citadela-directory"),value:"small-button"},{label:Qo("Large button","citadela-directory"),value:"large-button"},{label:Qo("Text link","citadela-directory"),value:"text"}],onChange:e=>{a({style:e})}})}),(0,l.jsx)(p,{label:Qo("Text color","citadela-directory"),color:c,onChange:e=>{a({textColor:e})},allowReset:!0,disableAlpha:!0}),"text"!=r&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p,{label:Qo("Button background color","citadela-directory"),color:n,onChange:e=>{a({bgColor:e})},allowReset:!0}),(0,l.jsx)(x,{label:Qo("Border radius","citadela-directory"),rangeValue:d,onChange:e=>{a({borderRadius:e})},min:0,max:50,initial:0,allowReset:!0,allowNoValue:!0})]})]})}),(0,l.jsx)("div",{className:classNames("wp-block-citadela-blocks","ctdl-item-get-directions",t.className,`align-${s}`,`${r}-style`,c?"custom-text-color":null,"text"!=r&&n?"custom-background-color":null,"text"!=r&&d?"custom-border-radius":null),children:(0,l.jsx)("div",{class:"button-wrapper",style:h,children:(0,l.jsx)(rr,{tagName:"span",className:"button-text",placeholder:Qo("Get directions","citadela-directory"),value:o,onChange:e=>a({text:e}),keepPlaceholderOnFocus:!0,allowedFormats:["core/bold","core/italic"],style:u})})})]})},save:()=>null});const nr=JSON.parse('{"apiVersion":1,"name":"citadela-directory/item-claim-listing","category":"citadela-directory-blocks","icon":"store","attributes":{"text":{"type":"string","default":"Claim Listing"},"align":{"type":"string","default":"left"},"style":{"type":"string","default":"small-button"},"textColor":{"type":"string","default":""},"bgColor":{"type":"string","default":""},"borderRadius":{"type":"number"},"formTitle":{"type":"string","default":"Claim Listing"},"formDescription":{"type":"string","default":"Lorem ipsum dolor sit amet"},"formUsername":{"type":"string","default":"Username"},"formEmail":{"type":"string","default":"Email"},"formSubmit":{"type":"string","default":"Claim"},"formLoggedIn":{"type":"string","default":"Are you sure you want to claim the current item?"},"formTerms":{"type":"string","default":"Accepts Terms & Conditions"},"notificationAlready":{"type":"string","default":""},"notificationPending":{"type":"string","default":"Item pending moderation from admin."}},"example":{},"editorScript":"citadela-directory-blocks"}'),{__:dr}=wp.i18n,{registerBlockType:pr}=wp.blocks,{InspectorControls:ur,BlockControls:hr,RichText:gr}=wp.blockEditor,{ToolbarGroup:br,ToolbarItem:mr,PanelBody:yr,BaseControl:xr,RadioControl:vr,TextControl:jr,TextareaControl:fr}=wp.components,{name:kr}=nr;pr(kr,{...nr,title:dr("Item Claim Listing","citadela-directory"),description:dr("Displays the button and the form for claim listing.","citadela-directory"),edit:({className:e,attributes:t,setAttributes:a,name:i})=>{wp.blocks.getBlockType(i);const{align:s,text:o,style:r,textColor:c,bgColor:n,borderRadius:d,formTitle:u,formDescription:h,formUsername:g,formEmail:b,formSubmit:m,formLoggedIn:y,formTerms:v,notificationAlready:j,notificationPending:f}=t,k=c?{color:c}:{},C={..."text"!=r&&n?{backgroundColor:n}:{},..."text"!=r&&d>=0?{borderRadius:`${d}px`}:{}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(hr,{children:(0,l.jsx)(br,{children:(0,l.jsx)(mr,{children:e=>(0,l.jsx)(wl,{value:s,onChange:e=>a({align:e}),leftLabel:dr("Align Left","citadela-directory"),centerLabel:dr("Align Center","citadela-directory"),rightLabel:dr("Align Right","citadela-directory"),toggleProps:e})})})}),(0,l.jsxs)(ur,{children:[(0,l.jsxs)(yr,{title:dr("Buttons","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:[(0,l.jsx)(Mo,{label:dr("Alignment","citadela-directory"),value:s,onChange:e=>{a({align:e})}}),(0,l.jsx)(xr,{label:dr("Style","citadela-directory"),children:(0,l.jsx)(vr,{selected:r,options:[{label:dr("Small button","citadela-directory"),value:"small-button"},{label:dr("Large button","citadela-directory"),value:"large-button"}],onChange:e=>{a({style:e})}})}),(0,l.jsx)(p,{label:dr("Text color","citadela-directory"),color:c,onChange:e=>{a({textColor:e})},allowReset:!0,disableAlpha:!0}),"text"!=r&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p,{label:dr("Button background color","citadela-directory"),color:n,onChange:e=>{a({bgColor:e})},allowReset:!0}),(0,l.jsx)(x,{label:dr("Border radius","citadela-directory"),rangeValue:d,onChange:e=>{a({borderRadius:e})},min:0,max:50,initial:0,allowReset:!0,allowNoValue:!0})]})]}),(0,l.jsxs)(yr,{title:dr("Form","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(xr,{id:"formTitle",label:dr("Title","citadela-directory"),children:(0,l.jsx)(jr,{id:"formTitle",type:"text",value:u,onChange:e=>{a({formTitle:e})}})}),(0,l.jsx)(xr,{id:"formDescription",label:dr("Description","citadela-directory"),children:(0,l.jsx)(fr,{id:"formDescription",type:"text",value:h,onChange:e=>{a({formDescription:e})}})}),(0,l.jsx)(xr,{id:"formUsername",label:dr("Username Label","citadela-directory"),help:dr("Label for username field","citadela-directory"),children:(0,l.jsx)(jr,{id:"formUsername",type:"text",value:g,onChange:e=>{a({formUsername:e})}})}),(0,l.jsx)(xr,{id:"formEmail",label:dr("Email Label","citadela-directory"),help:dr("Label for email field","citadela-directory"),children:(0,l.jsx)(jr,{id:"formEmail",type:"text",value:b,onChange:e=>{a({formEmail:e})}})}),(0,l.jsx)(xr,{id:"formSubmit",label:dr("Submit Label","citadela-directory"),help:dr("Label for submit button","citadela-directory"),children:(0,l.jsx)(jr,{id:"formSubmit",type:"text",value:m,onChange:e=>{a({formSubmit:e})}})}),(0,l.jsx)(xr,{id:"formLoggedIn",label:dr("Logged in text","citadela-directory"),help:dr("Text displayed in the form when user is logged in","citadela-directory"),children:(0,l.jsx)(fr,{id:"formLoggedIn",type:"text",value:y,onChange:e=>{a({formLoggedIn:e})}})}),(0,l.jsx)(xr,{id:"formTerms",label:dr("Terms & Conditions label","citadela-directory"),help:dr("Text for Terms & Conditions form input. Leave empty to disable the checkbox.","citadela-directory"),children:(0,l.jsx)(fr,{id:"formTerms",type:"text",value:v,onChange:e=>{a({formTerms:e})}})})]}),(0,l.jsxs)(yr,{title:dr("Notifications","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(xr,{id:"notificationAlready",label:dr("Already claimed","citadela-directory"),help:dr("Notification when the item is already claimed. Leave empty to hide the notification.","citadela-directory"),children:(0,l.jsx)(fr,{id:"notificationAlready",type:"text",value:j,onChange:e=>{a({notificationAlready:e})}})}),(0,l.jsx)(xr,{id:"notificationPending",label:dr("Pending","citadela-directory"),help:dr("Notification when the item is pending moderation from admin. Leave empty to hide the notification.","citadela-directory"),children:(0,l.jsx)(fr,{id:"notificationPending",type:"text",value:f,onChange:e=>{a({notificationPending:e})}})})]})]}),(0,l.jsx)("div",{className:classNames("wp-block-citadela-blocks","ctdl-item-claim-listing",t.className,`align-${s}`,`${r}-style`,c?"custom-text-color":null,"text"!=r&&n?"custom-background-color":null,"text"!=r&&d?"custom-border-radius":null),children:(0,l.jsx)("div",{class:"claim-listing-button",style:C,children:(0,l.jsx)(gr,{tagName:"span",className:"button-text",placeholder:dr("Claim Listing","citadela-directory"),value:o,onChange:e=>a({text:e}),keepPlaceholderOnFocus:!0,allowedFormats:["core/bold","core/italic"],style:k})})})]})},save:()=>null});const{__:Cr}=wp.i18n,{Component:wr}=wp.element,{InspectorControls:Tr,BlockControls:Sr,RichText:_r}=wp.blockEditor,{PanelBody:Ir,ToolbarGroup:Nr,ToolbarItem:Ar,Icon:Or,ToggleControl:Hr,SelectControl:Br}=wp.components,Fr=JSON.parse('{"apiVersion":1,"name":"citadela-directory/item-extension","category":"citadela-directory-blocks","icon":"screenoptions","attributes":{"layout":{"type":"string","default":"list"},"align":{"type":"string","default":"left"},"list_table_style":{"type":"boolean","default":false},"label_width":{"type":"number"},"box_width":{"type":"number","default":200},"fix_box_width":{"type":"boolean","default":false},"title":{"type":"string","default":""},"hide_empty":{"type":"boolean","default":false},"hide_empty_checkbox":{"type":"boolean","default":false},"show_data":{"type":"string","default":"all"},"selected_inputs":{"type":"array","default":[]},"title_color":{"type":"string","default":""},"lines_color":{"type":"string","default":""},"labels_color":{"type":"string","default":""},"values_color":{"type":"string","default":""}},"example":{},"editorScript":"citadela-directory-blocks"}'),{__:Pr,setLocaleData:Dr}=wp.i18n,{registerBlockType:Lr}=wp.blocks,{InspectorControls:Mr,BlockControls:Rr,RichText:$r}=wp.blockEditor,{Fragment:zr}=wp.element,{TextControl:Er,BlockTitle:Vr,Icon:Ur,ToggleControl:Gr}=wp.components,{name:Wr}=Fr;Lr(Wr,{...Fr,title:Pr("Item Extension","citadela-directory"),description:Pr("Displays information from Item Extension inputs assigned to item.","citadela-directory"),edit:class extends wr{constructor(){super(...arguments),this.updateSelectedInputs=this.updateSelectedInputs.bind(this),this.cleanSelectedInputs=this.cleanSelectedInputs.bind(this),this.item_extension_options=CitadelaDirectorySettings.options.item_extension}componentDidMount(){this.cleanSelectedInputs()}cleanSelectedInputs(){const{item_extension_options:e}=this,{attributes:t,setAttributes:a}=this.props;if(_.isEmpty(e))return;const l=Object.keys(e.inputs_group.inputs).map(((e,t)=>e));let i=[];t.selected_inputs.map((e=>{const t=e;l.includes(t)&&i.push(t)})),a({selected_inputs:i})}updateSelectedInputs(e,t){const{attributes:a,setAttributes:l}=this.props;let i=a.selected_inputs.map((e=>e));if(t)i.push(e);else{const t=i.indexOf(e);t>-1&&i.splice(t,1)}l({selected_inputs:i})}render(){const e="undefined"!=typeof CitadelaProSettings,{item_extension_options:t}=this,{attributes:a,setAttributes:i,name:s}=this.props,{title:o,layout:r,align:c,list_table_style:n,label_width:d,box_width:u,fix_box_width:h,hide_empty:g,hide_empty_checkbox:b,show_data:m,selected_inputs:y,title_color:v,lines_color:j,labels_color:f,values_color:k}=a,C=wp.blocks.getBlockType(s),w=!_.isEmpty(t),T=!!w&&t.enable,S=w?t.inputs_group.inputs:{},I={...!(!e||!v)&&{color:`${v}`}},N={...!("list"!=r||!d)&&{width:`${d}px`},...!(!e||!f)&&{color:`${f}`}},A={...!(!e||!k)&&{color:`${k}`}},O={...!("box"!=r||!u)&&{flexBasis:`${u}px`},...!(!e||"text"==r||!j)&&{borderColor:`${j}`}},H=(0,l.jsxs)("div",{class:"data-row",style:O||!1,children:[(0,l.jsx)("div",{class:"label",style:N||!1}),(0,l.jsx)("div",{class:"data",style:A||!1}),"text"==r&&(0,l.jsx)("span",{class:"sep",style:I||!1})]});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Sr,{children:(0,l.jsxs)(Nr,{children:[(0,l.jsx)(Ar,{children:e=>(0,l.jsx)(wl,{value:c,onChange:e=>i({align:e}),leftLabel:Cr("Align Left","citadela-directory"),centerLabel:Cr("Align Center","citadela-directory"),rightLabel:Cr("Align Right","citadela-directory"),toggleProps:e})}),(0,l.jsx)(Ar,{children:e=>(0,l.jsx)(ee,{allowedLayouts:["text","list","box"],value:r,onChange:e=>i({layout:e}),toggleProps:e})})]})},"controls"),(0,l.jsxs)(Tr,{children:[(0,l.jsxs)(Ir,{title:Cr("Show data","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:[(0,l.jsx)(Br,{label:Cr("Show data","citadela-directory"),value:m,options:[{label:Cr("All inputs","citadela-directory"),value:"all"},{label:Cr("Show selected inputs","citadela-directory"),value:"selected"},{label:Cr("Hide selected inputs","citadela-directory"),value:"hide_selected"}],onChange:e=>{i({show_data:e})}}),"all"!==m&&Object.keys(S).map(((e,t)=>{const a=y.includes(e);return(0,l.jsx)(Hr,{label:S[e].label,checked:a,onChange:t=>{this.updateSelectedInputs(e,t)}})}))]}),(0,l.jsxs)(Ir,{title:Cr("Options","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(Hr,{label:Cr("Hide empty values","citadela-directory"),help:Cr("Data of inputs with no value will not be displayed.","citadela-directory"),checked:g,onChange:e=>i({hide_empty:e})}),(0,l.jsx)(Hr,{label:Cr("Hide unchecked checkbox","citadela-directory"),help:Cr("Unchecked single checkbox will not be displayed.","citadela-directory"),checked:b,onChange:e=>i({hide_empty_checkbox:e})}),"list"==r&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x,{label:Cr("Label width","citadela-directory"),rangeValue:d,onChange:e=>{i({label_width:e})},min:150,max:500,allowReset:!0,allowNoValue:!0}),(0,l.jsx)(Hr,{label:Cr("Table style","citadela-directory"),help:Cr("Force table style for displayed data, longer values are not moved under label.","citadela-directory"),checked:n,onChange:e=>i({list_table_style:e})})]}),"box"==r&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x,{label:Cr("Box width","citadela-directory"),rangeValue:u,onChange:e=>{i({box_width:e})},min:150,max:500,initial:200,allowReset:!0}),(0,l.jsx)(Hr,{label:Cr("Fix width","citadela-directory"),help:Cr("Force box width to selected value.","citadela-directory"),checked:h,onChange:e=>i({fix_box_width:e})})]})]}),e&&(0,l.jsxs)(Ir,{title:Cr("Design Options","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(p,{label:Cr("Title color","citadela-directory"),color:v,onChange:e=>{i({title_color:e})}}),(0,l.jsx)(p,{label:Cr("Label color","citadela-directory"),color:f,onChange:e=>{i({labels_color:e})}}),(0,l.jsx)(p,{label:Cr("Value color","citadela-directory"),color:k,onChange:e=>{i({values_color:e})}}),"text"!=r&&(0,l.jsx)(p,{label:Cr("Lines color","citadela-directory"),color:j,onChange:e=>{i({lines_color:e})}})]})]}),(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks","ctdl-item-extension",a.className,`${r}-layout`,`align-${c}`,"list"==r&&d?"custom-label-width":null,"list"==r&&n?"table-style":null,e&&"text"!=r&&j?"custom-lines-color":null,e&&v?"custom-title-color":null,e&&f?"custom-label-color":null,e&&k?"custom-value-color":null,h?"fix-width":null,T?null:"feature-disabled"),children:[(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(Or,{icon:C.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:C.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:C.description})]})]}),T?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{class:"citadela-block-header",children:(0,l.jsx)(_r,{tagName:"h3",value:o,onChange:e=>i({title:e}),placeholder:C.title,keepPlaceholderOnFocus:!0,allowedFormats:[],style:I||!1})}),(0,l.jsx)("div",{class:"citadela-block-articles",children:(0,l.jsxs)("div",{class:"citadela-block-articles-wrap",children:["all"==m&&(0,l.jsx)(l.Fragment,{children:0==_.size(S)?Cr("There are no inputs to show.","citadela-directory"):Array.from(Array(_.size(S)),((e,t)=>H))}),"selected"==m&&(0,l.jsx)(l.Fragment,{children:0==_.size(y)?Cr("There are no selected inputs to show.","citadela-directory"):Array.from(Array(_.size(y)),((e,t)=>H))}),"hide_selected"==m&&(0,l.jsx)(l.Fragment,{children:_.size(y)==_.size(S)?Cr("There are no selected inputs to show.","citadela-directory"):Array.from(Array(_.size(S)-_.size(y)),((e,t)=>H))})]})})]}):(0,l.jsx)(Hi,{description:Cr("Enable and insert inputs via menu","citadela-directory"),pathText:Cr("Citadela Listing > Item Extension","citadela-directory")})]})]})}},save:()=>null});const{Component:Jr,useState:qr}=wp.element,{__:Xr}=wp.i18n,{InspectorControls:Yr,RichText:Kr}=wp.blockEditor,{PanelBody:Qr,ToggleControl:Zr,Icon:ec,SelectControl:tc,ColorPalette:ac,ColorIndicator:lc,BaseControl:ic,TextControl:sc}=wp.components,oc=({attributes:e,setAttributes:t})=>{const{imageHeightUnit:a,imageHeight:i}=e,[s,o]=qr(i);let r=[];r.px=250,r.vh=100,r.vw=30;let c=1;return"px"!=a&&(c=.1),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ic,{label:Xr("Image height unit","citadela-directory"),children:(0,l.jsx)(tc,{value:a,options:[{label:"px",value:"px"},{label:"vh",value:"vh"},{label:"vw",value:"vw"}],onChange:e=>{o(r[e]),t({imageHeightUnit:e,imageHeight:r[e]})}})}),(0,l.jsx)(ic,{label:Xr("Image height","citadela-directory")+(void 0!==i?`: ${i}${a}`:": "+Xr("default image size","citadela-directory")),children:(0,l.jsx)(sc,{type:"number",value:s,step:c,onChange:e=>{let l=e;o(l),""==e&&(o(""),l=r[a]),t("px"!=a?{imageHeight:l?parseFloat(l):l}:{imageHeight:l?parseInt(l):l})}})})]})},rc=({attributes:e,setAttributes:t})=>{const{imageHeightUnitMobile:a,imageHeightMobile:i}=e,[s,o]=qr(i);let r=[];r.px=250,r.vh=100,r.vw=30;let c=1;return"px"!=a&&(c=.1),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ic,{label:Xr("Image height unit","citadela-directory"),children:(0,l.jsx)(tc,{value:a,options:[{label:"px",value:"px"},{label:"vh",value:"vh"},{label:"vw",value:"vw"}],onChange:e=>{o(r[e]),t({imageHeightUnitMobile:e,imageHeightMobile:r[e]})}})}),(0,l.jsx)(ic,{label:Xr("Image height","citadela-directory")+(void 0!==i?`: ${i}${a}`:": "+Xr("default image size","citadela-directory")),children:(0,l.jsx)(sc,{type:"number",value:s,step:c,onChange:e=>{let l=e;o(l),""==e&&(o(""),l=r[a]),t("px"!=a?{imageHeightMobile:l?parseFloat(l):l}:{imageHeightMobile:l?parseInt(l):l})}})})]})},cc=({attributes:e,setAttributes:t})=>{const{breakpointMobileImageHeight:a}=e,[i,s]=qr(a);return(0,l.jsx)(ic,{label:Xr("Mobile width breakpoint","citadela-directory"),help:Xr("Responsive options applied under screen width","citadela-directory")+` ${a}px`,id:"mobile-width",children:(0,l.jsx)(sc,{type:"number",value:i,onChange:e=>{let a=e;s(a),""==e&&(a=600),t({breakpointMobileImageHeight:a?parseInt(a):a})},step:1})})},nc=JSON.parse('{"apiVersion":1,"name":"citadela-directory/item-gallery","category":"citadela-directory-blocks","icon":"format-gallery","attributes":{"title":{"type":"string","default":""},"size":{"type":"string","default":"medium"},"captionPosition":{"type":"string","default":"hidden"},"textColor":{"type":"string","default":""},"useCarousel":{"type":"boolean","default":false},"carouselNavigation":{"type":"boolean","default":true},"carouselPagination":{"type":"boolean","default":true},"carouselAutoplay":{"type":"boolean","default":false},"carouselAutoHeight":{"type":"boolean","default":false},"carouselAutoplayDelay":{"type":"number","default":5},"carouselLoop":{"type":"boolean","default":true},"carouselColor":{"type":"string","default":""},"imageSize":{"type":"string","default":"citadela_item_thumbnail"},"useResponsiveOptionsImageHeight":{"type":"boolean","default":false},"breakpointMobileImageHeight":{"type":"number","default":600},"proportionalImageHeight":{"type":"boolean","default":false},"proportionalImageHeightMobile":{"type":"boolean","default":false},"imageHeightType":{"type":"string","default":"default"},"imageHeightTypeMobile":{"type":"string","default":"default"},"imageHeightUnit":{"type":"string","default":"px"},"imageHeightUnitMobile":{"type":"string","default":"px"},"imageHeight":{"type":"number","default":250},"imageHeightMobile":{"type":"number","default":250},"imageObjectPosition":{"type":"string","default":"center center"},"imageObjectPositionMobile":{"type":"string","default":"center center"},"imagesVerticalAlign":{"type":"string","default":"top"}},"example":{},"editorScript":"citadela-directory-blocks"}'),{__:dc,setLocaleData:pc}=wp.i18n,{registerBlockType:uc}=wp.blocks,{name:hc}=nc;uc(hc,{...nc,title:dc("Item Gallery","citadela-directory"),description:dc("Displays gallery of images assigned to Item Post.","citadela-directory"),edit:class extends Jr{constructor(){super(...arguments),this.state={responsiveTabHeight:"desktop"}}render(){const e="undefined"!=typeof CitadelaProSettings,{attributes:t,setAttributes:a,name:i,isSelected:s}=this.props,{size:o,useCarousel:r,carouselNavigation:c,carouselPagination:n,carouselAutoplay:d,carouselAutoHeight:p,carouselLoop:u,carouselColor:h,textColor:g,imageSize:b,useResponsiveOptionsImageHeight:m,breakpointMobileImageHeight:y,proportionalImageHeight:x,proportionalImageHeightMobile:v,imageHeightType:j,imageHeightTypeMobile:f,imageObjectPosition:k,imageObjectPositionMobile:C,imageHeight:w,imageHeightMobile:T,imageHeightUnit:S,imageHeightUnitMobile:_,captionPosition:I,imagesVerticalAlign:N}=t,A=[{color:"#00d1b2"},{color:"#3373dc"},{color:"#209cef"},{color:"#22d25f"},{color:"#ffdd57"},{color:"#ff3860"},{color:"#7941b6"},{color:"#392F43"}],O=wp.blocks.getBlockType(i);let H="";(!m||m&&"desktop"==this.state.responsiveTabHeight)&&(H=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Zr,{label:Xr("Proportional image height","citadela-directory"),checked:x,onChange:e=>{a({proportionalImageHeight:e})}}),!x&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(tc,{label:Xr("Image height","citadela-directory"),value:j,options:[{label:Xr("Default","citadela-directory"),value:"default"},{label:Xr("Custom","citadela-directory"),value:"custom"}],onChange:e=>{a({imageHeightType:e})}}),"custom"==j&&(0,l.jsx)(oc,{attributes:t,setAttributes:a}),(0,l.jsx)(tc,{value:k,label:Xr("Image focus","citadela-directory"),options:[{label:Xr("Top left","citadela-directory"),value:"top left"},{label:Xr("Top","citadela-directory"),value:"top center"},{label:Xr("Top right","citadela-directory"),value:"top right"},{label:Xr("Left","citadela-directory"),value:"center left"},{label:Xr("Center","citadela-directory"),value:"center center"},{label:Xr("Right","citadela-directory"),value:"center right"},{label:Xr("Bottom left","citadela-directory"),value:"bottom left"},{label:Xr("Bottom","citadela-directory"),value:"bottom center"},{label:Xr("Bottom right","citadela-directory"),value:"bottom right"}],onChange:e=>a({imageObjectPosition:e})})]})]})),m&&"mobile"==this.state.responsiveTabHeight&&(H=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(cc,{attributes:t,setAttributes:a}),(0,l.jsx)(Zr,{label:Xr("Proportional image height","citadela-directory"),checked:v,onChange:e=>{a({proportionalImageHeightMobile:e})}}),!v&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(tc,{label:Xr("Image height","citadela-directory"),value:f,options:[{label:Xr("Default","citadela-directory"),value:"default"},{label:Xr("Custom","citadela-directory"),value:"custom"}],onChange:e=>{a({imageHeightTypeMobile:e})}}),"custom"==f&&(0,l.jsx)(rc,{attributes:t,setAttributes:a}),(0,l.jsx)(tc,{value:C,label:Xr("Image focus","citadela-directory"),options:[{label:Xr("Top left","citadela-directory"),value:"top left"},{label:Xr("Top","citadela-directory"),value:"top center"},{label:Xr("Top right","citadela-directory"),value:"top right"},{label:Xr("Left","citadela-directory"),value:"center left"},{label:Xr("Center","citadela-directory"),value:"center center"},{label:Xr("Right","citadela-directory"),value:"center right"},{label:Xr("Bottom left","citadela-directory"),value:"bottom left"},{label:Xr("Bottom","citadela-directory"),value:"bottom center"},{label:Xr("Bottom right","citadela-directory"),value:"bottom right"}],onChange:e=>a({imageObjectPositionMobile:e})})]})]}));const B=m&&"mobile"==this.state.responsiveTabHeight?{imageHeight:T,imageHeightUnit:_,proportionalImageHeight:v,imageHeightType:f,imageObjectPosition:C}:{imageHeight:w,imageHeightUnit:S,proportionalImageHeight:x,imageHeightType:j,imageObjectPosition:k};let F={},P={},D={};return P={...P,...B.proportionalImageHeight||"custom"!=B.imageHeightType||void 0===B.imageHeight?{}:{height:B.imageHeight+B.imageHeightUnit}},e&&(F={...h?{color:h}:{}},D={...g?{textColor:g}:{}}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(Yr,{children:[(0,l.jsxs)(Qr,{title:Xr("Default Layout Options","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:[(0,l.jsx)(tc,{label:Xr("Grid size","citadela-directory"),value:o,options:[{label:Xr("Mini","citadela-directory"),value:"mini"},{label:Xr("Small","citadela-directory"),value:"small"},{label:Xr("Medium","citadela-directory"),value:"medium"},{label:Xr("Large","citadela-directory"),value:"large"}],onChange:e=>{a({size:e})}}),(0,l.jsx)(xt,{value:b,customSizes:{citadela_item_thumbnail:Xr("Default","citadela-directory")},onChange:e=>a({imageSize:e})}),(0,l.jsx)(tc,{label:Xr("Images vertical align","citadela-directory"),value:N,options:[{label:Xr("Top","citadela-directory"),value:"top"},{label:Xr("Center","citadela-directory"),value:"center"},{label:Xr("Bottom","citadela-directory"),value:"bottom"}],onChange:e=>{a({imagesVerticalAlign:e})}}),(0,l.jsx)(Zr,{label:Xr("Use responsive options","citadela-directory"),checked:m,onChange:e=>{a({useResponsiveOptionsImageHeight:e})}}),m?(0,l.jsxs)("div",{class:"citadela-responsive-settings-holder",children:[(0,l.jsx)(Ct,{activeTab:this.state.responsiveTabHeight,onChange:e=>{this.setState({responsiveTabHeight:e})}}),H]}):(0,l.jsx)(l.Fragment,{children:H})]}),(0,l.jsx)(Qr,{title:Xr("Gallery Options","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:(0,l.jsx)(tc,{value:I,label:Xr("Images caption text","citadela-directory"),options:[{label:Xr("Do not show","citadela-directory"),value:"hidden"},{label:Xr("Inside image","citadela-directory"),value:"inside-image"},{label:Xr("Under image","citadela-directory"),value:"under-image"}],onChange:e=>a({captionPosition:e})})}),(0,l.jsx)(me,{attributes:t,onChange:e=>this.props.setAttributes({useCarousel:e.useCarousel,carouselNavigation:e.carouselNavigation,carouselPagination:e.carouselPagination,carouselAutoplay:e.carouselAutoplay,carouselAutoHeight:e.carouselAutoHeight,carouselAutoplayDelay:e.carouselAutoplayDelay,carouselLoop:e.carouselLoop})}),e&&(0,l.jsxs)(Qr,{title:Xr("Design Options","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsxs)(ic,{label:Xr("Text color","citadela-directory"),className:"block-editor-panel-color-settings",children:[g&&(0,l.jsx)(lc,{colorValue:g}),(0,l.jsx)(ac,{value:g,onChange:e=>{a({textColor:e})},colors:A})]}),r&&(n||c)&&(0,l.jsxs)(ic,{label:Xr("Carousel decoration color","citadela-directory"),className:"block-editor-panel-color-settings",children:[h&&(0,l.jsx)(lc,{colorValue:h}),(0,l.jsx)(ac,{value:h,onChange:e=>{a({carouselColor:e})},colors:A})]})]})]},"inspector"),(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks","ctdl-item-gallery",t.className,"grid-type-1","layout-default",`size-${o}`,`image-vertical-align-${N}`,"items-auto",{"custom-carousel-color":!(!e||!h)},{"use-carousel":!!r},{"carousel-navigation":!(!r||!c)},{"carousel-pagination":!(!r||!n)},{"carousel-autoheight":!(!r||!p)},`image-size-${b}`,"hidden"!==I?`caption-${I}`:null,"desktop"==this.state.responsiveTabHeight&&x?"proportional-image-height":null,"mobile"==this.state.responsiveTabHeight&&v?"proportional-image-height":null,"desktop"!=this.state.responsiveTabHeight||x?null:`${j}-image-height`,"mobile"!=this.state.responsiveTabHeight||v?null:`${f}-image-height`,"desktop"!=this.state.responsiveTabHeight||x?null:`image-position-${k.replace(" ","-")}`,"mobile"!=this.state.responsiveTabHeight||v?null:`image-position-${C.replace(" ","-")}`),children:[(0,l.jsx)(fe,{useResponsiveOptions:m,isSelected:s,currentView:this.state.responsiveTabHeight,carouselAutoplay:r&&d,carouselLoop:r&&u}),(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(ec,{icon:O.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:O.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:O.description})]})]}),(0,l.jsx)("div",{class:"citadela-block-header",children:(0,l.jsx)(Kr,{tagName:"h3",value:t.title,onChange:e=>a({title:e}),placeholder:O.title,keepPlaceholderOnFocus:!0,allowedFormats:[]})}),(0,l.jsx)("div",{class:"citadela-block-articles",children:(0,l.jsx)("div",{class:"citadela-block-articles-wrap",children:Array.from(Array(10),((e,t)=>(0,l.jsx)("article",{class:"citadela-directory-gallery-item",children:(0,l.jsxs)("div",{class:"item-content",style:D,children:[(0,l.jsx)("div",{class:"item-thumbnail",style:P}),"hidden"!==I&&(0,l.jsx)("div",{class:"caption"})]})})))})}),r&&c&&(0,l.jsxs)("div",{class:"carousel-navigation-wrapper",style:F,children:[(0,l.jsx)("div",{class:"carousel-button-prev",children:(0,l.jsx)("i",{class:"fas fa-chevron-left"})}),(0,l.jsx)("div",{class:"carousel-button-next",children:(0,l.jsx)("i",{class:"fas fa-chevron-right"})})]}),r&&n&&(0,l.jsxs)("div",{class:"carousel-pagination-wrapper",style:F,children:[(0,l.jsx)("span",{class:"carousel-bullet"}),(0,l.jsx)("span",{class:"carousel-bullet"}),(0,l.jsx)("span",{class:"carousel-bullet"})]})]})]})}},save:()=>null});const{Component:gc,useState:bc}=wp.element,{__:mc}=wp.i18n,{BlockControls:yc,InspectorControls:xc,RichText:vc}=wp.blockEditor,{PanelBody:jc,ToggleControl:fc,SelectControl:kc,Icon:Cc}=wp.components,wc=JSON.parse('{"UU":"citadela-directory/item-events"}'),{__:Tc,setLocaleData:Sc}=wp.i18n,{registerBlockType:_c}=wp.blocks,{UU:Ic}=wc;_c(Ic,{title:Tc("Item Events","citadela-directory"),description:Tc("Displays upcoming events of specific listing item.","citadela-directory"),icon:"calendar",category:"citadela-directory-blocks",edit:class extends gc{constructor(){super(...arguments)}render(){const{attributes:e,setAttributes:t,name:a,isSelected:i}=this.props,{title:s,showEventFeaturedImage:o,showEventDescription:r,showEventPrice:c,imageSize:n}=e,d=wp.blocks.getBlockType(a);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(xc,{children:[(0,l.jsxs)(jc,{title:mc("Event Details","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(fc,{label:mc("Show featured image","citadela-directory"),checked:o,onChange:e=>this.props.setAttributes({showEventFeaturedImage:e})}),(0,l.jsx)(fc,{label:mc("Show description","citadela-directory"),checked:r,onChange:e=>this.props.setAttributes({showEventDescription:e})}),(0,l.jsx)(fc,{label:mc("Show price","citadela-directory"),checked:c,onChange:e=>this.props.setAttributes({showEventPrice:e})})]}),(0,l.jsx)(jc,{title:mc("Event Image Options","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:(0,l.jsx)(kc,{label:mc("Image size","citadela-directory"),value:n,options:[{label:mc("Thumbnail","citadela-directory"),value:"thumbnail"},{label:mc("Medium","citadela-directory"),value:"medium"}],onChange:e=>{t({imageSize:e})}})})]},"inspector"),(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks","ctdl-item-events",e.className,{"show-item-featured-image":!!o},{"show-item-description":!!r},{"show-item-price":!!c}),children:[(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(Cc,{icon:d.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:d.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:d.description})]})]}),(0,l.jsx)("div",{class:"citadela-block-header",children:(0,l.jsx)(vc,{tagName:"h3",value:e.title,onChange:e=>t({title:e}),placeholder:d.title,keepPlaceholderOnFocus:!0,allowedFormats:[]})}),(0,l.jsx)("div",{class:"citadela-block-articles",children:(0,l.jsxs)("div",{class:"citadela-block-articles-wrap",children:[(0,l.jsxs)("article",{class:"citadela-event",children:[(0,l.jsx)("div",{class:"citadela-event-date",children:(0,l.jsx)("span",{class:"event-date-label"})}),(0,l.jsxs)("div",{class:"citadela-event-body",children:[(0,l.jsx)("div",{class:"citadela-event-thumbnail"}),(0,l.jsxs)("div",{class:"citadela-event-data",children:[(0,l.jsx)("div",{class:"citadela-event-datetime"}),(0,l.jsxs)("div",{class:"citadela-event-title",children:[(0,l.jsx)("span",{class:"event-title"}),(0,l.jsx)("span",{class:"event-price"})]}),(0,l.jsxs)("div",{class:"citadela-event-description",children:[(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"})]})]})]})]}),(0,l.jsxs)("article",{class:"citadela-event",children:[(0,l.jsx)("div",{class:"citadela-event-date",children:(0,l.jsx)("span",{class:"event-date-label"})}),(0,l.jsxs)("div",{class:"citadela-event-body",children:[(0,l.jsx)("div",{class:"citadela-event-thumbnail"}),(0,l.jsxs)("div",{class:"citadela-event-data",children:[(0,l.jsx)("div",{class:"citadela-event-datetime"}),(0,l.jsxs)("div",{class:"citadela-event-title",children:[(0,l.jsx)("span",{class:"event-title"}),(0,l.jsx)("span",{class:"event-price"})]}),(0,l.jsxs)("div",{class:"citadela-event-description",children:[(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"})]})]})]})]}),(0,l.jsxs)("article",{class:"citadela-event",children:[(0,l.jsx)("div",{class:"citadela-event-date",children:(0,l.jsx)("span",{class:"event-date-label"})}),(0,l.jsxs)("div",{class:"citadela-event-body",children:[(0,l.jsx)("div",{class:"citadela-event-thumbnail"}),(0,l.jsxs)("div",{class:"citadela-event-data",children:[(0,l.jsx)("div",{class:"citadela-event-datetime"}),(0,l.jsxs)("div",{class:"citadela-event-title",children:[(0,l.jsx)("span",{class:"event-title"}),(0,l.jsx)("span",{class:"event-price"})]}),(0,l.jsxs)("div",{class:"citadela-event-description",children:[(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"})]})]})]})]})]})})]})]})}},save:()=>null});const{Component:Nc,createRef:Ac,useState:Oc}=wp.element,{__:Hc,sprintf:Bc}=wp.i18n,{InspectorControls:Fc,InnerBlocks:Pc}=wp.blockEditor,{PanelBody:Dc,ToggleControl:Lc,Icon:Mc,RadioControl:Rc,TextareaControl:$c,SelectControl:zc,TextControl:Ec,BaseControl:Vc,RangeControl:Uc}=wp.components,{getBlockName:Gc,getBlockParents:Wc}=wp.data.select("core/block-editor");let Jc=a.map((e=>({label:e.name,value:e.codeName})));Jc.push({label:Hc("Custom","citadela-directory"),value:"custom"});const qc=({attributes:e,setAttributes:t})=>{const{unit:a,height:i}=e,[s,o]=Oc(i);let r={px:{min:300,max:800},vh:{min:30,max:100},vw:{min:30,max:100}},c=1;return"px"!=a&&(c=.1),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Vc,{label:Hc("Height unit","citadela-directory"),children:(0,l.jsx)(zc,{value:a,options:[{label:"px",value:"px"},{label:"vh",value:"vh"},{label:"vw",value:"vw"}],onChange:e=>{o(r[e].min),t({unit:e,height:r[e].min})}})}),(0,l.jsx)(Vc,{label:Hc("Recommended map height","citadela-directory")+`: ${i}${a}`,help:Hc("Minimum map height may differ of defined value due to needs of map's inside content.","citadela-directory"),id:"spacer-height",children:(0,l.jsx)(Uc,{value:s,onChange:e=>{let l=e;o(l),""==e&&(o(""),l=r[a].min),t("px"!=a?{height:l?parseFloat(l):l}:{height:l?parseInt(l):l})},min:r[a].min,max:r[a].max,step:c})})]})},Xc=({attributes:e,setAttributes:t})=>{const{outsideFormBreakpoint:a}=e,[i,s]=Oc(a);return(0,l.jsx)(Vc,{label:Hc("Form inside map breakpoint","citadela-directory"),help:Hc("Search form is displayed inside map on screen width larger than","citadela-directory")+` ${a}px.`,id:"mobile-width",children:(0,l.jsx)(Ec,{type:"number",value:i,onChange:e=>{let a=e;s(a),""==e&&(a=600),t({outsideFormBreakpoint:a?parseInt(a):a})},step:1})})},Yc=JSON.parse('{"apiVersion":1,"name":"citadela-directory/automatic-posts-map","category":"citadela-posts-blocks","icon":"vault","attributes":{"limitPosts":{"type":"boolean","default":false},"maxPosts":{"type":"number","default":50},"withSearchForm":{"type":"boolean","default":false},"theme":{"type":"string","default":"citadela"},"themeOSM":{"type":"string","default":"default"},"customTheme":{"type":"string","default":""},"provider":{"type":"string","default":"openstreetmap"},"inColumn":{"type":"boolean","default":false},"coverHeight":{"type":"boolean","default":false},"unit":{"type":"string","default":"px"},"height":{"type":"number","default":500},"outsideFormBreakpoint":{"type":"number","default":600},"noDataBehavior":{"type":"string","default":"empty-map"},"noDataText":{"type":"string","default":""},"clusterGridSize":{"type":"number","default":80}},"example":{"attributes":{"height":300}},"editorScript":"citadela-directory-blocks"}'),{__:Kc}=wp.i18n,{registerBlockType:Qc}=wp.blocks,{InnerBlocks:Zc}=wp.blockEditor,{Fragment:en}=wp.element,{name:tn}=Yc;Qc(tn,{...Yc,title:Kc("Automatic Listing Map (for posts)","citadela-directory"),description:Kc("Displays relevant posts automatically based on current page. For example search results or post detail location.","citadela-directory"),edit:class extends Nc{constructor(){super(...arguments),this.isParentColumn=this.isParentColumn.bind(this),this.updateMainBlockDivWrapper=this.updateMainBlockDivWrapper.bind(this),this.blockRef=Ac()}componentDidMount(){const{attributes:e,setAttributes:t}=this.props,a=this.isParentColumn();e.inColumn!==a&&t({inColumn:a}),this.updateMainBlockDivWrapper()}componentDidUpdate(){this.updateMainBlockDivWrapper()}isParentColumn(){const e=Wc(this.props.clientId);return e.length>0&&"core/column"===Gc(e[e.length-1])}updateMainBlockDivWrapper(){const{withSearchForm:e,coverHeight:t,inColumn:a}=this.props.attributes;let l=this.blockRef.current.parentNode;a&&t?l.dataset.coverHeight="true":delete l.dataset.coverHeight,e?l.dataset.withSearchForm="true":delete l.dataset.withSearchForm}render(){const{attributes:e,setAttributes:t,name:a,isSelected:i}=this.props,{limitPosts:s,maxPosts:o,withSearchForm:r,theme:c,themeOSM:n,customTheme:d,provider:p,clusterGridSize:u,coverHeight:h,unit:g,height:b,inColumn:m,noDataBehavior:y,noDataText:v}=e,j=wp.blocks.getBlockType(a),f=`${CitadelaDirectorySettings.images}/blocks/map.png`,k={...void 0===b||m&&h?{}:{height:b+g}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(Fc,{children:[(0,l.jsxs)(Dc,{title:Hc("Options","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:[(0,l.jsx)(zc,{label:Hc("Maps provider","citadela-directory"),value:p,options:[{label:"Google Maps",value:"google-map"},{label:"OpenStreetMap",value:"openstreetmap"}],onChange:e=>{t({provider:e})}}),(0,l.jsx)(Lc,{label:Hc("With search form","citadela-directory"),checked:r,onChange:e=>t({withSearchForm:e})}),r&&(0,l.jsx)(Xc,{attributes:e,setAttributes:t}),(0,l.jsx)(zc,{label:Hc("Empty map behavior","citadela-directory"),value:y,options:[{label:Hc("Show empty map","citadela-directory"),value:"empty-map"},{label:Hc("Hide map","citadela-directory"),value:"hidden-map"}],onChange:e=>{t({noDataBehavior:e})}}),"empty-map"==y&&(0,l.jsx)(Ec,{label:Hc("Text displayed on empty map","citadela-directory"),value:v,onChange:e=>{t({noDataText:e})}})]}),(0,l.jsxs)(Dc,{title:Hc("Custom Height Settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[m&&(0,l.jsx)(Lc,{label:Hc("Cover column height","citadela-directory"),help:Hc("Works when block is the only block in a column.","citadela-directory"),checked:h,onChange:e=>{t({coverHeight:e})}}),(!m||m&&!h)&&(0,l.jsx)(qc,{attributes:e,setAttributes:t})]}),(0,l.jsx)(Dc,{title:Hc("Marker Cluster Settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:(0,l.jsx)(x,{label:Hc("Cluster radius in px","citadela-directory"),help:0==u?Hc("Clusters are disabled.","citadela-directory"):Bc(Hc("Markers in distance less than %spx radius are grouped into clusters. Set 0 to disable clusters.","citadela-directory"),u),rangeValue:u,onChange:e=>{t({clusterGridSize:e})},min:0,max:200,initial:80,allowReset:!0})}),"google-map"==p&&(0,l.jsxs)(Dc,{title:Hc("Appearance","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(Rc,{label:Hc("Theme","citadela-directory"),selected:c,options:Jc,onChange:e=>{t({theme:e})}}),"custom"==c&&(0,l.jsx)($c,{label:Hc("Style JSON","citadela-directory"),help:(0,l.jsxs)(l.Fragment,{children:[Hc("Copy and paste the JSON from this website:","citadela-directory")," ",(0,l.jsx)("a",{target:"_blank",href:"https://mapstyle.withgoogle.com/",children:"https://mapstyle.withgoogle.com/"})]}),value:d,onChange:e=>{t({customTheme:e})}})]}),"openstreetmap"==p&&(0,l.jsx)(Dc,{title:Hc("Appearance","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:(0,l.jsx)(Rc,{label:Hc("Theme","citadela-directory"),selected:n,options:[{label:Hc("Default","citadela-directory"),value:"default"},{label:Hc("Silver","citadela-directory"),value:"silver"},{label:Hc("Retro","citadela-directory"),value:"retro"},{label:Hc("Dark","citadela-directory"),value:"dark"},{label:Hc("Night","citadela-directory"),value:"night"}],onChange:e=>{t({themeOSM:e})}})}),(0,l.jsxs)(Dc,{title:Hc("Performance Settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(Lc,{label:Hc("Limit displayed posts","citadela-directory"),checked:s,onChange:e=>t({limitPosts:e})}),s&&(0,l.jsx)(Ec,{label:Hc("Maximum displayed posts","citadela-directory"),type:"number",onChange:e=>{t({maxPosts:parseInt(e)})},min:1,value:o})]})]},"inspector"),(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks ctdl-automatic-posts-map",e.className,{"custom-height":!(void 0===b||m&&h)},{"cover-height":!(!m||!h)}),ref:this.blockRef,children:[(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(Mc,{icon:j.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:j.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:j.description})]})]}),(0,l.jsx)("div",{class:"citadela-google-map",style:k,children:(0,l.jsx)("div",{class:"citadela-map-image",style:{backgroundImage:"url("+f+")"}})})]}),r&&(0,l.jsx)(Pc,{template:[["citadela-directory/posts-search-form",{}]],templateLock:"all"})]})}},save:e=>{const{attributes:{withSearchForm:t}}=e;return(0,l.jsx)(en,{children:t&&(0,l.jsx)(Zc.Content,{template:[["citadela-directory/posts-search-form",{}]],templateLock:"all"})})}});const{__:an,sprintf:ln}=wp.i18n,{Component:sn,createRef:on,useState:rn}=wp.element,{InspectorControls:cn,InnerBlocks:nn}=wp.blockEditor,{PanelBody:dn,ToggleControl:pn,Icon:un,RadioControl:hn,TextareaControl:gn,SelectControl:bn,TextControl:mn,BaseControl:yn,RangeControl:xn}=wp.components,{apiFetch:vn}=wp,{getBlockName:jn,getBlockParents:fn}=wp.data.select("core/block-editor");let kn=a.map((e=>({label:e.name,value:e.codeName})));kn.push({label:an("Custom","citadela-directory"),value:"custom"});const _n=({attributes:e,setAttributes:t})=>{const{unit:a,height:i}=e,[s,o]=rn(i);let r={px:{min:300,max:800},vh:{min:30,max:100},vw:{min:30,max:100}},c=1;return"px"!=a&&(c=.1),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(yn,{label:an("Height unit","citadela-directory"),children:(0,l.jsx)(bn,{value:a,options:[{label:"px",value:"px"},{label:"vh",value:"vh"},{label:"vw",value:"vw"}],onChange:e=>{o(r[e].min),t({unit:e,height:r[e].min})}})}),(0,l.jsx)(yn,{label:an("Recommended map height","citadela-directory")+`: ${i}${a}`,help:an("Minimum map height may differ of defined value due to needs of map's inside content.","citadela-directory"),id:"spacer-height",children:(0,l.jsx)(xn,{value:s,onChange:e=>{let l=e;o(l),""==e&&(o(""),l=r[a].min),t("px"!=a?{height:l?parseFloat(l):l}:{height:l?parseInt(l):l})},min:r[a].min,max:r[a].max,step:c})})]})},Cn=JSON.parse('{"apiVersion":1,"name":"citadela-directory/posts-map","category":"citadela-posts-blocks","icon":"location-alt","attributes":{"limitPosts":{"type":"boolean","default":false},"maxPosts":{"type":"number","default":50},"postType":{"type":"string","default":"post"},"withSearchForm":{"type":"boolean","default":false},"category":{"type":"string","default":""},"location":{"type":"string","default":""},"theme":{"type":"string","default":"citadela"},"themeOSM":{"type":"string","default":"default"},"customTheme":{"type":"string","default":""},"provider":{"type":"string","default":"openstreetmap"},"inColumn":{"type":"boolean","default":false},"coverHeight":{"type":"boolean","default":false},"unit":{"type":"string","default":"px"},"height":{"type":"number","default":500},"outsideFormBreakpoint":{"type":"number","default":600},"clusterGridSize":{"type":"number","default":80}},"example":{"attributes":{"height":300}},"editorScript":"citadela-directory-blocks"}'),{__:wn,setLocaleData:Tn}=wp.i18n,{registerBlockType:Sn}=wp.blocks,{Fragment:In}=wp.element,{InnerBlocks:Nn}=wp.blockEditor,{name:An}=Cn;Sn(An,{...Cn,title:wn("Listing Map (for posts)","citadela-directory"),description:wn("Displays posts on map based on filters. For example posts only from specific category or location.","citadela-directory"),edit:class extends sn{constructor(){super(...arguments),this.isParentColumn=this.isParentColumn.bind(this),this.updateMainBlockDivWrapper=this.updateMainBlockDivWrapper.bind(this),this.blockRef=on(),this.state={categoriesList:[],locationsList:[],categoriesList:[],postLocationsList:[]}}componentDidMount(){const{attributes:e,setAttributes:t}=this.props,a=this.isParentColumn();e.inColumn!==a&&t({inColumn:a}),this.updateMainBlockDivWrapper(),this.fetchRequest=vn({path:"/wp/v2/categories/?per_page=-1"}).then((e=>{this.setState({categoriesList:e})})).catch((()=>{this.setState({categoriesList:[]})})),this.fetchRequest=vn({path:"/wp/v2/citadela-post-location/?per_page=-1"}).then((e=>{this.setState({locationsList:e})})).catch((()=>{this.setState({locationsList:[]})}))}componentDidUpdate(){this.updateMainBlockDivWrapper()}isParentColumn(){const e=fn(this.props.clientId);return e.length>0&&"core/column"===jn(e[e.length-1])}updateMainBlockDivWrapper(){const{withSearchForm:e,coverHeight:t,inColumn:a}=this.props.attributes;let l=this.blockRef.current.parentNode;a&&t?l.dataset.coverHeight="true":delete l.dataset.coverHeight,e?l.dataset.withSearchForm="true":delete l.dataset.withSearchForm}render(){const{categoriesList:e,locationsList:t}=this.state,{attributes:a,setAttributes:i,name:s}=this.props,{limitPosts:o,maxPosts:r,withSearchForm:c,category:n,location:d,theme:p,themeOSM:u,customTheme:h,provider:g,clusterGridSize:b,coverHeight:m,unit:y,height:v,inColumn:j}=a,f=wp.blocks.getBlockType(s),k=`${CitadelaDirectorySettings.images}/blocks/map.png`,C={...void 0===v||j&&m?{}:{height:v+y}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(cn,{children:[(0,l.jsxs)(dn,{title:an("Options","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:[(0,l.jsx)(bn,{label:an("Maps provider","citadela-directory"),value:g,options:[{label:"Google Maps",value:"google-map"},{label:"OpenStreetMap",value:"openstreetmap"}],onChange:e=>{i({provider:e})}}),(0,l.jsx)(pn,{label:an("With search form","citadela-directory"),checked:c,onChange:e=>i({withSearchForm:e})})]}),(0,l.jsxs)(dn,{title:an("Filters","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:[(0,l.jsx)(de,{categoriesList:e,label:an("Category","citadela-directory"),noOptionLabel:an("All","citadela-directory"),selectedCategoryId:n,onChange:e=>{i({category:e})}}),(0,l.jsx)(de,{categoriesList:t,label:an("Location","citadela-directory"),noOptionLabel:an("All","citadela-directory"),selectedCategoryId:d,onChange:e=>{i({location:e})}})]}),(0,l.jsxs)(dn,{title:an("Custom Height Settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[j&&(0,l.jsx)(pn,{label:an("Cover column height","citadela-directory"),help:an("Works when block is the only block in a column.","citadela-directory"),checked:m,onChange:e=>{i({coverHeight:e})}}),(!j||j&&!m)&&(0,l.jsx)(_n,{attributes:a,setAttributes:i})]}),(0,l.jsx)(dn,{title:an("Marker Cluster Settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:(0,l.jsx)(x,{label:an("Cluster radius in px","citadela-directory"),help:0==b?an("Clusters are disabled.","citadela-directory"):ln(an("Markers in distance less than %spx radius are grouped into clusters. Set 0 to disable clusters.","citadela-directory"),b),rangeValue:b,onChange:e=>{i({clusterGridSize:e})},min:0,max:200,initial:80,allowReset:!0})}),"google-map"==g&&(0,l.jsxs)(dn,{title:an("Appearance","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(hn,{label:an("Theme","citadela-directory"),selected:p,options:kn,onChange:e=>{i({theme:e})}}),"custom"==p&&(0,l.jsx)(gn,{label:an("Style JSON","citadela-directory"),help:(0,l.jsxs)(l.Fragment,{children:[an("Copy and paste the JSON from this website:","citadela-directory")," ",(0,l.jsx)("a",{target:"_blank",href:"https://mapstyle.withgoogle.com/",children:"https://mapstyle.withgoogle.com/"})]}),value:h,onChange:e=>{i({customTheme:e})}})]}),"openstreetmap"==g&&(0,l.jsx)(dn,{title:an("Appearance","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:(0,l.jsx)(hn,{label:an("Theme","citadela-directory"),selected:u,options:[{label:an("Default","citadela-directory"),value:"default"},{label:an("Silver","citadela-directory"),value:"silver"},{label:an("Retro","citadela-directory"),value:"retro"},{label:an("Dark","citadela-directory"),value:"dark"},{label:an("Night","citadela-directory"),value:"night"}],onChange:e=>{i({themeOSM:e})}})}),(0,l.jsxs)(dn,{title:an("Performance Settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(pn,{label:an("Limit displayed posts","citadela-directory"),checked:o,onChange:e=>i({limitPosts:e})}),o&&(0,l.jsx)(mn,{label:an("Maximum displayed posts","citadela-directory"),type:"number",onChange:e=>{i({maxPosts:parseInt(e)})},min:1,value:r})]})]},"inspector"),(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks ctdl-posts-map",a.className,{"custom-height":!(void 0===v||j&&m)},{"cover-height":!(!j||!m)}),ref:this.blockRef,children:[(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(un,{icon:f.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:f.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:f.description})]})]}),(0,l.jsx)("div",{class:"citadela-google-map",style:C,children:(0,l.jsx)("div",{class:"citadela-map-image",style:{backgroundImage:"url("+k+")"}})})]}),c&&(0,l.jsx)(nn,{template:[["citadela-directory/posts-search-form",{}]],templateLock:"all"})]})}},save:e=>{const{attributes:{withSearchForm:t}}=e;return(0,l.jsx)(In,{children:t&&(0,l.jsx)(Nn.Content,{template:[["citadela-directory/posts-search-form",{}]],templateLock:"all"})})}});const{__:On,_x:Hn}=wp.i18n,{Component:Bn,Fragment:Fn}=wp.element,{PanelBody:Pn,SelectControl:Dn,ToggleControl:Ln}=wp.components;class Mn extends Bn{render(){const{attributes:e,setAttributes:t}=this.props,{buttonBackgroundColor:a,buttonTextColor:i,backgroundBlur:s,blurRadius:o,backgroundType:r,backgroundColorType:c,backgroundColor:n,backgroundGradient:d,borderColor:u,borderRadius:h,borderWidth:g,boxShadowType:b,boxShadow:m,hideInputLocation:y}=e,v="undefined"!=typeof CitadelaProSettings;return(0,l.jsxs)(Fn,{children:[(0,l.jsx)(Pn,{title:On("Form settings","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:(0,l.jsx)(Ln,{label:On("Hide Location input","citadela-directory"),checked:y,onChange:e=>t({hideInputLocation:e})})}),v&&(0,l.jsxs)(Pn,{title:On("Background settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(Dn,{label:On("Background","citadela-directory"),value:r,options:[{label:On("None","citadela-directory"),value:"none"},{label:On("With background","citadela-directory"),value:"background"},{label:On("Background on collapsed form","citadela-directory"),value:"background-collapsed"}],onChange:e=>{t({backgroundType:e})}}),"none"!=r&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Ln,{label:On("Blur background","citadela-directory"),checked:s,onChange:e=>t({backgroundBlur:e})}),s&&(0,l.jsx)(x,{label:On("Blur radius","citadela-directory")+`: ${o}px`,rangeValue:o,onChange:e=>{t({blurRadius:e})},min:0,max:50,initial:10,allowReset:!0}),(0,l.jsx)(Dn,{label:On("Background type","citadela-directory"),value:c,options:[{label:On("Solid color","citadela-directory"),value:"solid"},{label:On("Gradient","citadela-directory"),value:"gradient"}],onChange:e=>{t({backgroundColorType:e})}}),"solid"==c&&(0,l.jsx)(p,{label:On("Background color","citadela-directory"),color:n,onChange:e=>{t({backgroundColor:e})}}),"gradient"==c&&(0,l.jsx)(pl,{label:On("Background gradient","citadela-blocks"),gradient:d,onFirstColorChange:e=>{t({backgroundGradient:{first:e,second:d.second,degree:d.degree,type:d.type}})},onSecondColorChange:e=>{t({backgroundGradient:{first:d.first,second:e,degree:d.degree,type:d.type}})},onDegreeChange:e=>{t({backgroundGradient:{first:d.first,second:d.second,degree:null==e?90:e,type:d.type}})},onGradientTypeChange:e=>{t({backgroundGradient:{first:d.first,second:d.second,degree:d.degree,type:e?"radial":"linear"}})}})]})]}),(0,l.jsxs)(Pn,{title:On("Border settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(Dn,{label:On("Border width","citadela-directory"),value:g,options:[{label:On("No border","citadela-directory"),value:"none"},{label:On("Thin border","citadela-directory"),value:"thin"},{label:On("Thick border","citadela-directory"),value:"thick"}],onChange:e=>{t({borderWidth:e})}}),"none"!=g&&(0,l.jsx)(p,{label:On("Border color","citadela-directory"),color:u,onChange:e=>{t({borderColor:e})},disableAlpha:!0}),(0,l.jsx)(x,{label:On("Border radius","citadela-directory"),rangeValue:h,onChange:e=>{t({borderRadius:e})},min:0,max:40,initial:40,allowNoValue:!0,allowReset:!0})]}),(0,l.jsxs)(Pn,{title:On("Shadow settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(Dn,{label:On("Shadow","citadela-directory"),value:b,options:[{label:On("No shadow","citadela-directory"),value:"none"},{label:On("Default shadow","citadela-directory"),value:"default"},{label:On("Custom shadow","citadela-directory"),value:"custom"}],onChange:e=>{t({boxShadowType:e})}}),"custom"===b&&(0,l.jsx)(el,{value:void 0===m?{}:m,onChange:e=>{t({boxShadow:e})},allowColorReset:!1})]}),v&&(0,l.jsxs)(Pn,{title:On("Button settings","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(p,{label:On("Background color","citadela-directory"),color:a,onChange:e=>{t({buttonBackgroundColor:e})}}),(0,l.jsx)(p,{label:On("Text color","citadela-directory"),color:i,onChange:e=>{t({buttonTextColor:e})}})]})]})}}const Rn=JSON.parse('{"apiVersion":1,"name":"citadela-directory/posts-search-form","category":"citadela-posts-blocks","icon":"search","attributes":{"buttonBackgroundColor":{"type":"string","default":""},"buttonTextColor":{"type":"string","default":""},"backgroundType":{"type":"string","default":"none"},"backgroundColorType":{"type":"string","default":"solid"},"backgroundColor":{"type":"string","default":""},"backgroundGradient":{"type":"object","default":{"first":"#dddddd","second":"#f6f6f6","degree":90,"type":"linear"}},"backgroundBlur":{"type":"boolean","default":false},"blurRadius":{"type":"number","default":10},"borderWidth":{"type":"string","default":"thin"},"borderColor":{"type":"string","default":""},"borderRadius":{"type":"number"},"boxShadow":{"type":"object"},"boxShadowType":{"type":"string","default":"default"},"align":{"type":"string","default":"center"},"hideInputLocation":{"type":"boolean","default":false}},"example":{},"editorScript":"citadela-directory-blocks"}'),{__:$n}=wp.i18n,{registerBlockType:zn}=wp.blocks,{ToolbarGroup:En,ToolbarItem:Vn,Icon:Un}=wp.components,{InspectorControls:Gn,BlockControls:Wn}=wp.blockEditor,{name:Jn}=Rn;zn(Jn,{...Rn,title:$n("Posts Search Form","citadela-directory"),description:$n("Search form that allows visitors to search posts by keyword, category or location.","citadela-directory"),edit:e=>{const t="undefined"!=typeof CitadelaProSettings,{attributes:a,setAttributes:i,name:s}=e,{buttonBackgroundColor:o,buttonTextColor:r,backgroundBlur:c,blurRadius:n,backgroundType:d,backgroundColorType:p,backgroundColor:u,backgroundGradient:h,align:g,borderWidth:b,borderColor:m,borderRadius:y,boxShadow:x,boxShadowType:v,hideInputLocation:j}=a,f=wp.blocks.getBlockType(s);let k={},C={},w={},T={},S={},_={},I=!1;if(t){I="background"==d||"background-collapsed"==d,"none"!=d&&("solid"==p&&(k={...k,...u?{backgroundColor:u}:{}}),"gradient"==p&&(k={...k,backgroundImage:"linear"==h.type?`linear-gradient(${h.degree}deg, ${h.first} 0%, ${h.second} 100%)`:`radial-gradient(${h.first} 0%, ${h.second} 100%)`}),c&&(k={...k,WebkitBackdropFilter:`blur(${n}px)`,backdropFilter:`blur(${n}px)`})),T={...o?{backgroundColor:o}:{}},S={...o?{borderColor:o}:{}},_={...r?{color:r}:{}};const e="custom"===v&&x?`${x.horizontal}px ${x.vertical}px ${x.blur}px ${x.spread}px rgba(${x.color.r}, ${x.color.g}, ${x.color.b}, ${x.color.a})`:"";C={..."none"!=b&&m?{borderColor:m}:{},...y>=0?{borderRadius:`${y}px`}:{},...e?{boxShadow:e}:{}},w={...y>=0?{borderRadius:`${y}px`}:{}}}return(0,l.jsxs)(l.Fragment,{children:[t&&(0,l.jsx)(Wn,{children:(0,l.jsx)(En,{children:(0,l.jsx)(Vn,{children:e=>(0,l.jsx)(wl,{value:g,onChange:e=>i({align:e}),leftLabel:$n("Align Left","citadela-directory"),centerLabel:$n("Align Center","citadela-directory"),rightLabel:$n("Align Right","citadela-directory"),toggleProps:e,allowJustify:!0,justifyLabel:$n("Align Justify","citadela-directory")})})})}),t&&(0,l.jsx)(Gn,{children:(0,l.jsx)(Mn,{attributes:a,setAttributes:i})}),(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks","ctdl-posts-search-form",a.className,t?`border-${b}`:null,t?`shadow-${v}`:null,t?`align-${g}`:null,j?"hidden-input-location":null,t&&y?"custom-border-radius":null,t&&"background"==d?"has-background":null,t&&"background-collapsed"==d?"has-background-collapsed":null,t&&I&&c?"blur-background":null,t&&I&&"solid"==p?"solid-background":null,t&&I&&"solid"==p&&u?"custom-solid-background-color":null,t&&I&&"gradient"==p?"gradient-background":null,t&&o?"custom-button-background-color":null,t&&r?"custom-button-text-color":null),children:[(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(Un,{icon:f.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:f.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:f.description})]})]}),(0,l.jsx)("div",{class:"citadela-block-form search-form-component-container",style:k,children:(0,l.jsxs)("div",{class:"search-form",style:C,children:[(0,l.jsx)("div",{class:"data-type-1",children:(0,l.jsx)("div",{class:"input-container keyword",style:C,children:(0,l.jsxs)("div",{class:"input-data",children:[(0,l.jsx)("div",{class:"label"}),(0,l.jsx)("div",{class:"input",style:w})]})})}),(0,l.jsxs)("div",{class:"data-type-2",children:[(0,l.jsx)("div",{class:"input-container category",style:C,children:(0,l.jsxs)("div",{class:"input-data",children:[(0,l.jsx)("div",{class:"label"}),(0,l.jsx)("div",{class:"input",style:w})]})}),!j&&(0,l.jsx)("div",{class:"input-container location",style:C,children:(0,l.jsxs)("div",{class:"input-data",children:[(0,l.jsx)("div",{class:"label"}),(0,l.jsx)("div",{class:"input",style:w})]})})]}),(0,l.jsx)("div",{class:"data-submit",children:(0,l.jsx)("div",{class:"input-container sf-button",style:{...w,...T,...S},children:(0,l.jsx)("div",{class:"input-data",children:(0,l.jsx)("span",{class:"submit",style:_,children:$n("Search","citadela-directory")})})})})]})})]})]})},save:()=>null});const qn=JSON.parse('{"apiVersion":1,"name":"citadela-directory/posts-search-results","category":"citadela-posts-blocks","icon":"excerpt-view","attributes":{"layout":{"type":"string","default":"box"},"size":{"type":"string","default":"medium"},"showFeaturedImage":{"type":"boolean","default":true},"showDate":{"type":"boolean","default":true},"showDescription":{"type":"boolean","default":true},"showCategories":{"type":"boolean","default":true},"showLocations":{"type":"boolean","default":false},"postsOrderBy":{"type":"string","default":"date"},"postsOrder":{"type":"string","default":"DESC"},"borderWidth":{"type":"string","default":"none"},"borderColor":{"type":"string","default":""},"backgroundColor":{"type":"string","default":""},"textColor":{"type":"string","default":""},"decorColor":{"type":"string","default":""},"dateColor":{"type":"string","default":""},"skipStartPosts":{"type":"number","default":0}},"example":{},"editorScript":"citadela-directory-blocks"}'),{__:Xn}=wp.i18n,{Fragment:Yn}=wp.element,{registerBlockType:Kn}=wp.blocks,{BlockControls:Qn,InspectorControls:Zn}=wp.blockEditor,{ToolbarGroup:ed,ToolbarItem:td,PanelBody:ad,ToggleControl:ld,Icon:id,SelectControl:sd,RadioControl:od,RangeControl:rd,BaseControl:cd,ColorPalette:nd,ColorIndicator:dd}=wp.components,{name:pd}=qn;Kn(pd,{...qn,title:Xn("Posts Search Results","citadela-directory"),description:Xn("Displays posts based on current results from search form.","citadela-directory"),edit:({name:e,attributes:t,setAttributes:a})=>{const i=wp.blocks.getBlockType(e),{layout:s,size:o,showFeaturedImage:r,showDate:c,showDescription:n,showCategories:d,showLocations:u,postsOrder:h,postsOrderBy:g,borderColor:b,backgroundColor:m,textColor:y,decorColor:x,borderWidth:v,skipStartPosts:j,dateColor:f}=t,k="undefined"!=typeof CitadelaProSettings,C=parseInt(CitadelaDirectorySettings.wpSettings.postsPerPage),w=[{color:"#00d1b2"},{color:"#3373dc"},{color:"#209cef"},{color:"#22d25f"},{color:"#ffdd57"},{color:"#ff3860"},{color:"#7941b6"},{color:"#392F43"}];var T="grid-type-1";"list"==s&&(T="grid-type-3"),"simple"==s&&(T="");let S={},_={},I={},N={},A={},O={},H={};return k&&(S={...x?{color:x}:{}},_={..."simple"==s&&y?{color:y}:{},..."simple"==s&&m?{backgroundColor:m}:{},..."simple"==s&&b?{borderColor:b}:{}},I={..."simple"!=s&&y?{color:y}:{},..."simple"!=s&&m?{backgroundColor:m}:{},..."simple"!=s&&b?{borderColor:b}:{}},N={..."simple"!=s&&b?{borderColor:b}:{}},A={..."simple"!=s&&b?{borderColor:b}:{},...x?{color:x}:{},...x?{borderColor:x}:{}},O={..."list"==s&&x?{color:x}:{},..."box"==s&&x?{backgroundColor:x}:{},..."box"==s&&f?{color:f}:{}},H={..."simple"==s&&x?{color:x}:{}}),(0,l.jsxs)(Yn,{children:[(0,l.jsx)(Qn,{children:(0,l.jsxs)(ed,{children:[(0,l.jsx)(td,{children:e=>(0,l.jsx)(ee,{allowedLayouts:["simple","list","box"],value:s,onChange:e=>a({layout:e}),toggleProps:e})}),["list","box"].includes(s)&&(0,l.jsx)(td,{children:e=>(0,l.jsx)(re,{value:o,onChange:e=>a({size:e}),toggleProps:e})})]})},"controls"),(0,l.jsxs)(Zn,{children:[(0,l.jsx)(ad,{title:Xn("Filters","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:(0,l.jsx)(rd,{label:Xn("Skip number of posts from start","citadela-directory"),value:j,onChange:e=>{a({skipStartPosts:e})},min:0,max:12})}),(0,l.jsxs)(ad,{title:Xn("Order Options","citadela-directory"),initialOpen:!0,className:"citadela-panel",children:[(0,l.jsx)(sd,{label:Xn("Order by","citadela-directory"),value:g,options:[{label:Xn("Date","citadela-directory"),value:"date"},{label:Xn("Title","citadela-directory"),value:"title"},{label:Xn("Random","citadela-directory"),value:"rand"}],onChange:e=>{a({postsOrderBy:e})}}),"rand"!=g&&(0,l.jsx)(od,{selected:h,options:[{label:Xn("Descending","citadela-directory"),value:"DESC"},{label:Xn("Ascending","citadela-directory"),value:"ASC"}],onChange:e=>{a({postsOrder:e})}})]}),(0,l.jsxs)(ad,{title:Xn("Item Details","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(ld,{label:Xn("Show featured image","citadela-directory"),checked:r,onChange:e=>a({showFeaturedImage:e})}),(0,l.jsx)(ld,{label:Xn("Show date","citadela-directory"),checked:c,onChange:e=>a({showDate:e})}),(0,l.jsx)(ld,{label:Xn("Show description","citadela-directory"),checked:n,onChange:e=>a({showDescription:e})}),(0,l.jsx)(ld,{label:Xn("Show categories","citadela-directory"),checked:d,onChange:e=>a({showCategories:e})}),(0,l.jsx)(ld,{label:Xn("Show locations","citadela-directory"),checked:u,onChange:e=>a({showLocations:e})})]}),k&&(0,l.jsxs)(ad,{title:Xn("Design Options","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsxs)(cd,{label:Xn("Decoration color","citadela-directory"),className:"block-editor-panel-color-settings",children:[x&&(0,l.jsx)(dd,{colorValue:x}),(0,l.jsx)(nd,{value:x,onChange:e=>{a({decorColor:e})},colors:w})]}),"box"==s&&(0,l.jsxs)(cd,{label:Xn("Date color","citadela-directory"),className:"block-editor-panel-color-settings",children:[f&&(0,l.jsx)(dd,{colorValue:f}),(0,l.jsx)(nd,{value:f,onChange:e=>{a({dateColor:e})},colors:w})]}),(0,l.jsxs)(cd,{label:Xn("Text color","citadela-directory"),className:"block-editor-panel-color-settings",children:[y&&(0,l.jsx)(dd,{colorValue:y}),(0,l.jsx)(nd,{value:y,onChange:e=>{a({textColor:e})},colors:w})]}),(0,l.jsx)(p,{label:Xn("Background color","citadela-directory"),color:m,onChange:e=>{a({backgroundColor:e})}}),(0,l.jsx)(p,{label:Xn("Borders color","citadela-directory"),color:b,onChange:e=>{a({borderColor:e})}}),(0,l.jsx)(sd,{label:Xn("Borders width","citadela-directory"),value:v,options:[{label:Xn("No borders","citadela-directory"),value:"none"},{label:Xn("Thin borders","citadela-directory"),value:"thin"},{label:Xn("Thick borders","citadela-directory"),value:"thick"}],onChange:e=>{a({borderWidth:e})}})]})]},"inspector"),(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks","ctdl-posts-search-results",t.className,T,"layout-"+s,"size-"+o,`border-${v}`,{"show-item-featured-image":!!r},{"show-item-date":!!t.showDate},{"show-item-description":!!n},{"show-item-categories":!!d},{"show-item-locations":!!u},{"custom-text-color":!(!k||!y)},{"custom-decor-color":!(!k||!x)},{"custom-background-color":!(!k||!m)},{"custom-date-color":!(!k||!f)}),children:[(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(id,{icon:i.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:i.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:i.description})]})]}),(0,l.jsx)("div",{class:"citadela-block-articles",children:(0,l.jsx)("div",{class:"citadela-block-articles-wrap",children:Array.from(Array(C),((e,t)=>"simple"==s?(0,l.jsx)("article",{class:"citadela-article",style:_,children:(0,l.jsxs)("div",{class:"item-content",style:I,children:[(0,l.jsx)("div",{class:"item-title",children:(0,l.jsxs)("div",{class:"item-title-wrap",children:[(0,l.jsx)("div",{class:"post-title"}),(0,l.jsx)("div",{class:"post-meta",style:H})]})}),(0,l.jsx)("div",{class:"item-thumbnail",style:S}),(0,l.jsxs)("div",{class:"item-body",children:[(0,l.jsx)("div",{class:"item-text",children:(0,l.jsxs)("div",{class:"item-description",children:[(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"})]})}),(0,l.jsxs)("div",{class:"item-footer",style:N,children:[(0,l.jsxs)("div",{class:"item-data location",style:A,children:[(0,l.jsx)("span",{class:"label"}),(0,l.jsx)("span",{class:"values"})]}),(0,l.jsxs)("div",{class:"item-data categories",style:A,children:[(0,l.jsx)("span",{class:"label"}),(0,l.jsx)("span",{class:"values"})]})]})]})]})}):(0,l.jsx)("article",{class:"citadela-article",style:_,children:(0,l.jsxs)("div",{class:"item-content",style:I,children:[(0,l.jsx)("div",{class:"item-thumbnail",style:S,children:"box"==s&&(0,l.jsx)("div",{class:"item-date",style:O})}),(0,l.jsxs)("div",{class:"item-body",children:[(0,l.jsx)("div",{class:"item-title",children:(0,l.jsxs)("div",{class:"item-title-wrap",children:["box"==s&&!r&&(0,l.jsx)("div",{class:"item-date",style:O}),(0,l.jsx)("div",{class:"post-title"}),"list"==s&&!n&&(0,l.jsx)("div",{class:"item-date",style:O}),(0,l.jsx)("div",{class:"post-subtitle"})]})}),(0,l.jsx)("div",{class:"item-text",children:(0,l.jsxs)("div",{class:"item-description",children:["list"==s&&n&&(0,l.jsx)("div",{class:"item-date",style:O}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"})]})}),(0,l.jsxs)("div",{class:"item-footer",style:N,children:[(0,l.jsxs)("div",{class:"item-data address",style:A,children:[(0,l.jsx)("span",{class:"label"}),(0,l.jsx)("span",{class:"values"})]}),(0,l.jsxs)("div",{class:"item-data web",style:A,children:[(0,l.jsx)("span",{class:"label"}),(0,l.jsx)("span",{class:"values"})]}),(0,l.jsxs)("div",{class:"item-data location",style:A,children:[(0,l.jsx)("span",{class:"label"}),(0,l.jsx)("span",{class:"values"})]}),(0,l.jsxs)("div",{class:"item-data categories",style:A,children:[(0,l.jsx)("span",{class:"label"}),(0,l.jsx)("span",{class:"values"})]})]})]})]})})))})})]})]})},save:()=>null});const ud=JSON.parse('{"apiVersion":1,"name":"citadela-directory/default-search-results","category":"citadela-posts-blocks","icon":"excerpt-view","attributes":{},"example":{},"editorScript":"citadela-directory-blocks"}'),{__:hd}=wp.i18n,{Fragment:gd}=wp.element,{registerBlockType:bd}=wp.blocks,{BlockControls:md,InspectorControls:yd}=wp.blockEditor,{ToolbarGroup:xd,ToolbarItem:vd,PanelBody:jd,ToggleControl:fd,Icon:kd,SelectControl:Cd,RadioControl:wd}=wp.components,{name:Td}=ud;bd(Td,{...ud,title:hd("Default Search Results","citadela-directory"),description:hd("Displays posts based on current results on default WordPress search results page.","citadela-directory"),edit:({name:e,attributes:t,setAttributes:a})=>{const i=wp.blocks.getBlockType(e),s=parseInt(CitadelaDirectorySettings.wpSettings.postsPerPage);return(0,l.jsx)(gd,{children:(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks","ctdl-default-search-results",t.className,"layout-list","show-item-featured-image","show-item-date","show-item-description","show-item-categories"),children:[(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(kd,{icon:i.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:i.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:i.description})]})]}),Array.from(Array(s),((e,t)=>(0,l.jsx)("article",{class:"citadela-article",children:(0,l.jsxs)("div",{class:"item-content",children:[(0,l.jsx)("div",{class:"item-thumbnail"}),(0,l.jsxs)("div",{class:"item-body",children:[(0,l.jsx)("div",{class:"item-title",children:(0,l.jsxs)("div",{class:"item-title-wrap",children:[(0,l.jsx)("div",{class:"post-title"}),(0,l.jsx)("div",{class:"post-subtitle"})]})}),(0,l.jsx)("div",{class:"item-text",children:(0,l.jsxs)("div",{class:"item-description",children:[(0,l.jsx)("div",{class:"item-date"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"})]})}),(0,l.jsx)("div",{class:"item-footer",children:(0,l.jsxs)("div",{class:"item-data categories",children:[(0,l.jsx)("span",{class:"label"}),(0,l.jsx)("span",{class:"values"})]})})]})]})})))]})})},save:()=>null});const{apiFetch:Sd}=wp,{Component:_d,useState:Id}=wp.element,{__:Nd}=wp.i18n,{BlockControls:Ad,InspectorControls:Od,RichText:Hd}=wp.blockEditor,{ToolbarGroup:Bd,ToolbarItem:Fd,PanelBody:Pd,RangeControl:Dd,ToggleControl:Ld,Icon:Md,Tooltip:Rd,SelectControl:$d,RadioControl:zd,ColorPalette:Ed,ColorIndicator:Vd,BaseControl:Ud,TextControl:Gd}=wp.components,Wd=JSON.parse('{"apiVersion":1,"name":"citadela-directory/authors-list","category":"citadela-directory-blocks","icon":"admin-users","attributes":{"title":{"type":"string","default":""},"selectedAuthors":{"type":"array","default":[]},"showCover":{"type":"boolean","default":true},"showIcon":{"type":"boolean","default":true},"showDescription":{"type":"boolean","default":true},"showPostsNumber":{"type":"boolean","default":true},"showLink":{"type":"boolean","default":true},"linkText":{"type":"string","default":"View posts"},"itemsOrderBy":{"type":"string","default":"display_name"},"itemsOrder":{"type":"string","default":"DESC"},"useCarousel":{"type":"boolean","default":false},"carouselNavigation":{"type":"boolean","default":true},"carouselPagination":{"type":"boolean","default":true},"carouselAutoplay":{"type":"boolean","default":false},"carouselAutoHeight":{"type":"boolean","default":false},"carouselAutoplayDelay":{"type":"number","default":5},"carouselLoop":{"type":"boolean","default":true},"borderWidth":{"type":"string","default":"thin"},"borderColor":{"type":"string","default":""},"backgroundColor":{"type":"string","default":""},"textColor":{"type":"string","default":""},"decorColor":{"type":"string","default":""},"postsNumberColor":{"type":"string","default":""},"carouselColor":{"type":"string","default":""}},"example":{},"editorScript":"citadela-directory-blocks"}'),{__:Jd,setLocaleData:qd}=wp.i18n,{registerBlockType:Xd}=wp.blocks,{name:Yd}=Wd;Xd(Yd,{...Wd,title:Jd("Listing Authors List","citadela-directory"),description:Jd("Displays information about selected authors.","citadela-directory"),edit:class extends _d{constructor(){super(...arguments),this.maybeUpdateSelectedAuthors=this.maybeUpdateSelectedAuthors.bind(this),this.state={infographicCount:0}}componentDidMount(){const{selectedAuthors:e}=this.props.attributes;let t={};t.selected_posts=e,t.fields="ID";let a=`/citadela-directory/users?${Object.keys(t).map((e=>encodeURIComponent(e)+"="+encodeURIComponent(t[e]))).join("&")}`;this.fetchRequest=Sd({path:a}).then((e=>{this.setState({infographicCount:e.length}),this.maybeUpdateSelectedAuthors(e)})).catch((()=>{this.setState({infographicCount:0})}))}maybeUpdateSelectedAuthors(e){let t=[],a=!1;this.props.attributes.selectedAuthors.map((l=>{e.includes(l.toString())?t.push(l):a=!0})),a&&this.props.setAttributes({selectedAuthors:t})}render(){const e="undefined"!=typeof CitadelaProSettings,{attributes:t,setAttributes:a,name:i,isSelected:s}=this.props,{selectedAuthors:o,useCarousel:r,carouselNavigation:c,carouselPagination:n,carouselAutoplay:d,carouselAutoHeight:u,carouselLoop:h,carouselColor:g,itemsOrderBy:b,itemsOrder:m,showCover:y,showDescription:x,showIcon:v,showLink:j,showPostsNumber:f,linkText:k,borderWidth:C,borderColor:w,backgroundColor:T,textColor:S,decorColor:_,postsNumberColor:I}=t,N=[{color:"#00d1b2"},{color:"#3373dc"},{color:"#209cef"},{color:"#22d25f"},{color:"#ffdd57"},{color:"#ff3860"},{color:"#7941b6"},{color:"#392F43"}],A=wp.blocks.getBlockType(i);let O={},H={},B={},F={},P={};return e&&(O={...S?{color:S}:{}},H={...w?{borderColor:w}:{},...T?{backgroundColor:T}:{}},B={..._?{color:_}:{}},F={..._?{backgroundColor:_}:{},...I?{color:I}:{}},P={...g?{color:g}:{}}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(Od,{children:[(0,l.jsxs)(Pd,{title:Nd("Author Details","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(Ld,{label:Nd("Show cover image","citadela-directory"),checked:y,onChange:e=>this.props.setAttributes({showCover:e})}),(0,l.jsx)(Ld,{label:Nd("Show author image","citadela-directory"),checked:v,onChange:e=>this.props.setAttributes({showIcon:e})}),(0,l.jsx)(Ld,{label:Nd("Show biographical info","citadela-directory"),checked:x,onChange:e=>this.props.setAttributes({showDescription:e})}),(0,l.jsx)(Ld,{label:Nd("Show posts number","citadela-directory"),checked:f,onChange:e=>this.props.setAttributes({showPostsNumber:e})}),(0,l.jsx)(Ld,{label:Nd("Show link","citadela-directory"),checked:j,onChange:e=>this.props.setAttributes({showLink:e})}),j&&(0,l.jsx)(Gd,{label:Nd("View posts label","citadela-directory"),value:k,onChange:e=>{a({linkText:e})}})]}),(0,l.jsxs)(Pd,{title:Nd("Order Options","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)($d,{label:Nd("Order by","citadela-directory"),value:b,options:[{label:Nd("User ID","citadela-directory"),value:"ID"},{label:Nd("Display name","citadela-directory"),value:"display_name"},{label:Nd("User login","citadela-directory"),value:"user_login"},{label:Nd("User email","citadela-directory"),value:"user_email"},{label:Nd("User posts count","citadela-directory"),value:"post_count"},{label:Nd("User registration date","citadela-directory"),value:"registered"}],onChange:e=>{a({itemsOrderBy:e})}}),"rand"!=b&&(0,l.jsx)(zd,{selected:m,options:[{label:Nd("Descending","citadela-directory"),value:"DESC"},{label:Nd("Ascending","citadela-directory"),value:"ASC"}],onChange:e=>{a({itemsOrder:e})}})]}),e&&(0,l.jsxs)(Pd,{title:Nd("Design Options","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsxs)(Ud,{label:Nd("Decoration color","citadela-directory"),className:"block-editor-panel-color-settings",children:[_&&(0,l.jsx)(Vd,{colorValue:_}),(0,l.jsx)(Ed,{value:_,onChange:e=>{a({decorColor:e})},colors:N})]}),(0,l.jsxs)(Ud,{label:Nd("Posts number color","citadela-directory"),className:"block-editor-panel-color-settings",children:[_&&(0,l.jsx)(Vd,{colorValue:I}),(0,l.jsx)(Ed,{value:I,onChange:e=>{a({postsNumberColor:e})},colors:N})]}),(0,l.jsxs)(Ud,{label:Nd("Text color","citadela-directory"),className:"block-editor-panel-color-settings",children:[S&&(0,l.jsx)(Vd,{colorValue:S}),(0,l.jsx)(Ed,{value:S,onChange:e=>{a({textColor:e})},colors:N})]}),(0,l.jsx)(p,{label:Nd("Background color","citadela-directory"),color:T,onChange:e=>{a({backgroundColor:e})}}),(0,l.jsx)(p,{label:Nd("Borders color","citadela-directory"),color:w,onChange:e=>{a({borderColor:e})}}),(0,l.jsx)($d,{label:Nd("Borders width","citadela-directory"),value:C,options:[{label:Nd("No borders","citadela-directory"),value:"none"},{label:Nd("Thin borders","citadela-directory"),value:"thin"},{label:Nd("Thick borders","citadela-directory"),value:"thick"}],onChange:e=>{a({borderWidth:e})}}),(n||c)&&(0,l.jsxs)(Ud,{label:Nd("Carousel decoration color","citadela-directory"),className:"block-editor-panel-color-settings",children:[g&&(0,l.jsx)(Vd,{colorValue:g}),(0,l.jsx)(Ed,{value:g,onChange:e=>{a({carouselColor:e})},colors:N})]})]}),(0,l.jsx)(me,{attributes:t,onChange:e=>this.props.setAttributes({useCarousel:e.useCarousel,carouselNavigation:e.carouselNavigation,carouselPagination:e.carouselPagination,carouselAutoplay:e.carouselAutoplay,carouselAutoHeight:e.carouselAutoHeight,carouselAutoplayDelay:e.carouselAutoplayDelay,carouselLoop:e.carouselLoop})})]},"inspector"),(0,l.jsxs)("div",{className:classNames("wp-block-citadela-blocks","ctdl-authors-list",t.className,"grid-type-1","layout-box","size-small",e?`border-${C}`:null,{"custom-text-color":!(!e||!S)},{"custom-decor-color":!(!e||!_)},{"custom-posts-number-color":!(!e||!I)},{"custom-background-color":!(!e||!T)},{"custom-carousel-color":!(!e||!g)},{"show-author-cover":!!y},{"show-author-icon":!!v},{"show-author-description":!!x},{"show-posts-number":!!f},{"show-posts-link":!!j},{"use-carousel":!!r},{"carousel-navigation":!(!r||!c)},{"carousel-pagination":!(!r||!n)},{"carousel-autoheight":!(!r||!u)}),children:[(0,l.jsxs)("div",{class:"ctdl-blockcard-title",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-icon",children:(0,l.jsx)(Md,{icon:A.icon.src})}),(0,l.jsxs)("div",{class:"ctdl-blockcard-text",children:[(0,l.jsx)("div",{class:"ctdl-blockcard-name",children:A.title}),(0,l.jsx)("div",{class:"ctdl-blockcard-desc",children:A.description})]})]}),(0,l.jsx)(ia,{dataType:"users",selectedPostsIds:o,onChange:e=>{this.setState({infographicCount:e.length}),a({selectedAuthors:e})},titleLabel:Nd("Authors to display","citadela-directory"),searchLabel:Nd("Search for authors","citadela-directory"),nothingFoundLabel:Nd("No users found","citadela-directory"),...this.props}),(0,l.jsx)("div",{class:"citadela-block-header",children:(0,l.jsx)(Hd,{tagName:"h3",value:t.title,onChange:e=>a({title:e}),placeholder:A.title,keepPlaceholderOnFocus:!0,allowedFormats:[]})}),(0,l.jsx)("div",{class:"citadela-block-articles",children:(0,l.jsx)("div",{class:"citadela-block-articles-wrap",children:Array.from(Array(this.state.infographicCount),((e,t)=>(0,l.jsx)("article",{class:"citadela-author-item has-cover has-icon has-description has-posts",style:O,children:(0,l.jsxs)("div",{class:"item-content",style:H,children:[(0,l.jsxs)("div",{class:"item-thumbnail",children:[(0,l.jsx)("div",{class:"author-cover"}),(0,l.jsx)("div",{class:"author-icon"}),(0,l.jsxs)("div",{class:"author-posts-number",style:F,children:[(0,l.jsx)("span",{class:"posts-number"}),(0,l.jsx)("span",{class:"posts-text"})]})]}),(0,l.jsxs)("div",{class:"item-body",children:[(0,l.jsx)("div",{class:"item-title"}),(0,l.jsxs)("div",{class:"item-description",children:[(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"}),(0,l.jsx)("span",{class:"line"})]}),j&&(0,l.jsx)("div",{class:"item-posts-link",style:B,children:k||Nd("View posts","citadela-directory")})]})]})})))})}),this.state.infographicCount>0&&(0,l.jsxs)(l.Fragment,{children:[r&&c&&(0,l.jsxs)("div",{class:"carousel-navigation-wrapper",style:P,children:[(0,l.jsx)("div",{class:"carousel-button-prev",children:(0,l.jsx)("i",{class:"fas fa-chevron-left"})}),(0,l.jsx)("div",{class:"carousel-button-next",children:(0,l.jsx)("i",{class:"fas fa-chevron-right"})})]}),r&&n&&(0,l.jsxs)("div",{class:"carousel-pagination-wrapper",style:P,children:[(0,l.jsx)("span",{class:"carousel-bullet"}),(0,l.jsx)("span",{class:"carousel-bullet"}),(0,l.jsx)("span",{class:"carousel-bullet"})]})]})]})]})}},save:()=>null,example:{}});const{apiFetch:Kd}=wp,{Component:Qd,useState:Zd}=wp.element,{__:ep}=wp.i18n,{BlockControls:tp,InspectorControls:ap,RichText:lp}=wp.blockEditor,{ToolbarGroup:ip,ToolbarItem:sp,PanelBody:op,RangeControl:rp,ToggleControl:cp,Icon:np,Tooltip:dp,SelectControl:pp,RadioControl:up,ColorPalette:hp,ColorIndicator:gp,BaseControl:bp,TextControl:mp}=wp.components,yp=JSON.parse('{"apiVersion":1,"name":"citadela-directory/author-detail","category":"citadela-directory-blocks","icon":"admin-users","attributes":{"showCover":{"type":"boolean","default":true},"showIcon":{"type":"boolean","default":true},"showDescription":{"type":"boolean","default":true},"showPostsNumber":{"type":"boolean","default":true}},"example":{},"editorScript":"citadela-directory-blocks"}'),{__:xp,setLocaleData:vp}=wp.i18n,{registerBlockType:jp}=wp.blocks,{name:fp}=yp;jp(fp,{...yp,title:xp("Listing Author Detail","citadela-directory"),description:xp("Displays information about author on author archive page.","citadela-directory"),edit:class extends Qd{constructor(){super(...arguments)}render(){const{attributes:e,setAttributes:t,name:a,isSelected:i}=this.props,{showCover:s,showDescription:o,showIcon:r,showPostsNumber:c}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ap,{children:(0,l.jsxs)(op,{title:ep("Author Details","citadela-directory"),initialOpen:!1,className:"citadela-panel",children:[(0,l.jsx)(cp,{label:ep("Show cover image","citadela-directory"),checked:s,onChange:e=>this.props.setAttributes({showCover:e})}),(0,l.jsx)(cp,{label:ep("Show author image","citadela-directory"),checked:r,onChange:e=>this.props.setAttributes({showIcon:e})}),(0,l.jsx)(cp,{label:ep("Show biographical info","citadela-directory"),checked:o,onChange:e=>this.props.setAttributes({showDescription:e})}),(0,l.jsx)(cp,{label:ep("Show posts number","citadela-directory"),checked:c,onChange:e=>this.props.setAttributes({showPostsNumber:e})})]})},"inspector"),(0,l.jsx)("div",{className:classNames("wp-block-citadela-blocks","ctdl-author-detail",e.className,{"show-author-cover":!!s},{"show-author-icon":!!r},{"show-author-description":!!o},{"show-posts-number":!!c}),children:(0,l.jsx)("article",{class:"citadela-author-detail has-cover has-icon has-description has-posts",children:(0,l.jsxs)("div",{class:"item-content",children:[(0,l.jsxs)("div",{class:"item-thumbnail",children:[s&&(0,l.jsx)("div",{class:"author-cover"}),c&&(0,l.jsxs)("div",{class:"author-posts-number",children:[(0,l.jsx)("span",{class:"posts-number"}),(0,l.jsx)("span",{class:"posts-text"})]}),(0,l.jsxs)("div",{class:"author-info",children:[r&&(0,l.jsx)("div",{class:"author-icon"}),(0,l.jsx)("div",{class:"author-name",children:ep("Author name","citadela-directory")})]})]}),o&&(0,l.jsx)("div",{class:"item-body",children:(0,l.jsx)("div",{class:"item-description",children:ep("Author biographical info","citadela-directory")})})]})})})]})}},save:()=>null,example:{}})})();
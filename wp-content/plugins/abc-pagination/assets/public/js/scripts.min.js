!function(t){"function"==typeof define&&define.amd?define("scripts",t):t()}(function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}function e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,i(a.key),a)}}function n(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){s=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw o}}}}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,i,r,o,c=[],s=!0,f=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=r.call(n)).done)&&(c.push(a.value),c.length!==e);s=!0);}catch(t){f=!0,i=t}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(f)throw i}}return c}}(t,e)||r(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}function r(e,n){if(e){if("string"==typeof e)return t(e,n);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,n):void 0}}var o=function(){return t=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stack=[],document.addEventListener("keyup",function(t){if("Escape"===t.key||"Esc"===t.key){var n=e.stack.pop();n&&"function"==typeof n.callback&&n.callback(e)}})},(n=[{key:"push",value:function(t,e){return this.off(t),this.stack.push({name:t,callback:e}),this}},{key:"off",value:function(t){return this.stack=this.stack.filter(function(e){return e.name!==t}),this}}])&&e(t.prototype,n),a&&e(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,a}();jQuery(function(t){var e="list",i="tabs",r="popup",c=".js-abc-pagination-container",s=".js-abc-pagination-letter-list",f=".js-abc-pagination-letter",u=".js-abc-pagination-tab",l=".js-abc-pagination-post",d=new o;t(document).on("click",".js-abc-pagination-search",function(n){var o=t(n.currentTarget),s=o.parents(c);if(!s.find(".js-abc-pagination-search-popup").length){var p,h=o.data("search_id"),v=o.data("type"),b=t("#"+h).html().trim(),m=t(b).addClass("js-abc-pagination-search-popup"),g=m.find("input");m.prependTo(s),m.fadeIn(100),m.outerWidth()<s.outerWidth()&&m.css({left:parseInt((s.outerWidth()-m.outerWidth())/2)}),g.val(s.data("search-value")),g.focus().select(),g.on("keyup",function(n){clearTimeout(p),"Escape"!==n.key&&"Esc"!==n.key&&(p=setTimeout(function(){var o=n.currentTarget.value.trim();if(s.data("search-value",o),o.length>1){if(s.find(".js-abc-pagination-show-more").hide(),v!==e&&v!==i||(s.find(u).hide(),s.find(l).hide(),s.find(".js-abc-pagination-post-title").each(function(){var e=t(this);y(o,e.text().trim())&&(e.parents(u).show(),e.parents(l).show())})),v===r){var c={};s.find(".js-abc-pagination-post-title").each(function(){var e=t(this);if(y(o,e.text().trim())){var n=e.parents(u),a=n.attr("id");if(void 0===a)return;a&&void 0===c[a]?(n=n.clone(),c[a]=n,n.find(".js-abc-pagination-close").remove(),n.show().find(".abc-pagination-tab__posts").empty(),n.removeAttr("id")):n=c[a],e.parents(l).each(function(){var e=t(this).clone();e.removeAttr("id"),e.show().addClass("visible").appendTo(n.find(".abc-pagination-tab__posts"))})}}),m.find(u).remove();for(var f=0,d=Object.entries(c);f<d.length;f++){var p=a(d[f],2),h=(p[0],p[1]);m.append(h)}}}else v===r&&m.find(u).remove(),j()},250))}),d.push("close-search#"+h,w),m.on("click",".js-abc-pagination-search-close",w)}function y(t,e){return-1!==e.toLowerCase().indexOf(t.toLowerCase())}function j(){if(v===e&&s.find(u).show(),v===i){s.find(u).hide();var n=s.find(f+".active");n.length?s.find(decodeURIComponent(n.attr("href"))).show():s.find(f).first().show()}s.find(l).css({display:""}),s.find(".js-abc-pagination-show-more").each(function(){var e=t(this);e.data("_activated")||e.show()})}function w(){m.fadeOut(100,function(){m.remove(),j()})}}),t(document).on("click",".js-abc-pagination-show-more",function(e){e.preventDefault();var n=t(e.currentTarget);n.hide().data("_activated",1),n.parents(u).find(l).fadeIn(150).addClass("visible");var a=n.parents(c),i=a.find(s);if(r===i.data("type")){var o=n.parents(u);h(a.find('.js-abc-pagination-letter[href="#'+o.attr("id")+'"]'),a,o)}}),t(document).on("click",f,function(n){var a=t(n.currentTarget),o=a.parents(s);switch(o.data("type")!==e&&(o.find(f).removeClass("active"),a.addClass("active")),o.data("type")){case i:n.preventDefault(),function(t){var e=t.parents(c);if(e.find(u).hide(),t&&t.length&&t.attr("href").length>1){var n=t.attr("href");e.find(decodeURIComponent(n)).show()}}(a);break;case r:n.preventDefault(),function(e){var n=e.parents(c);if(n.find(u+".active").each(function(){var e=t(this);e.removeClass("active"),p(e)}),n.find(u).hide().removeClass("active"),e&&e.length&&e.attr("href").length>1){var a=e.attr("href"),i=n.find(decodeURIComponent(a));i.addClass("active"),function(t){t.length&&(t.show(),d.push("close-popup#"+t.attr("id"),function(e){p(t),t.parents(c).find('.js-abc-pagination-letter[href="#'+t.attr("id")+'"]').removeClass("active").blur(),e.off("close-popup#"+t.attr("id"))}))}(i),h(e,n,i)}}(a)}}).on("click",".js-abc-pagination-close",function(e){e.preventDefault();var n=t(e.target).parents(u);n.removeClass("active"),p(n),n.parents(c).find('.js-abc-pagination-letter[href="#'+n.attr("id")+'"]').removeClass("active")});function p(t){t.length&&(t.hide(),d.off("close-popup#"+t.attr("id")))}function h(t,e,n){var a=n.outerWidth(),i=e.outerWidth();if(!(a>=i)){var r=t.position().left+t.outerWidth()/2,o=r-a/2;o<=0||(r+a/2>i?n.css({right:0}):n.css({left:o}))}}function v(e){e.length&&e.each(function(){var e=t(this);t.ajax({url:abc_pagination_ajax.url,data:{action:"abc_pagination_fetch_content",params:e.data("params")}}).done(function(n){n.success?e.replaceWith(t(n.data.html)):console.error("Unable to fetch abc-pagination data",n)})})}t(document).on("click",function(e){var n=t(e.target);n.hasClass("js-abc-pagination-letter")||n.parent().hasClass("js-abc-pagination-letter")||n.parents(u).length||n.hasClass("js-abc-pagination-tab")||t('.js-abc-pagination-tab-list[data-type="'+r+'"] '+u+".active").each(function(){var e=t(this);e.removeClass("active"),p(e),e.parents(c).find(f).removeClass("active")})}),v(t(".js-abc-pagination-ajax")),new MutationObserver(function(e){var a,i=n(e);try{for(i.s();!(a=i.n()).done;){var r,o=n(a.value.addedNodes);try{for(o.s();!(r=o.n()).done;){var c=r.value;c instanceof HTMLElement&&(c.classList.contains("js-abc-pagination-ajax")?v(t(c)):v(t(c).find(".js-abc-pagination-ajax")))}}catch(t){o.e(t)}finally{o.f()}}}catch(t){i.e(t)}finally{i.f()}}).observe(document.body,{childList:!0,subtree:!0})})});
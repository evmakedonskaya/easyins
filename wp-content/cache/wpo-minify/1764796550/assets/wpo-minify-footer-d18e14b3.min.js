
(()=>{"use strict";const e=function(e,t){var n=t.find(".jss-ff-el-net-promoter");n.length&&e.each(n,function(t,n){e(n).on("click","label",function(t){var n=e(this);n.addClass("active"),n.prevAll().removeClass("active"),n.nextAll().removeClass("active")})})};var t=function(e){!function(e){e.on("click",".js-repeat .repeat-plus",function(e){var t=jQuery(this),n=t.closest(".ff-el-repeat"),a=parseInt(n.data("max_repeat")),i=n.find(".ff-t-cell:first-child .ff-el-input--content > input").length;if(!(a&&a<=i)){a&&a-i==1&&n.find(".repeat-plus").hide();var r=t.closest("div"),o=r.index(),s=t.closest(".ff-el-input--content").find(".ff-t-cell").length;t.closest(".ff-el-input--content").find(".ff-t-cell").each(function(e,t){var n=jQuery(this).find(".ff-el-form-control:last-child"),a=n.attr("tabindex"),i=n.clone(),r={value:"",id:"ffrpt-"+(new Date).getTime()+e};a&&(r.tabIndex=parseInt(a)+s),i.prop(r),i.insertAfter(n)}),r.clone().insertAfter(r),t.closest(".ff-el-input--content").find(".ff-t-cell").eq(0).find("input:eq(".concat(o+1,")")).focus()}}),e.on("click",".js-repeat .repeat-minus",function(e){var t=!1,n=jQuery(this),a=n.closest("div");n.closest(".ff-el-repeat").find(".repeat-plus").show(),n.closest(".ff-el-input--content").find(".ff-t-cell").each(function(){var e=a.index(),n=jQuery(this).find(".ff-el-form-control:eq("+e+")");a.siblings().length&&(t=n.remove().length)}),t&&a.remove()})}(e),function(e){var t=window.localStorage.getItem("ff_window_type");jQuery(".ff_form_preview").length&&jQuery(".ff_flexible_table").addClass(t),e.on("screen-change",function(e,t){jQuery(".ff_form_preview").length&&("375px"===t?jQuery(".ff_flexible_table").addClass("mobile"):jQuery(".ff_flexible_table").removeClass("mobile"))}),e.on("repeater-container-names-update",function(e,t){var n=t.attr("data-root_name"),a=0;t.find(".ff_repeater_cont_row").each(function(e,t){jQuery(this).find(".ff-el-form-control").each(function(t,i){var r=jQuery(i);0==e&&(a=r.attr("tabindex")),r.prop({name:n+"["+e+"][]"}),r.attr("data-name",n+"_"+t+"_"+e),a&&r.attr("tabindex",a)})})}),e.on("click",".js-repeater .repeat-plus",function(e){var t=jQuery(this),n=t.closest("table"),a=t.closest("tr"),i=parseInt(n.attr("data-max_repeat")),r=n.find("tbody tr").length;if(i&&r==i)n.addClass("repeat-maxed");else{var o=a.clone();o.find("td").each(function(e,t){var n=jQuery(this).find(".ff-el-form-control:last-child"),a="ffrpt-"+(new Date).getTime()+e,i={value:n.attr("data-default")||"",id:a};n.prop(i);var r=n.attr("data-mask");r&&n.mask(r)}),o.insertAfter(a);var s=n.attr("data-root_name"),l=0;n.find("tbody tr").each(function(e,t){jQuery(this).find(".ff-el-form-control").each(function(t,n){var a=jQuery(n);0==e&&(l=a.attr("tabindex")),a.prop({name:s+"["+e+"][]"}),a.attr("data-name",s+"_"+t+"_"+e),l&&a.attr("tabindex",l)})}),o.find(".ff-el-form-control")[0].focus(),n.trigger("repeat_change"),i&&r+1==i&&n.addClass("repeat-maxed")}}),e.on("click",".js-repeater .repeat-minus",function(e){var t=jQuery(this),n=t.closest("table");if(1!=n.find("tbody tr").length){t.closest("tr").remove(),n.removeClass("repeat-maxed");var a=n.attr("data-root_name");n.find("tbody tr").each(function(e,t){jQuery(this).find(".ff-el-form-control").each(function(t,n){jQuery(n).prop({name:a+"["+e+"][]"})})}),n.trigger("repeat_change")}}),e.on("click",".js-container-repeat-buttons .repeat-plus",function(t){var n=jQuery(this),a=n.closest(".ff-repeater-container"),i=n.closest(".ff_repeater_cont_row"),r=parseInt(a.attr("data-max_repeat")),o=a.find(".ff_repeater_cont_row").length;if(r&&o==r)a.addClass("repeat-maxed");else{var s=i.clone();s.find(".ff_repeater_cell").each(function(e,t){var n=jQuery(this).find(".ff-el-form-control:last-child"),a="ffrpt-"+(new Date).getTime()+e,i={value:n.attr("data-default")||"",id:a};n.prop(i);var r=n.attr("data-mask");r&&n.mask(r),jQuery(this).find("label").attr("for",a)}),s.insertAfter(i),e.trigger("repeater-container-names-update",[a]),s.find(".ff-el-form-control")[0].focus(),a.trigger("repeat_change"),r&&o+1==r&&a.addClass("repeat-maxed")}}),e.on("click",".js-container-repeat-buttons .repeat-minus",function(t){var n=jQuery(this),a=n.closest(".ff-repeater-container"),i=n.closest(".ff_repeater_cont_row");a.find(".ff_repeater_cont_row").length>1&&(i.remove(),a.removeClass("repeat-maxed"),e.trigger("repeater-container-names-update",[a]),a.trigger("repeat_change"))})}(e),function(e){e.on("keydown",".repeat-plus",function(e){"Enter"===e.key&&(e.preventDefault(),jQuery(this).click())}),e.on("keydown",".repeat-minus",function(e){"Enter"===e.key&&(e.preventDefault(),jQuery(this).click())})}(e)};function n(){n=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,n,i){var o=RegExp(e,n);return t.set(o,i||t.get(e)),a(o,r.prototype)}function o(e,n){var a=t.get(n);return Object.keys(a).reduce(function(t,n){var i=a[n];if("number"==typeof i)t[n]=e[i];else{for(var r=0;void 0===e[i[r]]&&r+1<i.length;)r++;t[n]=e[i[r]]}return t},Object.create(null))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(r,RegExp),r.prototype.exec=function(t){var n=e.exec.call(this,t);if(n){n.groups=o(n,this);var a=n.indices;a&&(a.groups=o(a,this))}return n},r.prototype[Symbol.replace]=function(n,a){if("string"==typeof a){var r=t.get(this);return e[Symbol.replace].call(this,n,a.replace(/\$<([^>]+)(>|$)/g,function(e,t,n){if(""===n)return e;var a=r[t];return Array.isArray(a)?"$"+a.join("$"):"number"==typeof a?"$"+a:""}))}if("function"==typeof a){var s=this;return e[Symbol.replace].call(this,n,function(){var e=arguments;return"object"!=i(e[e.length-1])&&(e=[].slice.call(e)).push(o(e,s)),a.apply(this,e)})}return e[Symbol.replace].call(this,n,a)},n.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw r}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,l(a.key),a)}}function l(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=i(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}const f=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fields=t,this.formData=n,this.counter=0,this.field_statues={},this.elementCache={}},(t=[{key:"setFields",value:function(e){this.fields=e}},{key:"setFormData",value:function(e){this.elementCache={},this.formData=e}},{key:"getCalculatedStatuses",value:function(){this.elementCache={};for(var e=0,t=Object.keys(this.fields);e<t.length;e++){var n=t[e],a=this.fields[n];this.field_statues[n]=this.evaluate(a,n)}return this.field_statues}},{key:"evaluate",value:function(e,t){var n=this;if(e._visited)return console.warn("Circular dependency detected for field: ".concat(t)),!1;var a=!1;if(e.status){var i,r;this.counter++;var o=e.type,s=1;if(e._visited=!0,"group"===o&&null!=e&&e.condition_groups?a=this.evaluateGroups(e.condition_groups):("any"==o&&(s=0),e.conditions.forEach(function(e){var a=n.getItemEvaluateValue(e,n.formData[e.field]);a&&n.fields[e.field]&&e.field!=t&&(a=n.evaluate(n.fields[e.field],e.field)),"any"==o?a&&(s=1):!a&&s&&(s=!1)}),a=1==s),e._visited=!1,(null!==(i=e.conditions)&&void 0!==i&&i.length||null!==(r=e.condition_groups)&&void 0!==r&&r.length)&&!a)return a}return e.container_condition&&(a=this.evaluate(e.container_condition,t)),a}},{key:"evaluateGroups",value:function(e){var t,n=r(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a&&Array.isArray(a.rules)&&0!==a.rules.length)try{if(!0===this.evaluateRuleGroup(a.rules))return!0}catch(e){console.warn("Error evaluating group:",e);continue}}}catch(e){n.e(e)}finally{n.f()}return!1}},{key:"evaluateRuleGroup",value:function(e){var t=this;return e.map(function(e){try{var n=t.getItemEvaluateValue(e,t.formData[e.field]);return n&&t.fields[e.field]&&t.fields[e.field].status?t.evaluate(t.fields[e.field],e.field):n}catch(t){return console.warn("Error evaluating rule:",e,t),!1}}).every(function(e){return!0===e})}},{key:"getItemEvaluateValue",value:function(e,t){t=t||null;var n=this.elementCache[e.field];return n&&n.length||(n=jQuery("[name='".concat(e.field,"']")),this.elementCache[e.field]=n),"="==e.operator?""===e.value?null===t:"object"==i(t)?null!==t&&-1!=t.indexOf(e.value):n.hasClass("ff_numeric")?this.parseFormattedNumericValue(n,t)==this.parseFormattedNumericValue(n,e.value):t==e.value:"!="==e.operator?"object"==i(t)?null!==t&&-1==t.indexOf(e.value):n.hasClass("ff_numeric")?this.parseFormattedNumericValue(n,t)!=this.parseFormattedNumericValue(n,e.value):t!=e.value:">"==e.operator?t&&this.parseFormattedNumericValue(n,t)>this.parseFormattedNumericValue(n,e.value):"<"==e.operator?t&&this.parseFormattedNumericValue(n,t)<this.parseFormattedNumericValue(n,e.value):">="==e.operator?t&&this.parseFormattedNumericValue(n,t)>=this.parseFormattedNumericValue(n,e.value):"<="==e.operator?t&&this.parseFormattedNumericValue(n,t)<=this.parseFormattedNumericValue(n,e.value):"startsWith"==e.operator?t&&t.startsWith(e.value):"endsWith"==e.operator?t&&t.endsWith(e.value):"contains"==e.operator?null!==t&&-1!=t.indexOf(e.value):"doNotContains"==e.operator?null!==t&&-1==t.indexOf(e.value):"test_regex"==e.operator&&(t=t||"",this.stringToRegex(e.value).test(t))}},{key:"stringToRegex",value:function(e){var t,a=(null===(t=String(e).match(n(/^\/(.*)\/([gimsuy]*)$/,{body:1,flags:2})))||void 0===t?void 0:t.groups)||{},i=a.body,r=a.flags;return i?(r=r||"g",RegExp(i,r)):new RegExp(e,"g")}},{key:"parseFormattedNumericValue",value:function(e,t){if(e.hasClass("ff_numeric")){var n=JSON.parse(e.attr("data-formatter"));return currency(t,n).value}return Number(t)||0}}])&&s(e.prototype,t),a&&s(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,a}();const c=function(e,t,n){var a="."+n.form_instance;(function(){var i=this,r={},o={},s=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];clearTimeout(t),t=setTimeout(function(){return e.apply(i,r)},n)}}(function(e){l(e)},n.debounce_time||300),l=function(n){e.each(n,function(e,n){var a=u(e).closest(".has-conditions");n?("0px"==a.css("height")&&a.attr("style",""),a.removeClass("ff_excluded").addClass("ff_cond_v").slideDown(200,function(){a.find('input[type="range"]').length>0&&setTimeout(function(){t.trigger("reInitRangeSliders")},50)})):a.removeClass("ff_cond_v").addClass("ff_excluded").slideUp(200)}),t.trigger("do_calculation"),t.trigger("ff_render_dynamic_smartcodes",t)},c=function(){var n={};return e.each(r,function(a,i){var r=i.prop("type")||i.attr("data-type");if("radio"==r)n[a]="",i.each(function(t,i){e(i).is(":checked")&&(n[a]=e(i).val())});else if("checkbox"==r)a=a.replace("[]",""),n[a]=[],i.each(function(t,i){e(i).is(":checked")&&n[a].push(e(i).val())});else if("select-multiple"==r){a=a.replace("[]","");var o=i.val();n[a]=o||[]}else if("file"==r){var s="";t.find("input[name="+a+"]").closest(".ff-el-input--content").find(".ff-uploaded-list").find(".ff-upload-preview[data-src]").each(function(t,n){s+=e(this).data("src")}),n[a]=s}else n[a]=i.val()}),n},u=function(t){var n=e(a),i=e("[data-name='"+t+"']",n);return(i=(i=i.length?i:e("[name='"+t+"']",n)).length?i:e("[data-condition_field_name='"+t+"']",n)).length?i:e("[name='"+t+"[]']",n)};return{init:function(){if(n.conditionals){e.each(n.conditionals,function(t,n){t&&("group"==n.type&&n.condition_groups?e.each(n.condition_groups,function(t,n){e.each(n.rules,function(e,t){var n=u(t.field);r[n.prop("name")]=n})}):e.each(n.conditions,function(e,t){var n=u(t.field);r[n.prop("name")]=n}))}),o=c();var a=new f(n.conditionals,o);e.each(r,function(e,n){n.on("keyup change",function(){t.hasClass("ff_force_hide")||t.hasClass("ff_submitting")||(o=c(),a.setFormData(o),setTimeout(function(){s(a.getCalculatedStatuses())},0))})}),jQuery(document.body).on("fluentform_reset",function(e,n){n&&n.length&&n[0]===t[0]&&!t.hasClass("ff_force_hide")&&setTimeout(function(){o=c(),a.setFormData(o),l(a.getCalculatedStatuses())},0)}),setTimeout(function(){l(a.getCalculatedStatuses())},0)}}}})().init()};function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,v(a.key),a)}}function v(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=d(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}var g,y,_=function(){return e=function e(t,n,a,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$=t,this.$theForm=n,this.fluentFormVars=a,this.formSelector=i,this.activeStep=0,this.isRtl=!!window.fluentFormVars.is_rtl,this.isPopulatingStepData=!1,this.isInitialLoad=!0,this.fluentFormVars.stepAnimationDuration=parseInt(this.fluentFormVars.stepAnimationDuration),this.stepPersistency="yes"===this.$theForm.find(".ff-step-container").attr("data-enable_step_data_persistency"),this.stepResume=!1,this.stepPersistency&&(this.stepResume="yes"===this.$theForm.find(".ff-step-container").attr("data-enable_step_page_resume"))},t=[{key:"getPublicAPI",value:function(){return{init:this.init.bind(this),updateSlider:this.updateSlider.bind(this),populateFormDataAndSetActiveStep:this.populateFormDataAndSetActiveStep.bind(this)}}},{key:"init",value:function(){this.initFormWithSavedState(),this.removePrevFromFirstStep(),this.initStepSlider(),this.maybeAutoSlider()}},{key:"removePrevFromFirstStep",value:function(){this.$theForm.find(".fluentform-step:first").find('.step-nav [data-action="prev"]').remove()}},{key:"getFormInstance",value:function(){return window.fluentFormApp(this.$theForm)}},{key:"initFormWithSavedState",value:function(){var e=this;if(this.stepPersistency){var t=this.$,n=this;t(document).ready(function(a){var i,r;t.getJSON(e.fluentFormVars.ajaxUrl,{form_id:e.$theForm.data("form_id"),action:"fluentform_step_form_get_data",nonce:null===(i=e.fluentFormVars)||void 0===i?void 0:i.nonce,hash:null===(r=e.fluentFormVars)||void 0===r?void 0:r.hash}).then(function(e){e&&n.populateFormDataAndSetActiveStep(e)})})}}},{key:"populateFormDataAndSetActiveStep",value:function(e){var t=this,n=e.response,a=e.step_completed,i=this.$,r=[];if(i.each(n,function(e,n){if(n){var a=Object.prototype.toString.call(n);if("[object Object]"===a){var o=t.$theForm.find("[data-name=".concat(e,"]"));if(o.length&&"tabular-element"===o.attr("data-type"))jQuery.each(n,function(n,a){var r=t.$theForm.find('[name="'.concat(e,"[").concat(n,']\\[\\]"]'));r.length||(r=t.$theForm.find('[name="'.concat(e,"[").concat(n,']"]'))),i.each(r,function(e,t){var n=i(t).val();-1===i.inArray(n,a)&&n!==a||i(t).prop("checked",!0).change()})});else if("chained-select"===o.attr("data-type")){var s={meta_key:o.find("select:first").attr("data-meta_key"),form_id:o.closest("form").attr("data-form_id"),action:"fluentform_get_chained_select_options",filter_options:"all",keys:n};i.getJSON(t.fluentFormVars.ajaxUrl,s).then(function(e){i.each(e,function(e,t){var a=o.find("select[data-key='".concat(e,"']"));0!=a.attr("data-index")&&i.each(t,function(e,t){a.append(i("<option />",{value:t,text:t}))}),a.attr("disabled",!1).val(n[e])})})}else i.each(n,function(n,a){t.$theForm.find('[name="'.concat(e,"[").concat(n,']"]')).val(a).change()})}else if("[object Array]"===a){var l=t.$theForm.find("[name=".concat(e,"]"));if("file"===(l=(l=l.length?l:t.$theForm.find("[data-name=".concat(e,"]"))).length?l:t.$theForm.find("[name=".concat(e,"\\[\\]]"))).attr("type"))t.addFilesToElement(l,n);else if(l.prop("multiple"))if(i.isFunction(window.Choices)){var f=l.data("choicesjs");f&&r.push({handler:f,values:n})}else l.val(n).change();else if("repeater_field"===l.attr("data-type")){var c=l.find("tbody"),u=l.attr("data-name");i.each(n,function(e,t){0!=e?c.find("tr:last").clone().appendTo(c).find(".ff-el-form-control").each(function(n,a){var r="ffrpt-"+(new Date).getTime()+n;i(a).val(t[n]),i(a).attr({id:r,name:"".concat(u,"[").concat(e,"][]"),value:t[n]}).change()}):c.find("tr:first .ff-el-form-control").each(function(e,n){i(n).val(t[e]).change()})})}else"repeater_container"===l.attr("data-type")?(i.each(n,function(e,t){if(0!==e){var n=l.find(".ff_repeater_cont_row:first").clone();n.find(".ff_repeater_cell").each(function(n,a){var r=i(this).find(".ff-el-form-control:last-child"),o="ffrpt-"+(new Date).getTime()+"_"+e+"_"+n,s={value:t[n]||"",id:o};r.prop(s),i(this).find("label").attr("for",o)}),n.insertAfter(l.find(".ff_repeater_cont_row:last"))}else l.find(".ff_repeater_cont_row:first .ff-el-form-control").each(function(e,n){i(n).val(t[e]).change()})}),t.$theForm.trigger("repeater-container-names-update",[l]),l.trigger("repeat_change")):l.each(function(e,t){-1!==i.inArray(i(t).val(),n)&&i(t).prop("checked",!0).change()})}else{var d=t.$theForm.find("[name=".concat(e,"]"));if(d.hasClass("fluentform-post-content")&&window.wp&&window.wp.editor){var p=d.attr("id");window.tinymce.get(p).setContent(n)}if("undefined"!=typeof flatpickr&&d.prop("_flatpickr")){var h=d.prop("_flatpickr");h&&(h.config.altInput?h.setDate(n,!0):d.val(n).trigger("change"))}if("radio"===d.prop("type")||"checkbox"===d.prop("type"))i("[name=".concat(e,'][value="').concat(n,'"]')).prop("checked",!0).change(),t.$theForm.find("[name=".concat(e,'][value="').concat(n,'"]')).prop("checked",!0).change(),d.closest(".ff-el-group").find(".ff-el-ratings").length&&t.$theForm.find("[name=".concat(e,'][value="').concat(n,'"]')).closest("label").trigger("mouseenter");else{d.hasClass("ff_has_multi_select")&&d.data("choicesjs")&&(d.data("choicesjs").removeActiveItems(n),d.data("choicesjs").setChoiceByValue(n));var m=d.closest(".ff-el-group").find(".fluentform-signature-pad");if(m.length){var v=m[0].getContext("2d"),g=new Image;g.src=n,g.onload=function(){v.drawImage(g,0,0)}}d.val(n).change()}}}}),r.length>0)for(var o=0;o<r.length;o++){var s,l=r[o].handler,f=r[o].values;l.setValue(f);var c=null===(s=l.passedElement)||void 0===s?void 0:s.element;c&&i(c).trigger("change")}this.isPopulatingStepData=!0;var u=this.fluentFormVars.stepAnimationDuration;this.stepResume&&this.updateSlider(a,u,!0).then(function(){t.handleFocus(u)}).catch(function(e){console.error("An error occurred during the slider update:",e)}),this.isPopulatingStepData=!1}},{key:"initStepSlider",value:function(){var e=this.$,t=this.$theForm.find(".fluentform-step"),n=t.length,a=this.$theForm.find(".ff-step-titles li");if(!window.ff_disable_auto_step){for(var i=this.activeStep,r=0;i<n&&this.isStepAllFieldsHidden(e(t[i]))&&r<n;)i++,r++;i!==this.activeStep&&i<n&&(this.activeStep=i)}t.css("display","none"),e(t[this.activeStep]).css("display","block"),t.attr("role","group"),t.attr("aria-hidden","true"),e(t[this.activeStep]).attr("aria-hidden","false"),e(t[this.activeStep]).addClass("active"),e(a[this.activeStep]).addClass("active");var o=t.first();o.hasClass("active")&&o.find('button[data-action="next"]').css("visibility","visible"),t.length&&!t.last().hasClass("active")&&this.$theForm.find('button[type="submit"]').css("visibility","hidden"),this.stepProgressBarHandle({activeStep:this.activeStep,totalSteps:n}),this.registerStepNavigators(this.fluentFormVars.stepAnimationDuration),this.registerClickableStepNav(a,t)}},{key:"registerClickableStepNav",value:function(e,t){var n=this.$,a=this;0!==e.length&&(n.each(e,function(e,t){n(t).attr("data-step-number",e),n(t).attr({role:"button",tabindex:"0","aria-label":"Go to step "+(e+1),style:"cursor: pointer;"})}),e.on("click keydown",function(e){if("keydown"!==e.type||"Enter"===e.key||" "===e.key||13===e.keyCode||32===e.keyCode){"keydown"===e.type&&e.preventDefault();var i=a.getFormInstance(),r=n(this),o=0,s=a.fluentFormVars.stepAnimationDuration;try{var l=r.data("step-number");if(isNaN(l))return;n.each(t,function(e,t){if(o=e,e<l){var a=n(t).find(":input").not(":button").filter(function(e,t){return!n(t).closest(".has-conditions").hasClass("ff_excluded")});a.length&&i.validate(a)}}),a.updateSlider(l,s,!0).then(function(){a.handleFocus(s)}).catch(function(e){console.error("An error occurred during the slider update:",e)})}catch(e){if(!(e instanceof window.ffValidationError))throw e;a.updateSlider(o,s,!0).then(function(){a.handleFocus(s)}).catch(function(e){console.error("An error occurred during the slider update:",e)}),i.showErrorMessages(e.messages),i.scrollToFirstError(350)}}}))}},{key:"stepProgressBarHandle",value:function(e){var t=this.$;if(this.$theForm.find(".ff-el-progress").length){var n=e.totalSteps,a=e.activeStep,i=100/n*(a+1),r=this.$theForm.find(".ff-el-progress-title li"),o=this.$theForm.find(".ff-step-header .ff-el-progress-bar"),s=o.find("span");o.css({transition:"width 0.3s ease-in-out",width:i+"%"}),i?o.append(s.text(parseInt(i)+"%")):s.empty();var l=this.fluentFormVars.step_text,f=t(r[a]).text();l=l.replace("%activeStep%",a+1).replace("%totalStep%",n).replace("%stepTitle%",f),this.$theForm.find(".ff-el-progress-status").html(l).attr("aria-live","polite"),r.css("display","none"),t(r[a]).css("display","inline")}}},{key:"isStepAllFieldsHidden",value:function(e){return this.$,e.find(".ff-el-group").not(".ff-custom_html").length,!1}},{key:"animateProgressToStep",value:function(e,t,n){this.$;var a=this.$theForm.find(".ff-step-header .ff-el-progress-bar");if(!a.length||!t)return Promise.resolve();var i=100/t*(e+1);return n&&n>0?a.css({transition:"width ".concat(n,"ms ease-in-out")}):a.css({transition:"none"}),a[0]&&a[0].offsetHeight,a.css("width",i+"%"),new Promise(function(e){var t=!1,i=setTimeout(function(){t||(t=!0,e())},(n||0)+120);a.one("transitionend webkitTransitionEnd oTransitionEnd",function(){t||(t=!0,clearTimeout(i),e())})})}},{key:"registerStepNavigators",value:function(e){var t=this.$,n=this;this.handleFocus(e),t(this.formSelector).on("click",".fluentform-step .step-nav button, .fluentform-step .step-nav img",function(a){var i=t(this).data("action"),r="next",o=t(this).closest(".fluentform-step"),s=n.getFormInstance();if("next"===i){try{var l=o.find(":input").not(":button").filter(function(e,n){return!t(n).closest(".has-conditions").hasClass("ff_excluded")});l.length&&s.validate(l),n.activeStep++}catch(a){if(!(a instanceof window.ffValidationError))throw a;return s.showErrorMessages(a.messages),void s.scrollToFirstError(350)}n.$theForm.trigger("ff_to_next_page",n.activeStep),t(document).trigger("ff_to_next_page",{step:n.activeStep,form:n.$theForm});var f=n.$theForm.find(".fluentform-step");n.$theForm.trigger("ff_render_dynamic_smartcodes",t(f[n.activeStep]))}else n.activeStep--,r="prev",n.$theForm.trigger("ff_to_prev_page",n.activeStep),t(document).trigger("ff_to_prev_page",{step:n.activeStep,form:n.$theForm});var c="yes"!=n.$theForm.find(".ff-step-container").attr("data-disable_auto_focus");n.updateSlider(n.activeStep,e,c,r).then(function(){n.handleFocus(e)}).catch(function(e){console.error("An error occurred during the slider update:",e)})})}},{key:"updateSlider",value:function(e,t){var n=this,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"next",r=this.$,o=this;return new Promise(function(s){r("div"+n.formSelector+"_errors").empty(),n.activeStep=e;var l=n.$theForm.find(".ff-step-titles li"),f=n.$theForm.find(".fluentform-step"),c=f.length;if(!window.ff_disable_auto_step&&c){var u=o.$theForm.find(".fluentform-step").index(o.$theForm.find(".fluentform-step.active"));if("prev"===i||u>-1&&n.activeStep<u)for(;n.activeStep>0&&n.isStepAllFieldsHidden(r(f[n.activeStep]));)n.activeStep--;else for(;n.activeStep<c-1&&n.isStepAllFieldsHidden(r(f[n.activeStep]));)n.activeStep++}f.css("display","none").removeClass("active").attr("aria-hidden","true"),r(f[n.activeStep]).css("display","block").addClass("active").attr("aria-hidden","false"),l.removeClass("ff_active ff_completed"),r.each(p(Array(n.activeStep).keys()),function(e){r(r(l[e])).addClass("ff_completed")}),r(l[n.activeStep]).addClass("ff_active");var d=r(f[n.activeStep]).closest(".ff-step-container").data("animation_type"),h=r(f[n.activeStep]);h.find(".step-nav button, .step-nav img").css("visibility","hidden");var m,v=c;m="none"===d?0===t?0:t<50?50:t<200?t:window.ffTransitionTimeOut||500:t;var g,y=n.animateProgressToStep(n.activeStep,v,m);switch(d){case"slide":h.css({display:"block",position:"relative",left:n.isRtl?"-100%":"100%",opacity:0,transition:"all ".concat(t,"ms cubic-bezier(0.25, 0.1, 0.25, 1.0)")}),h[0].offsetHeight,h.css({left:"0%",opacity:1}),g=new Promise(function(e){return setTimeout(function(){h.css({position:"",left:"",transition:""}),e()},t+50)});break;case"fade":h.css({display:"block",opacity:0,transition:"opacity ".concat(t,"ms ease-in-out")}),h[0].offsetHeight,h.css("opacity",1),g=new Promise(function(e){return setTimeout(function(){h.css("transition",""),e()},t+50)});break;case"slide_down":h.css({display:"block",opacity:0,maxHeight:"0",overflow:"hidden",transition:"all ".concat(t,"ms cubic-bezier(0.25, 0.1, 0.25, 1.0)")}),h[0].offsetHeight;var _=h[0].scrollHeight;h.css({maxHeight:_+"px",opacity:1}),g=new Promise(function(e){return setTimeout(function(){h.css({maxHeight:"",overflow:"",transition:""}),e()},t+50)});break;default:var b,w=window.ffTransitionTimeOut||500;b=t<50&&t>0?50:t<w?t:w,g=new Promise(function(e){return setTimeout(e,b)})}Promise.all([g,y]).then(function(){a&&function(){if(!window.ff_disable_step_scroll){var e,t,n,a,i,s,l=o.$theForm.find(".ff_step_start");e=window.ff_scroll_top_offset?window.ff_scroll_top_offset:l.offset().top-100,a=(n=(t=l).offset().top)+t.outerHeight(),s=(i=r(window).scrollTop())+r(window).height(),a>i&&n<s&&!window.ff_force_scroll||r("html, body").animate({scrollTop:e},500,"swing")}}(),function(){var t=0===e&&!a,n=o.$theForm.hasClass("ff_submitting");if(!o.stepPersistency||o.isPopulatingStepData||t||n||o.saveStepData(o.$theForm,o.activeStep).then(function(e){}),o.stepProgressBarHandle({activeStep:o.activeStep,totalSteps:c}),f.last().hasClass("active")?o.$theForm.find('button[type="submit"]').css("visibility","visible"):o.$theForm.find('button[type="submit"]').css("visibility","hidden"),!window.ff_disable_auto_step){o.$theForm.find(".fluentform-step.active");var l=o.$theForm.find(".fluentform-step.active > div").length-1,u=o.$theForm.find(".fluentform-step.active > .ff_excluded").length;if(o.$theForm.find(".fluentform-step.active > .ff-t-container").length&&(l-=o.$theForm.find(".fluentform-step.active > .ff-t-container").length,l+=o.$theForm.find(".fluentform-step.active > .ff-t-container > .ff-t-cell > div").length,u+=o.$theForm.find(".fluentform-step.active > .ff-t-container > .ff-t-cell > .ff_excluded").length,o.$theForm.find(".fluentform-step.active > .ff-t-container.ff_excluded").length&&(u-=o.$theForm.find(".fluentform-step.active > .ff-t-container.ff_excluded").length,u-=o.$theForm.find(".fluentform-step.active > .ff-t-container.ff_excluded > .ff-t-cell > .ff_excluded").length,u+=o.$theForm.find(".fluentform-step.active > .ff-t-container.ff_excluded > .ff-t-cell > div").length)),l===u){var d="prev"===i?o.activeStep-1:o.activeStep+1;if(d>=0&&d<c){var p="none"===r(f[d]).closest(".ff-step-container").data("animation_type")?50:100;return void o.updateSlider(d,p,a,i).then(function(){s()}).catch(function(e){console.error("An error occurred during step skip:",e),s()})}}}o.$theForm.find(".fluentform-step.active").find('.step-nav button[data-action="next"]').css("visibility","visible"),o.$theForm.find(".fluentform-step.active").find('.step-nav button[data-action="prev"]').css("visibility","visible"),o.$theForm.find(".fluentform-step.active").find('.step-nav img[data-action="next"]').css("visibility","visible"),o.$theForm.find(".fluentform-step.active").find('.step-nav img[data-action="prev"]').css("visibility","visible"),s()}()})})}},{key:"handleFocus",value:function(e){var t=this.$,n=this,a=!1,i=function(a){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="yes"!=n.$theForm.find(".ff-step-container").attr("data-disable_auto_focus");if(!n.isInitialLoad)if(r){var o=a.find("input, .ff-custom_html, select, textarea, button, a").filter(":visible");o.length&&i&&setTimeout(function(){o.first().focus()},e+50),n.isInitialLoad=!1}else{var s;!(null===(s=window.fluentFormVars)||void 0===s||!s.step_change_focus)&&setTimeout(function(){t("".concat(n.formSelector," .fluentform-step.active")).attr("tabindex","-1").focus().removeAttr("tabindex")},e),n.isInitialLoad=!1}};n.$theForm.off("keydown.stepNavigation").on("keydown.stepNavigation",function(e){if(!a&&(" "===e.key||32===e.keyCode)){var i=t("".concat(n.formSelector," .fluentform-step.active .ff-btn-next")),r=t("".concat(n.formSelector," .fluentform-step.active .ff-btn-prev"));return document.activeElement===i[0]?(e.preventDefault(),void i.click()):document.activeElement===r[0]?(e.preventDefault(),void r.click()):void 0}}),this.$theForm.on("ff_to_next_page ff_to_prev_page",function(){a=!0,setTimeout(function(){a=!1,i(n.$theForm.find(".fluentform-step.active"),!0)},e+50)}),"yes"!==this.$theForm.find(".ff-step-container").attr("data-disable_auto_focus")&&0!==n.$theForm.find(".fluentform-step").index(n.$theForm.find(".fluentform-step.active"))&&!this.isInitialLoad&&i(t("".concat(this.formSelector," .fluentform-step.active")),!0),this.isInitialLoad=!1}},{key:"saveStepData",value:function(e,t){var n=this.$,a=e.find(":input").filter(function(e,t){return!n(t).closest(".has-conditions").hasClass("ff_excluded")});a.filter(function(e,t){var a=n(t);return a.parents().hasClass("ff_repeater_table")&&"select"==a.attr("type")&&!a.val()}).prepend("<option selected disabled />");var i=a.serialize();n.each(e.find("[type=file]"),function(e,t){var a={},r=t.name+"[]";a[r]=[],n(t).closest("div").find(".ff-uploaded-list").find(".ff-upload-preview[data-src]").each(function(e,t){a[r][e]=n(this).data("src")}),n.each(a,function(e,t){if(t.length){var a={};a[e]=t,i+="&"+n.param(a)}})});var r={active_step:t,data:i,form_id:e.data("form_id"),action:"fluentform_step_form_save_data"};return n.post(this.fluentFormVars.ajaxUrl,r)}},{key:"maybeAutoSlider",value:function(){var e=this.$;if("yes"==this.$theForm.find(".ff-step-container").attr("data-enable_auto_slider")){var t=function(e){if(1==e.closest(".fluentform-step.active").find(".ff-el-group:not(.ff_excluded):not(.ff-custom_html)").length)if(e.closest(".fluentform-step.active").find(".ff_excluded").length){var t=window.ffTransitionTimeOut||500;setTimeout(function(){e.closest(".fluentform-step.active").find(".ff-btn-next").trigger("click")},t)}else e.closest(".fluentform-step.active").find(".ff-btn-next").trigger("click")};this.$theForm.find(".ff-el-form-check-radio,.ff-el-net-label, .ff-el-ratings label").on("click",function(){t(e(this))}),this.$theForm.find("select").on("change",function(){t(e(this))})}}},{key:"addFilesToElement",value:function(e,t){var n=this.$,a=this,i=e.closest(".ff-el-input--content").find(".ff-uploaded-list");n.each(t,function(e,t){t="object"===d(t)?t:{url:t,data_src:t};var r=n("<div/>",{class:"ff-upload-preview","data-src":t.data_src,style:"border: 1px solid rgb(111, 117, 125)"}),o=n("<div/>",{class:"ff-upload-thumb"});o.append(n("<div/>",{class:"ff-upload-preview-img",style:"background-image: url('".concat(a.getThumbnail(t.url),"');")}));var s=n("<div/>",{class:"ff-upload-details"}),l=n("<span/>",{html:a.fluentFormVars.upload_completed_txt,class:"ff-upload-progress-inline-text ff-inline-block"}),f=t.url.substring(t.url.lastIndexOf("/")+1);f.includes("-ff-")&&(f=f.substring(f.lastIndexOf("-ff-")+4));var c=n("<div/>",{class:"ff-upload-filename",html:f}),u=n('\n            <div class="ff-upload-progress-inline ff-el-progress">\n                <div style="width: 100%;" class="ff-el-progress-bar"></div>\n            </div>\n        '),p=n("<span/>",{"data-href":"#",html:"&times;",class:"ff-upload-remove"}),h=n("<div>",{class:"ff-upload-filesize ff-inline-block",html:""}),m=n("<div>",{class:"ff-upload-error",style:"color:red;"});s.append(c,u,l,h,m,p),r.append(o,s),i.append(r)}),e.trigger("change_remaining",-t.length),e.trigger("change")}},{key:"getThumbnail",value:function(e){if(!e)return"";var t=e.split(/[#?]/)[0].split(".").pop().trim().toLowerCase();if(-1!=["jpg","jpeg","gif","png"].indexOf(t))return e;var n=document.createElement("canvas");n.width=60,n.height=60,n.style.zIndex=8,n.style.position="absolute",n.style.border="1px solid";var a=n.getContext("2d");return a.fillStyle="rgba(0, 0, 0, 0.2)",a.fillRect(0,0,60,60),a.font="13px Arial",a.fillStyle="white",a.textAlign="center",a.fillText(t,30,30,60),n.toDataURL()}}],t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),b=[{type:8,token:"round",show:"round",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t||0===t||(t=2),e=parseFloat(e).toFixed(t),parseFloat(e)}},{type:0,token:"ceil",show:"ceil",value:function(e){return Math.ceil(e)}},{type:0,token:"floor",show:"floor",value:function(e){return Math.floor(e)}},{type:0,token:"abs",show:"abs",value:function(e){return Math.abs(e)}},{type:8,token:"max",show:"max",value:function(e,t){return e>t?e:t}},{type:8,token:"min",show:"min",value:function(e,t){return e<t?e:t}}];function w(e,t){var n=t.find(".ff_has_formula");if(n.length){var a={},i={};mexp.addToken(b);var r=function(){jQuery.each(n,function(n,a){var i=jQuery(a),r=i.data("calculation_formula"),s=function(e,t){for(var n,a=[],i=RegExp(e,"g");n=i.exec(t);)delete n.input,a.push(n);return a}(/{(.*?)}/g,r),d={};jQuery.each(s,function(e,n){var a=n[0];jQuery.each(["{input.","{select.","{checkbox.","{radio.","{repeat.","{payment."],function(e,n){if(function(e,t){return-1!==e.indexOf(t)}(a,n)){var i=(p=a,h=new RegExp(n+"|}","g"),p.replace(h,"")),r=0;if("{select."===n)r=c(i);else if("{checkbox."===n)r=u(i);else if("{radio."===n)r=f(i);else if("{repeat."===n)r=l(i);else if("{payment."===n)r=function(e){var n=0,a=t.find(":input[data-name="+e+"]");if(a.length&&o(a)){var i=a[0].type;"radio"===i?n=f(e,!0):"hidden"===i?n=a.attr("data-payment_value"):"number"===i||"text"===i?n=window.ff_helper.numericVal(a):"checkbox"===i?n=u(e,!0):"select-one"===i&&(n=c(e,!0))}return n}(i);else{var s=t.find("input[name="+i+"]");o(s)&&(r=window.ff_helper.numericVal(s))}return d[a]=r,!1}var p,h})}),jQuery.each(d,function(e,t){t||(t=0),r=r.split(e).join(t)});var p="";try{r=r.replace(/\n/g,""),p=mexp.eval(r),isNaN(p)&&(p="")}catch(e){console.log(e,a)}if("text"==i[0].type){var h=e(i),m=h.val(),v=window.ff_helper.formatCurrency(h,p);if(h.val(v).prop("defaultValue",v),""==m)return;m!=v&&h.trigger("change")}else i.text(p)})};t.find("input[type=number],input[data-calc_value],select[data-calc_value],.ff_numeric,.ff_payment_item").on("change keyup",r),r(),t.on("do_calculation",function(){r()}),jQuery(document).on("fluentform_reset",function(){n.val("").prop("defaultValue",""),setTimeout(function(){r()},100)})}function o(e){return!e.closest(".ff_excluded.has-conditions").length}function s(n){var a=0,i=t.find(n);return i.closest(".ff_excluded.has-conditions").length||e.each(i,function(t,n){var i=e(n).attr("data-calc_value");i&&!isNaN(i)&&(a+=Number(i))}),a}function l(n){var s=0,l=n.split("."),f=!1;l.length>1&&(n=l[0],f=l[1]);var c=t.find("table[data-root_name="+n+"]");if(a[n]||(a[n]=!0,c.on("repeat_change",function(){r()})),o(c))if(f){var u=c.find("tbody tr td:nth-child("+f+")");e.each(u,function(t,a){var o=e(a).find(":input"),l=n+"_"+f+"_"+o.attr("id");i[l]||(i[l]=!0,o.on("change",function(){r()}));var c=0;c="select"===o.attr("type")?parseFloat(o.find("option:selected").attr("data-calc_value")):parseFloat(o.val()),isNaN(c)||(s+=c)}),s&&(s=s.toFixed(2))}else s=c.find("tbody tr").length;return s}function f(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=0,i=t.find("input[name="+e+"]:checked");return n?i.attr("data-payment_value"):(o(i)&&(a=i.attr("data-calc_value")||0),a)}function c(e){var n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?t.find("select[name="+e+"] option:selected").data("payment_value"):(n=s("select[data-name="+e+"] option:selected"),t.find("select[data-name="+e+"]").attr("data-calc_value",n),n)}function u(e){if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1]))return s("input[data-name="+e+"]:checked");var n=t.find(":input[data-name="+e+"]").data("group_id"),a=t.find('input[data-group_id="'+n+'"]:checked'),i=0;return a.each(function(e,t){var n=jQuery(t).data("payment_value");n&&(i+=parseFloat(n))}),i}}(g=jQuery)(document.body).on("fluentform_init",function(n,a,i){if(a.attr("data-form_instance"),i){i.form_id_selector;var r="."+i.form_instance;if(function(e,t,n,a,i){var r=function(){jQuery.fn.fileupload&&(t.find('input[type="file"]').each(function(r,f){var c,d,p=e(this),h=p.closest(".ff-el-group");h.closest(".ff-column-container").is(".ff_columns_total_6, .ff_columns_total_5, .ff_columns_total_4")&&h.width()<162&&(d=h.width()),c=e("<div/>",{class:"ff-uploaded-list",style:"font-size:12px; margin-top: 15px;"+(d?"max-width:".concat(d,"px;"):"")}),p.closest("div").append(c);var m=c.width(),v=n.rules[p.prop("name")],g=v.max_file_count.value;"max_file_count"in v&&(v.max_file_count.remaining=Number(g));var y="";function _(e){var n=p.prop("name");t.trigger("show_element_error",{element:n,message:e})}function b(a,r){if(r&&r.files&&r.files.length){if(t.find(".ff-upload-preview-elem").remove(),"max_file_count"in v){e(i+"_errors").empty(),e(this).closest("div").find(".error").html("");var o=v.max_file_count.remaining;if(!o||r.files.length>o){var s="Maximum 1 file is allowed!";return s=g>1?"Maximum "+g+" files are allowed!":s,v.max_file_count&&v.max_file_count.message&&(s=v.max_file_count.message),_(s),!1}}var f=l(r.files[0],n.rules[p.prop("name")]);if(f.length)return _(f.join(", ")),!1;var c=p.prop("name");return e('[name="'.concat(c,'"]')).closest("div").find(".error").html(""),p.closest("div").find(".error").html(""),!0}}"allowed_file_types"in v?(y=v.allowed_file_types.value.join("|"),p.prop("accept","."+y.replace(/\|/g,",."))):(y=v.allowed_image_types.value.join("|"))?p.prop("accept","."+y.replace(/\|/g,",.")):p.prop("accept","image/*");var w=e(f);p.fileupload({dataType:"json",dropZone:p.closest(".ff-el-group"),url:a.ajaxUrl,formData:function(e){var t=e.serializeArray();return t.push({name:"action",value:"fluentform_file_upload"}),t.push({name:"formId",value:n.id}),t},change:b,add:function(t,n){if(b(0,n)){var i=e("<div/>",{class:"ff-upload-preview"+(d?" ff-upload-container-small-column-image":"")});n.context=i;var r=e("<div/>",{class:"ff-upload-thumb"}),l=e("<div/>",{class:"ff-upload-details"}),f=e("<div/>",{class:"ff-upload-preview-img",style:"background-image: url('".concat(o(n.files[0]),"');")}),u=e("<div>",{class:"ff-upload-error",style:"color:red;"}),p=e("<span/>",{html:a.upload_start_txt,class:"ff-upload-progress-inline-text ff-inline-block"}),h=e('\n\t\t\t\t\t\t\t\t\t<div class="ff-upload-progress-inline ff-el-progress">\n\t\t\t\t\t\t\t\t\t\t<div class="ff-el-progress-bar"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t'),v=e("<div/>",{class:"ff-upload-filename",text:n.files[0].name}),g=e("<span/>",{"data-href":"#","data-attachment-id":"",html:"&times;",class:"ff-upload-remove"}),y=e("<div>",{class:"ff-upload-filesize ff-inline-block",html:s(n.files[0].size)});r.append(f),l.append(v,h,p,y,u,g),i.append(r,l),c.append(i),d||(m-=91),v.css({maxWidth:m+"px"}),n.submit(),n.context.addClass("ff_uploading")}},progress:function(e,t){var n=parseInt(t.loaded/t.total*100,10);t.context.find(".ff-el-progress-bar").css("width",n+"%"),t.context.find(".ff-upload-progress-inline-text").text(a.uploading_txt)},done:function(e,n){if(n.context.removeClass("ff_uploading"),n.result&&"data"in n.result&&"files"in n.result.data)"error"in n.result.data.files[0]?(_("Upload Error: "+n.result.data.files[0].error),n.context.remove()):(n.context.find(".ff-upload-progress-inline-text").text(a.upload_completed_txt),v.max_file_count.remaining-=1,n.context.attr("data-src",n.result.data.files[0].url),n.context.find(".ff-upload-remove").attr({"data-href":n.result.data.files[0].file,"data-attachment-id":n.result.data.files[0].attachment_id}),n.context.addClass("ff_uploading_complete"),t.find("input[name="+w.data("name")+"]").trigger("change"));else{var i="Sorry! The upload failed for some unknown reason.";if(n.messages){var r=Object.keys(n.messages);r.length&&(i=n.messages[r[0]])}_(i),n.context.remove()}},fail:function(t,n){var a,i,r,o,s=[];null===(a=n.context)||void 0===a||a.remove(),null!==(i=n.jqXHR)&&void 0!==i&&i.responseJSON&&null!==(r=n.jqXHR)&&void 0!==r&&r.responseJSON.errors?e.each(n.jqXHR.responseJSON.errors,function(t,n){"object"==u(n)?e.each(n,function(e,t){s.push(t)}):s.push(n)}):null!==(o=n.jqXHR)&&void 0!==o&&o.responseText?s.push(n.jqXHR.responseText):s.push("Something is wrong when uploading the file! Please try again"),_(s.join(", "))}}),w.on("change_remaining",function(e,t){v.max_file_count.remaining+=t})}),t.find(".ff_upload_btn").on("keyup click",function(t){t.preventDefault(),t.stopPropagation(),("click"===t.type||"keyup"===t.type&&32===t.keyCode)&&e(this).siblings("input[type=file]").trigger("click")}))},o=function(e){if(e.type.match("image"))return URL.createObjectURL(e);var t=document.createElement("canvas");t.width=60,t.height=60,t.style.zIndex=8,t.style.position="absolute",t.style.border="1px solid";var n=t.getContext("2d");return n.fillStyle="rgba(0, 0, 0, 0.2)",n.fillRect(0,0,60,60),n.font="13px Arial",n.fillStyle="white",n.textAlign="center",n.fillText(e.name.substr(e.name.lastIndexOf(".")+1),30,30,60),t.toDataURL()},s=function(e){return e<1024?e+"bytes":e>=1024&&e<=1048576?(e/1024).toFixed(1)+"KB":e>1048576?(e/1048576).toFixed(1)+"MB":void 0},l=function(e,t){var n=[],a="",i="";if("allowed_file_types"in t?(a=t.allowed_file_types.value,i=t.allowed_file_types.message):"allowed_image_types"in t&&(a=t.allowed_image_types.value,i=t.allowed_image_types.message),a){var r=new RegExp("("+a.join("|")+")","i"),o=e.name.split(".").pop();o=o.toLowerCase(),r.test(o)||n.push(i)}return"max_file_size"in t&&e.size>t.max_file_size.value&&n.push(t.max_file_size.message),n};r(),t.find(".ff-uploaded-list").on("click",".ff-upload-remove",function(t){t.preventDefault();var n=e(this),i=n.closest(".ff-uploaded-list"),r=i.closest(".ff-el-input--content").find("input[type=file]"),o=n.attr("data-href"),s=n.attr("data-attachment-id");"#"==o?(n.closest(".ff-el-input--content").find(".error").remove(),n.closest(".ff-upload-preview").remove(),i.find(".ff-upload-preview").length||i.siblings(".ff-upload-progress").addClass("ff-hidden"),r.trigger("change_remaining",1)):e.post(a.ajaxUrl,{path:o,attachment_id:s,action:"fluentform_delete_uploaded_file"}).then(function(e){n.closest(".ff-el-input--content").find("input"),r.trigger("change_remaining",1),n.closest(".ff-el-input--content").find(".error").remove(),n.closest(".ff-upload-preview").remove(),i.find(".ff-upload-preview").length||i.siblings(".ff-upload-progress").addClass("ff-hidden"),r.trigger("change")})}),e(document.body).on("fluentform_reset",function(){r()})}(g,a,i,window.fluentFormVars,r),t(a),function(e,t){var n=t.find(".fluentform .js-repeat");e.each(n,function(t,n){var a=e(n);if(a.find(".ff-t-cell").length>1){var i=a.find(".ff-el-group").height()-a.find(".ff-el-group").find(".ff-el-input--content").height();a.find(".js-repeat-buttons").css("margin-top",i+"px")}var r=a.find(".ff-el-group").find(".ff-el-input--content .ff-el-form-control").outerHeight();a.find(".ff-el-repeat-buttons").height(r)})}(g,a),c(g,a,i,window.fluentFormVars),w(g,a),function(e,t){var n=t.find(".jss-ff-el-ratings");n.length&&e.each(n,function(t,n){var a=e(n);a.find("label.active").prevAll().addClass("active"),a.on("mouseenter","label",function(t){var n=e(this),a="[data-id="+n.find("input").attr("id")+"]";n.addClass("active"),n.prevAll().addClass("active"),n.nextAll().removeClass("active"),n.closest(".ff-el-input--content").find(".ff-el-rating-text").css("display","none"),n.closest(".ff-el-input--content").find(a).css("display","inline-block")}).on("click","label",function(t){var n=e(this).find(".jss-ff-svg");n.addClass("scale"),n.addClass("scalling"),setTimeout(function(e){n.removeClass("scalling"),n.removeClass("scale")},150)}).on("mouseleave",function(t){var n=e(this),a="[data-id="+n.find("input:checked").attr("id")+"]",i=n.find("input:checked").parent("label");i.length?(i.addClass("active"),i.prevAll().addClass("active"),i.nextAll().removeClass("active")):n.find("label").removeClass("active"),n.closest(".ff-el-input--content").find(".ff-el-rating-text").css("display","none"),n.closest(".ff-el-input--content").find(a).css("display","inline-block")})})}(g,a),e(g,a),a.hasClass("ff-form-has-steps")){var o=function(e,t,n,a){return new _(e,t,n,a).getPublicAPI()}(g,a,window.fluentFormVars,r);o.init(),a.on("update_slider",function(e,t){o.updateSlider(t.goBackToStep,t.animDuration,t.isScrollTop,t.actionType)})}a.hasClass("ff_has_dynamic_smartcode")&&(a.on("ff_render_dynamic_smartcodes",function(e,t){s(g(t))}),a.on("keyup change",":input",function(){s(a)}),s(a))}else console.log("No Fluent form JS vars found!");function s(e){jQuery.each(e.find(".ff_dynamic_value"),function(e,t){var n=g(t).data("ref");if("payment_summary"!=n){var i=a.find('.ff-el-form-control[name="'+n+'"]'),r=" ";i.length||(i=a.find('.ff-field_container[data-name="'+n+'"]').find("input")),i.length||((i=a.find('*[name="'+n+'"]:checked')).length||(i=a.find('*[name="'+n+'[]"]:checked'),r=", "),i.length||(i=a.find('*[name="'+n+'[]"]').find("option:selected"),r=", "));var o=[];if(!i.length){var s=a.find('.ff-el-repeater[data-name="'+n+'"] tbody tr');s.each(function(e){var t=g(this).find("input, select"),n=[];t.each(function(e){var t=g(this).val();if(t){var a=g(this).closest("td").data("label")||"Column-"+(e+1);n.push(a+": "+t)}}),n.length&&o.push("#"+(e+1)+"- "+n.join(" | "))}),s.length&&(r="<br/>")}g.each(i,function(){var e=g(this).val(),t=g(this).closest(".ff-el-group.has-conditions").hasClass("ff_excluded");e&&!t&&o.push(e)});var l,f="";f=o.length?o.join(r):g(t).data("fallback"),g(this).html(null==(l=f)?"":("string"!=typeof l&&(l=String(l)),(l=(l=l.replace(/<script[^]*?>[^]*?<\/script>/gi,"").replace(/<iframe[^]*?>[^]*?<\/iframe>/gi,"").replace(/<.*?\bon\w+=["'][^"']*["']/gi,"").replace(/javascript:/gi,"")).replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/&lt;br\s*\/?&gt;/gi,"<br/>").replace(/\n/g,"<br/>")))}else a.trigger("calculate_payment_summary",{element:g(t)})})}}),(y=String.prototype).startsWith||(y.startsWith=function(e,t){return t=!t||t<0?0:+t,this.substring(t,t+e.length)===e}),y.endsWith||(y.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),y.includes||(y.includes=function(e,t){if(e instanceof RegExp)throw TypeError("first argument must not be a RegExp");return void 0===t&&(t=0),-1!==this.indexOf(e,t)})})();



(()=>{function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?e(Object(i),!0).forEach(function(e){n(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}jQuery(document).ready(function(){window.fluentFormrecaptchaSuccessCallback=function(e){if(window.innerWidth<768&&/iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var t=jQuery(".g-recaptcha").filter(function(t,n){return grecaptcha.getResponse(t)==e});t.length&&jQuery("html, body").animate({scrollTop:t.first().offset().top-jQuery(window).height()/2},0)}},window.ffValidationError=function(){var e=function(){};return(e.prototype=Object.create(Error.prototype)).constructor=e,e}(),window.ff_helper={numericVal:function(e){if(e.hasClass("ff_numeric")){var t=JSON.parse(e.attr("data-formatter"));return currency(e.val(),t).value}return e.val()||0},formatCurrency:function(e,t){if(e.hasClass("ff_numeric")){var n=JSON.parse(e.attr("data-formatter"));return currency(t,n).format()}return t}},function(e,n){e||(e={}),e.stepAnimationDuration=parseInt(e.stepAnimationDuration);var i={};window.fluentFormApp=function(t){var a=t.attr("data-form_instance");a=a?a.replace(/[^a-zA-Z0-9_-]/g,""):"";var f=window["fluent_form_"+a],s=f&&"object"===r(f)?f:null;if(!s)return console.log("No Fluent form JS vars found!"),!1;if(i[a])return i[a];var c,l,u,d,h,p,m,v,g,_,y,w,b,k,C,x,j,S,T,O,Q,A,E,F,P=s.form_id_selector,N="."+a;return c=o,l={},u=function(){return n("body").find("form"+N)},h=function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"next";t.trigger("update_slider",{goBackToStep:e,animDuration:n,isScrollTop:r,actionType:i})},p=function(e){try{var t=e.find(":input").filter(function(e,t){return"repeater_container"===n(t).attr("data-type")?!n(t).closest(".ff-repeater-container").hasClass("ff_excluded")&&(n(this).closest(".has-conditions").hasClass("ff_excluded")&&n(this).val(""),!0):!n(t).closest(".has-conditions").hasClass("ff_excluded")});k(t);var r=t.serializeArray(),i=r.map(function(e){return e.name});t=t.filter(function(){return!n(this).closest(".ff-el-input--content").find("table").length});var a={};t.each(function(){var t=n(this).attr("name");i.includes(t)||(n(this).is(":checkbox")||n(this).is(":radio"))&&(a[t]||e.find('input[name="'+t+'"]:checked').length||(r.push({name:t,value:""}),a[t]=!0))});var o={data:n.param(n.map(r,function(e){return{name:e.name,value:e.value}})),action:"fluentform_submit",form_id:e.data("form_id")};if(n.each(e.find("[type=file]"),function(e,t){var r={},i=t.name+"[]";r[i]=[],n(t).closest("div").find(".ff-uploaded-list").find(".ff-upload-preview[data-src]").each(function(e,t){r[i][e]=n(this).data("src")}),n.each(r,function(e,t){if(t.length){var r={};r[e]=t,o.data+="&"+n.param(r)}})}),e.find(".ff_uploading").length){var f=n("<div/>",{class:"error text-danger"}),s=n("<span/>",{class:"error-clear",html:"&times;",click:function(e){return n(N+"_errors").html("")}}),c=n("<span/>",{class:"error-text",text:"File upload in progress. Please wait..."});return n(N+"_errors").html(f.append(c,s)).show()}if(e.find(".ff-el-recaptcha.g-recaptcha").length){var u=e.find(".ff-el-recaptcha.g-recaptcha").data("g-recaptcha_widget_id");void 0!==u&&(o.data+="&"+n.param({"g-recaptcha-response":grecaptcha.getResponse(u)}))}if(e.find(".ff-el-hcaptcha.h-captcha").length){var d=e.find(".ff-el-hcaptcha.h-captcha").data("h-captcha_widget_id");void 0!==d&&(o.data+="&"+n.param({"h-captcha-response":hcaptcha.getResponse(d)}))}if(e.find(".ff-el-turnstile.cf-turnstile").length){var h=e.find(".ff-el-turnstile.cf-turnstile").data("cf-turnstile_widget_id");void 0!==h&&(o.data+="&"+n.param({"cf-turnstile-response":turnstile.getResponse(h)}))}n(N+"_success").remove(),n(N+"_errors").html(""),e.find(".error").html(""),e.parent().find(".ff-errors-in-stack").hide(),function(e,t){var n=[],r=l;return e.hasClass("ff_has_v3_recptcha")&&(r.ff_v3_recptcha=function(e,t){var n=jQuery.Deferred(),r=e.data("recptcha_key");return grecaptcha.execute(r,{action:"submit"}).then(function(e){t.data+="&"+jQuery.param({"g-recaptcha-response":e}),n.resolve()}),n.promise()}),jQuery.each(r,function(r,i){n.push(i(e,t))}),jQuery.when.apply(jQuery,n)}(e,o).then(function(){v(e),m(e,o)})}catch(e){if(!(e instanceof ffValidationError))throw e;C(e.messages),w(350)}},m=function(t,r){var i,a,o=(i="t="+Date.now(),a=e.ajaxUrl,a+=(a.split("?")[1]?"&":"?")+i);if(!this.isSending){var f,c=this;this.isSending=!0,n.post(o,r).then(function(r){if(!r||!r.data||!r.data.result)return t.trigger("fluentform_submission_failed",{form:t,response:r}),void C(r);if(f=r,r.data.append_data&&E(r.data.append_data),r.data.nextAction)t.trigger("fluentform_next_action_"+r.data.nextAction,{form:t,response:r});else{t.triggerHandler("fluentform_submission_success",{form:t,config:s,response:r}),jQuery(document.body).trigger("fluentform_submission_success",{form:t,config:s,response:r});var i=new CustomEvent("fluentform_submission_success",{detail:{form:t[0],config:s,response:r}});if(document.dispatchEvent(i),"redirectUrl"in r.data.result)return r.data.result.message&&(n("<div/>",{id:P+"_success",class:"ff-message-success",role:"status","aria-live":"polite"}).html(r.data.result.message).insertAfter(t).focus(),t.find(".ff-el-is-error").removeClass("ff-el-is-error")),void(location.href=r.data.result.redirectUrl);var a=P+"_success",o="#"+a;n(o).length&&n(o).slideUp("fast"),n("<div/>",{id:a,class:"ff-message-success",role:"status","aria-live":"polite"}).html(r.data.result.message).insertAfter(t).focus(),t.find(".ff-el-is-error").removeClass("ff-el-is-error"),"hide_form"==r.data.result.action?(t.hide().addClass("ff_force_hide"),t[0].reset()):(jQuery(document.body).trigger("fluentform_reset",[t,s]),t[0].reset());var c=n(o);c.length&&!b(c[0])&&n("html, body").animate({scrollTop:c.offset().top-(n("#wpadminbar")?32:0)-20},e.stepAnimationDuration)}}).fail(function(n){t.trigger("fluentform_submission_failed",{form:t,response:n});var r=new CustomEvent("fluentform_submission_failed",{detail:{form:t[0],response:n,config:s}});if(document.dispatchEvent(r),n&&n.responseJSON&&(n.responseJSON.data||n.responseJSON.errors)){if(f=n,n.responseJSON.append_data&&E(n.responseJSON.append_data),C(n.responseJSON.errors||n.responseJSON.data),w(350),t.find(".fluentform-step").length){var i=t.find(".error").not(":empty:first").closest(".fluentform-step");if(i.length){var a=i.index();h(a,e.stepAnimationDuration,!1)}}g(t)}else C(n.responseText)}).always(function(e){var n;if(c.isSending=!1,null===(n=f)||void 0===n||null===(n=n.data)||void 0===n||null===(n=n.result)||void 0===n||!n.hasOwnProperty("redirectUrl")){if(g(t),window.grecaptcha){var r=t.find(".ff-el-recaptcha.g-recaptcha").data("g-recaptcha_widget_id");void 0!==r&&grecaptcha.reset(r)}if(window.hcaptcha){var i=t.find(".ff-el-hcaptcha.h-captcha").data("h-captcha_widget_id");void 0!==i&&hcaptcha.reset(i)}if(window.turnstile){var a=t.find(".ff-el-turnstile.cf-turnstile").data("cf-turnstile_widget_id");void 0!==a&&turnstile.reset(a)}}})}},_=function(){"yes"!=t.attr("data-ff_reinit")&&(n(document).on("submit",N,function(e){e.preventDefault(),window.ff_sumitting_form||(window.ff_sumitting_form=!0,setTimeout(function(){window.ff_sumitting_form=!1},1500),p(n(this)))}),n(document).on("reset",N,function(r){!function(r){n(".ff-step-body",t).length&&h(0,e.stepAnimationDuration,!1),r.find(".ff-el-repeat .ff-t-cell").each(function(){n(this).find("input").not(":first").remove()}),r.find(".ff-el-repeat .ff-el-repeat-buttons-list").find(".ff-el-repeat-buttons").not(":first").remove();var i=r.find("input[type=checkbox],input[type=radio]");i.length&&i.each(function(e,t){(t=n(t)).prop("defaultChecked")?t.closest(".ff-el-form-check").addClass("ff_item_selected"):t.closest(".ff-el-form-check.ff_item_selected").removeClass("ff_item_selected")}),r.find("input[type=file]").closest("div").find(".ff-uploaded-list").html("").end().closest("div").find(".ff-upload-progress").addClass("ff-hidden").find(".ff-el-progress-bar").css("width","0%");var a=r.find('input[type="range"]');a.length&&a.each(function(e,t){(t=n(t)).val(t.data("calc_value")).change()}),n.each(s.conditionals,function(e,t){n.each(t.conditions,function(e,t){y(T(t.field))})})}(n(this))}),n(document).on("keydown",N+' input[type="radio"], '+N+' input[type="checkbox"]',function(e){if("Enter"===e.key)return e.preventDefault(),"radio"===n(this).attr("type")?n(this).prop("checked",!0):"checkbox"===n(this).attr("type")&&n(this).prop("checked",!n(this).prop("checked")),n(this).trigger("change"),e.stopPropagation(),!1}))},y=function(e){var t=e.prop("type");null!=t&&("checkbox"==t||"radio"==t?e.each(function(e,t){var r=n(this);r.prop("checked",r.prop("defaultChecked"))}):t.startsWith("select")?e.find("option").each(function(e,t){var r=n(this);r.prop("selected",r.prop("defaultSelected"))}):e.val(e.prop("defaultValue")),e.trigger("change"))},w=function(e){var r=s.settings.layout.errorMessagePlacement;if(r&&"stackToBottom"!=r){var i=t.find(".ff-el-is-error").first();i.length&&!b(i[0])&&n("html, body").delay(e).animate({scrollTop:i.offset().top-(n("#wpadminbar")?32:0)-20},e)}},b=function(e){if(!e)return!0;var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=n(window).height()&&t.right<=n(window).width()},C=function(e){if(t.parent().find(".ff-errors-in-stack").empty(),e)if("string"!=typeof e){var r=s.settings.layout.errorMessagePlacement;if(!r||"stackToBottom"==r)return x(e),!1;t.find(".error").empty(),t.find(".ff-el-group").removeClass("ff-el-is-error"),n.each(e,function(e,t){"string"==typeof t&&(t=[t]),n.each(t,function(t,n){j(e,n)})})}else x({error:[e]})},x=function(e){var t=u(),r=t.parent().find(".ff-errors-in-stack");e&&(n.isEmptyObject(e)||(n.each(e,function(e,i){"string"==typeof i&&(i=[i]),n.each(i,function(i,a){var o=n("<div/>",{class:"error text-danger"}),f=n("<span/>",{class:"error-clear",html:"&times;"}),s=n("<span/>",{class:"error-text","data-name":T(e).attr("name"),html:a});o.attr("role","alert"),o.append(s,f),n(document.body).trigger("fluentform_error_in_stack",{form:t,element:T(e),message:s}),r.append(o).show()});var a=T(e);if(a){var o=a.attr("name");a.attr("aria-invalid","true");var f=n("[name='"+o+"']").first();f&&f.closest(".ff-el-group").addClass("ff-el-is-error")}}),b(r[0])||n("html, body").animate({scrollTop:r.offset().top-100},350),r.on("click",".error-clear",function(){n(this).closest("div").remove(),r.hide()}).on("click",".error-text",function(){var e=n("[name='".concat(n(this).data("name"),"']")).first();n("html, body").animate({scrollTop:e.offset()&&e.offset().top-100},350,function(t){return e.focus()})})))},j=function(e,r){var i,a;(i=T(e)).length?(i.attr("aria-invalid","true"),(a=n("<div/>",{class:"error text-danger"})).attr("role","alert"),i.closest(".ff-el-group").addClass("ff-el-is-error"),i.closest(".ff-el-input--content").length?(i.closest(".ff-el-input--content").find("div.error").remove(),n(document.body).trigger("fluentform_error_below_element",{form:t,element:i,message:r}),i.closest(".ff-el-input--content").append(a.html(r))):(i.find("div.error").remove(),i.append(a.text(r)))):x([r])},S=function(){t.find(".ff-el-group,.ff_repeater_table, .ff_repeater_container").on("change","input,select,textarea",function(){if(!window.ff_disable_error_clear){n(this).attr("aria-invalid","false");var e=s.settings.layout.errorMessagePlacement;if(e||"stackToBottom"!=e){var t=n(this).closest(".ff-el-group");t.hasClass("ff-el-is-error")&&t.removeClass("ff-el-is-error").find(".error.text-danger").remove()}}})},T=function(e){var t=u(),r=n("[data-name='"+e+"']",t);return(r=r.length?r:n("[name='"+e+"']",t)).length?r:n("[name='"+e+"[]']",t)},O=function(){t.find(".ff-el-recaptcha.g-recaptcha").length&&window.grecaptcha&&"function"==typeof window.grecaptcha.ready&&window.grecaptcha.ready(function(){t.find(".ff-el-recaptcha.g-recaptcha").each(function(){Q("g-recaptcha",n(this),grecaptcha.render)})}),t.find(".ff-el-turnstile.cf-turnstile").length&&window.turnstile&&"function"==typeof window.turnstile.ready&&window.turnstile.ready(function(){t.find(".ff-el-turnstile.cf-turnstile").each(function(){Q("cf-turnstile",n(this),turnstile.render)})}),t.find(".ff-el-hcaptcha.h-captcha").length&&window.hcaptcha&&t.find(".ff-el-hcaptcha.h-captcha").each(function(){Q("h-captcha",n(this),hcaptcha.render)})},Q=function(e,t,n){var r=t.data("sitekey"),i=t.attr("id"),a="data-".concat(e,"_widget_id");try{var o=t.attr(a);if("g-recaptcha"===e||"h-captcha"===e){if(o&&t.find("iframe").length>0)return}else if("cf-turnstile"===e){var f=t.find('input[name="cf-turnstile-response"]');if(f.length&&f.val())return;var s=t.attr(a);s&&window.turnstile&&turnstile.remove(s)}var c=i;"cf-turnstile"===e&&(c="#"+i),o=n(c,{sitekey:r}),t.attr(a,o)}catch(t){console.error("Error rendering ".concat(e,":"),t)}},A=function(e,t,n){var r="data-".concat(e,"_widget_id"),i=t.attr(r);if(i)try{return n(i),!0}catch(n){console.error("Error resetting ".concat(e,":"),n),t.removeAttr(r).removeData("".concat(e,"-rendered"))}return!1},E=function(e){jQuery.each(e,function(e,r){if(r){var i=t.find("input[name="+e+"]");i.length?i.attr("value",r):n("<input>").attr({type:"hidden",name:e,value:r}).appendTo(t)}})},F={initFormHandlers:function(){_(),d(),S(),t.removeClass("ff-form-loading").addClass("ff-form-loaded"),t.on("show_element_error",function(e,t){j(t.element,t.message)})},registerFormSubmissionHandler:_,maybeInlineForm:d=function(){t.hasClass("ff-form-inline")&&t.find("button.ff-btn-submit").css("height","50px")},reinitExtras:function(){t.find(".ff-el-recaptcha.g-recaptcha").length&&window.grecaptcha&&"function"==typeof window.grecaptcha.ready&&window.grecaptcha.ready(function(){t.find(".ff-el-recaptcha.g-recaptcha").each(function(){var e=n(this);A("g-recaptcha",e,grecaptcha.reset)||Q("g-recaptcha",e,grecaptcha.render)})}),t.find(".ff-el-turnstile.cf-turnstile").length&&window.turnstile&&"function"==typeof window.turnstile.ready&&window.turnstile.ready(function(){t.find(".ff-el-turnstile.cf-turnstile").each(function(){var e=n(this);A("cf-turnstile",e,turnstile.reset)||Q("cf-turnstile",e,turnstile.render)})}),t.find(".ff-el-hcaptcha.h-captcha").length&&window.hcaptcha&&t.find(".ff-el-hcaptcha.h-captcha").each(function(){var e=n(this);A("h-captcha",e,hcaptcha.reset)||Q("h-captcha",e,hcaptcha.render)})},initTriggers:function(){t=u(),jQuery(document.body).trigger("fluentform_init",[t,s]),jQuery(document.body).trigger("fluentform_init_"+s.id,[t,s]),t.trigger("fluentform_init_single",[this,s]),t.find("input.ff-el-form-control").on("keypress",function(e){return 13!==e.which}),t.data("is_initialized","yes"),t.find("input.ff-read-only").each(function(){n(this).attr({tabindex:"-1",readonly:"readonly"})}),t.find(".ff-el-tooltip").on("mouseenter",function(e){var r=n(this).data("content"),i=n(".ff-el-pop-content");i.length||(n("<div/>",{class:"ff-el-pop-content"}).appendTo(document.body),i=n(".ff-el-pop-content")),r=r.replace(/<script[^]*?>[^]*?<\/script>/gi,"").replace(/<iframe[^]*?>[^]*?<\/iframe>/gi,"").replace(/<.*?\bon\w+=["'][^"']*["']/gi,"").replace(/javascript:/gi,""),i.html(r);var a=t.innerWidth()-20;i.css("max-width",a);var o=n(this).offset().left,f=i.outerWidth(),s=i.outerHeight(),c=o-f/2+10;c<15&&(c=15),i.css("top",n(this).offset().top-s-5),i.css("left",c)}),t.find(".ff-el-tooltip").on("mouseleave",function(){n(".ff-el-pop-content").remove()}),n(document).on("lity:open",function(){var e;null===(e=window.turnstile)||void 0===e||e.remove(),O()}),t.one("focus",'input, select, textarea, input[type="checkbox"], input[type="radio"]',function(){t.trigger("fluentform_first_interaction")}),t.on("fluentform_first_interaction",function(){O()}),t.on("ff_to_next_page ff_to_prev_page",function(e){O()}),O()},validate:k=function(e){e.length||(e=n("form.frm-fluent-form").find(":input").not(":button").filter(function(e,t){return!n(t).closest(".has-conditions").hasClass("ff_excluded")})),e.each(function(e,t){n(t).closest(".ff-el-group").removeClass("ff-el-is-error").find(".error").remove()}),c().validate(e,s.rules)},showErrorMessages:C,scrollToFirstError:w,settings:s,formSelector:N,sendData:m,addGlobalValidator:function(e,t){l[e]=t},config:s,showFormSubmissionProgress:v=function(e){e.addClass("ff_submitting"),e.find(".ff-btn-submit").addClass("disabled").addClass("ff-working").prop("disabled",!0)},addFieldValidationRule:function(e,t,n){s.rules[e]||(s.rules[e]={}),s.rules[e][t]=n},removeFieldValidationRule:function(e,t){e in s.rules&&t in s.rules[e]&&delete s.rules[e][t]},hideFormSubmissionProgress:g=function(e){e.removeClass("ff_submitting"),e.find(".ff-btn-submit").removeClass("disabled").removeClass("ff-working").attr("disabled",!1),t.parent().find(".ff_msg_temp").remove()}},i[a]=F,F};var a={init:function(){var e=this;setTimeout(function(){e.initMultiSelect()},100),this.initMask(),this.initNumericFormat(),this.initCheckableActive(),this.maybeInitSpamTokenProtection(),this.maybeHandleCleanTalkSubmitTime(),this.initOtherOptionHandlers()},maybeInitSpamTokenProtection:function(){var e=this;jQuery("form.frm-fluent-form").each(function(t,n){var r=jQuery(n),i=r.find(".fluent-form-token-field");if(0!==i.length&&!r.hasClass("ff_tokenizing")&&!r.hasClass("ff_tokenized")){var a=function(){r.hasClass("ff_tokenized")||r.hasClass("ff_tokenizing")||(r.addClass("ff_tokenizing"),e.generateAndSetToken(r,i))};r.one("ff_to_next_page ff_to_prev_page",function(e){a()}),r.on("fluentform_first_interaction",function(){a()})}})},generateAndSetToken:function(t,n){var r,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=t.data("form_id"),o=e.ajaxUrl+"?t="+Date.now(),f=this;jQuery.post(o,{action:"fluentform_generate_protection_token",form_id:a,nonce:null===(r=e)||void 0===r?void 0:r.token_nonce}).done(function(e){e.success&&e.data.token?(n.val(e.data.token),t.addClass("ff_tokenized")):(n.val(null),console.error("Token generation failed for form ID:",a))}).fail(function(e,r,o){console.error("Error generating token for form ID:",a,o),i&&setTimeout(function(){f.generateAndSetToken(t,n,!1)},1e3)}).always(function(){t.removeClass("ff_tokenizing")})},maybeHandleCleanTalkSubmitTime:function(){var e;null!==(e=window.fluentFormVars)&&void 0!==e&&e.has_cleantalk&&jQuery("form.frm-fluent-form").each(function(e,t){var n=jQuery(t).find(".ff_ct_form_load_time");n.length&&n.val(Math.floor(Date.now()/1e3))})},initOtherOptionHandlers:function(){jQuery(document).on("change",'.ff-other-option input[type="checkbox"]',function(){var e=jQuery(this),t=e.closest(".ff-el-form-check").find(".ff-other-input-wrapper");if(t.length)if(e.is(":checked")){t.show();var n=t.find(".ff-el-form-control");""===n.val().trim()&&setTimeout(function(){n.focus()},50)}else t.hide(),t.find(".ff-el-form-control").val("")}),jQuery(document).on("change",'.ff-other-option input[type="radio"]',function(){var e=jQuery(this),t=e.closest(".ff-el-input--content"),n=e.closest(".ff-el-form-check").find(".ff-other-input-wrapper");n.length||(n=e.closest("label").next(".ff-other-input-wrapper")),e.is(":checked")&&(t.find(".ff-other-input-wrapper").hide(),n.length&&(n.show(),n.find(".ff-el-form-control").focus()))}),jQuery(document).on("change",'.ff-el-input--content input[type="radio"]',function(){var e=jQuery(this);if(!e.closest(".ff-other-option").length){var t=e.closest(".ff-el-input--content");t.find(".ff-other-input-wrapper").hide(),t.find(".ff-other-input-wrapper .ff-el-form-control").val("")}})},initMultiSelect:function(){n.isFunction(window.Choices)&&n(".ff_has_multi_select").length&&n(".ff_has_multi_select").each(function(e,r){var i=t(t({},{removeItemButton:!0,silent:!0,shouldSort:!1,searchEnabled:!0,searchResultLimit:50,searchFloor:1,searchChoices:!0,fuseOptions:{threshold:.1,distance:200,ignoreLocation:!0,tokenize:!0,matchAllTokens:!1}}),window.fluentFormVars.choice_js_vars),a=n(r).attr("data-max_selected_options");parseInt(a)&&(i.maxItemCount=parseInt(a),i.maxItemText=function(e){return(1===e?window.fluentFormVars.choice_js_vars.maxItemTextSingular:window.fluentFormVars.choice_js_vars.maxItemTextPlural).replace("%%maxItemCount%%",e)}),i.callbackOnCreateTemplates=function(){n(this.passedElement.element);return{option:function(e){var t=Choices.defaults.templates.option.call(this,e);return e.customProperties&&(t.dataset.calc_value=e.customProperties),t}}},n(r).data("choicesjs",new Choices(r,i))})},initMask:function(){if(null!=jQuery.fn.mask){var e={clearIfNotMatch:window.fluentFormVars.input_mask_vars.clearIfNotMatch,translation:{"*":{pattern:/[0-9a-zA-Z]/},0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};jQuery("input[data-mask]").each(function(t,n){var r=(n=jQuery(n)).attr("data-mask"),i=e;n.attr("data-mask-reverse")&&(i.reverse=!0),n.attr("data-clear-if-not-match")&&(i.clearIfNotMatch=!0),r&&n.mask(r,i)})}},initCheckableActive:function(){n(document).on("change",".ff-el-form-check input[type=radio]",function(){n(this).is(":checked")&&(n(this).closest(".ff-el-input--content").find(".ff-el-form-check").removeClass("ff_item_selected"),n(this).closest(".ff-el-form-check").addClass("ff_item_selected"))}),n(document).on("change",".ff-el-form-check input[type=checkbox]",function(){n(this).is(":checked")?n(this).closest(".ff-el-form-check").addClass("ff_item_selected"):n(this).closest(".ff-el-form-check").removeClass("ff_item_selected")})},initNumericFormat:function(){var e=n("form.frm-fluent-form .ff_numeric");n.each(e,function(e,t){var r=n(t),i=JSON.parse(r.attr("data-formatter"));r.val()&&r.val(window.ff_helper.formatCurrency(r,r.val())),r.on("blur change",function(){var e=currency(n(this).val(),i).format();n(this).val(e)})})}},o=function(){return new function(){this.errors={},this.validate=function(e,t){var r,i,a=this,o=!0;e.each(function(e,f){r=n(f),i=r.prop("name").replace("[]",""),"repeater_item"!==r.data("type")&&"repeater_container"!==r.data("type")||(i=r.attr("data-name"),t[i]=t[r.data("error_index")]),t[i]&&n.each(t[i],function(e,t){e in a&&(a[e](r,t)||(o=!1,i in a.errors||(a.errors[i]={}),a.errors[i][e]=t.message))})}),!o&&this.throwValidationException()},this.throwValidationException=function(){var e=new ffValidationError("Validation Error!");throw e.messages=this.errors,e},this.required=function(e,t){if(!t.value)return!0;var r=e.prop("type");if("checkbox"==r||"radio"==r){if(e.parents(".ff-el-group").attr("data-name")&&!t.per_row)return e.parents(".ff-el-group").find("input:checked").length;var i=n('[name="'+e.prop("name")+'"]:checked'),a=e.prop("name").replace("[]","");return i.length&&i.val()==="__ff_other_".concat(a,"__")?n('[name="'.concat(a,'__ff_other_input__"]')).val():i.length}if(r.startsWith("select")){var o=e.find(":selected");return!(!o.length||!o.val().length)}return"file"==r?e.closest("div").find(".ff-uploaded-list").find(".ff-upload-preview[data-src]").length:"false"==e.attr("is-changed")?"":String(n.trim(e.val())).length},this.url=function(e,t){var n=e.val();if(!t.value||!n.length)return!0;return/^(ftp|http|https):\/\/[^ "]+$/.test(n)},this.email=function(e,t){var n=e.val();if(!t.value||!n.length)return!0;return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n.toLowerCase())},this.numeric=function(e,t){var r=window.ff_helper.numericVal(e);return r=r.toString(),!t.value||!r||n.isNumeric(r)},this.min=function(e,t){if(!e.val())return!0;var n=window.ff_helper.numericVal(e);return n=n.toString(),!t.value||!n.length||(this.numeric(e,t)?Number(n)>=Number(t.value):void 0)},this.max=function(e,t){if(!e.val())return!0;var n=window.ff_helper.numericVal(e);return n=n.toString(),!t.value||!n.length||(this.numeric(e,t)?Number(n)<=Number(t.value):void 0)},this.digits=function(e,t){if(!e.val())return!0;var n=window.ff_helper.numericVal(e);return n=n.toString(),!t.value||!n.length||this.numeric(e,t)&&n.length==t.value},this.max_file_size=function(){return!0},this.max_file_count=function(){return!0},this.allowed_file_types=function(){return!0},this.allowed_image_types=function(){return!0},this.force_failed=function(){return!1},this.valid_phone_number=function(e,t){if(!e.val())return!0;if(e&&e[0]){var n;if(!(n=void 0!==window.intlTelInputGlobals?window.intlTelInputGlobals.getInstance(e[0]):e.data("iti")))return!0;if(e.hasClass("ff_el_with_extended_validation"))return!!("yes"===e.data("strict_validation")&&"function"==typeof n.isValidNumberPrecise?n.isValidNumberPrecise():n.isValidNumber())&&(e.val(n.getNumber()),!0);var r=n.getSelectedCountryData(),i=e.val();return!e.attr("data-original_val")&&i&&r&&r.dialCode&&(e.val("+"+r.dialCode+i),e.attr("data-original_val",i)),!0}}}},f=n("form.frm-fluent-form");function s(e){var t=fluentFormApp(e);if(t)t.initFormHandlers(),t.initTriggers();else var n=0,r=setInterval(function(){(t=fluentFormApp(e))&&(clearInterval(r),t.initFormHandlers(),t.initTriggers()),++n>10&&(clearInterval(r),console.log("Form could not be loaded"))},1e3)}function c(){n(".ff_has_multi_select").each(function(){var e=n(this).data("choicesjs");e&&e.passedElement&&e.passedElement.element.addEventListener("showDropdown",function(){var e=this.closest(".choices");if(e){var t=e.querySelector(".choices__list--dropdown");if(t){t.style.maxHeight="300px",t.style.overflowY="auto";var n=t.querySelector('.choices__list[role="listbox"]')||t.querySelector(".choices__list:not(.choices__list--dropdown)");n&&(n.style.maxHeight="280px",n.style.overflowY="auto",n.style.webkitOverflowScrolling="touch",n.style.touchAction="pan-y")}}},{passive:!0})})}n.each(f,function(e,t){s(n(t))}),n(document).on("ff_reinit",function(e,t){var r=n(t),i=fluentFormApp(r);if(!i)return!1;i.reinitExtras(),s(r),a.init(),r.attr("data-ff_reinit","yes")}),a.init(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){setTimeout(c,100)}):setTimeout(c,100)}(window.fluentFormVars,jQuery),jQuery(".fluentform").on("submit",".ff-form-loading",function(e){e.preventDefault(),jQuery(this).parent().find(".ff_msg_temp").remove(),jQuery("<div/>",{class:"error text-danger ff_msg_temp"}).html("Javascript handler could not be loaded. Form submission has been failed. Reload the page and try again").insertAfter(jQuery(this))})})})();


